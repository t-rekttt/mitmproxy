import{c as ue,R as Pr,a as $e,r as R,b as Ae,d as he,j as o,e as j,f as Mr,u as ec,g as tc,h as qr,s as es,i as sc,S as Hr,l as Xt,t as nc,k as rc,m as Rs,n as ic,E as oc,o as lc,p as ac,q as cc,y as dc,v as uc,C as fc,w as Vr,x as Ur,P as mc,z as zr,I as Br,A as Wr,B as Kr,L as Gr,D as Xr,F as pc,G as Yr,H as At,J as hc,T as xc,K as gc,M as ft,N as js,O as vc,X as mt,Q as bc,U as yc,V as wc,W as _c,Y as jc,Z as Nc,_ as ts,$ as Jr,a0 as fr,a1 as Sc,a2 as Qr,a3 as Zr,a4 as $c,a5 as Cc,a6 as kc,a7 as Ec,a8 as Tc,a9 as Rc,aa as Ic,ab as Dc,ac as Is,ad as ei,ae as ti,af as Ac,ag as ss,ah as Fc,ai as Lc,aj as si,ak as ni,al as Oc,am as ri,an as Pc,ao as Mc,ap as ii,aq as oi,ar as qc,as as Hc,at as Vc,au as li,av as Ds,aw as ai,ax as ci,ay as di,az as ui,aA as Uc,aB as fi,aC as mi,aD as pi,aE as hi,aF as zc,aG as Bc,aH as Wc,aI as Kc,aJ as Gc,aK as Xc,aL as As,aM as Yc,aN as mr,aO as xi,aP as Jc,aQ as gi,aR as Qc,aS as Zc,aT as ed,aU as td,aV as yt,aW as sd,aX as nd,aY as rd,aZ as id,a_ as od,a$ as ld,b0 as ad,b1 as cd,b2 as dd,b3 as ud,b4 as fd,b5 as md,b6 as pd,b7 as hd,b8 as xd,b9 as vi,ba as gd,bb as bi,bc as yi,bd as wi,be as vd,bf as bd,bg as yd,bh as wd}from"./vendor-y704S_J8.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();const _d={tab:"request",contentViewFor:{}},jd=ue({name:"ui/flow",initialState:_d,reducers:{selectTab(s,e){s.tab=e.payload},setContentViewFor(s,e){s.contentViewFor[e.payload.messageId]=e.payload.contentView}}}),{actions:Nd,reducer:Sd}=jd,{selectTab:Jt,setContentViewFor:_i}=Nd;window.React=Pr;const ji=function(s){if(s===0)return"0";const e=["b","kb","mb","gb","tb"];let t=0;for(;t<e.length&&!(Math.pow(1024,t+1)>s);t++);let r;return s%Math.pow(1024,t)===0?r=0:r=1,(s/Math.pow(1024,t)).toFixed(r)+e[t]},Ni=function(s){let e=s;const t=["ms","s","min","h"],r=[1e3,60,60];let i=0;for(;Math.abs(e)>=r[i]&&i<r.length;)e=e/r[i],i++;return Math.round(e)+t[i]},ut=function(s,{includeMilliseconds:e=!0}={}){const t=new Date(s*1e3),r=String(t.getFullYear()),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),d=String(t.getSeconds()).padStart(2,"0"),u=String(t.getMilliseconds()).padStart(3,"0");let m=`${r}-${i}-${n} ${l}:${a}:${d}`;return e&&(m+=`.${u}`),m};function pr(s){return s[0].includes(":")?`[${s[0]}]:${s[1]}`:`${s[0]}:${s[1]}`}function $d(s){const e=document.cookie.match(new RegExp("\\b"+s+"=([^;]*)\\b"));return e?e[1]:void 0}let Ns=()=>{const s=$d("_xsrf");return Ns=()=>s,Ns()};function ne(s,e={}){return e.method&&e.method!=="GET"&&(e.headers=e.headers||{},e.headers["X-XSRFToken"]=Ns()),s.startsWith("/")&&(s="."+s),fetch(s,{credentials:"same-origin",...e})}ne.put=(s,e,t={})=>ne(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),...t});ne.post=(s,e,t={})=>ne(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),...t});async function Qt(s,...e){return await(await ne(`/commands/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({arguments:e})})).json()}async function Si(s){try{await navigator.clipboard.write([new ClipboardItem({"text/plain":s})]);return}catch(r){console.warn(r)}const e=await s;try{await navigator.clipboard.writeText(e);return}catch(r){console.warn(r)}const t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.opacity="0",document.body.appendChild(t);try{if(t.focus(),t.select(),!document.execCommand("copy"))throw"failed to copy"}catch{alert(e)}finally{t.remove()}}async function Cd(s){await Si(Promise.resolve(s?.text||""))}function Ss(s,e){const t=s.lastIndexOf(e);if(t===-1)return["",s];const r=s.slice(0,t),i=s.slice(t+e.length);return[r,i]}function $i(s,e){const t=s.indexOf(e);if(t===-1)return[s,""];const r=s.slice(0,t),i=s.slice(t+e.length);return[r,i]}function Ft(s){throw new Error(`Unreachable: ${JSON.stringify(s)}`)}const Ci={http:80,https:443},hr=new WeakMap;class ke{static getContentType(e){const t=ke.get_first_header(e,/^Content-Type$/i);if(t)return t.split(";")[0].trim()}static get_first_header(e,t){let r=hr.get(e);r||(r=new Map,hr.set(e,r));let i=r.get(t);if(i===void 0){const n=e.headers.find(([l,a])=>t.test(l));i=n?n[1]:!1,r.set(t,i)}return i!==!1?i:void 0}static match_header(e,t){const r=e.headers;if(!r)return!1;let i=r.length;for(;i--;)if(t.test(r[i].join(" ")))return r[i];return!1}static getContentURL(e,t,r,i){e.type==="http"&&t===e.request?t="request":e.type==="http"&&t===e.response&&(t="response");const n=i?`?lines=${i}`:"";return`./flows/${e.id}/${t}/`+(r?`content/${encodeURIComponent(r)}.json${n}`:"content.data")}}class dt extends ke{static pretty_url(e){let t="";return Ci[e.scheme]!==e.port&&(t=":"+e.port),e.scheme+"://"+e.pretty_host+t+e.path}}class wt extends ke{}const kd=/^(?:(https?):\/\/)?([^/:]+)?(?::(\d+))?(\/.*)?$/i,ki=function(s){const e=kd.exec(s);if(!e)return;const t=e[1],r=e[2],i=parseInt(e[3]),n=e[4],l=t?i||Ci[t]:i,a={};return t&&(a.scheme=t),r&&(a.host=r),l&&(a.port=l),n&&(a.path=n),a},Ed=/^HTTP\/\d+(\.\d+)*$/i,Ei=function(s){return Ed.test(s)};function Zt(s){switch(s.type){case"http":return s.request.timestamp_start;case"tcp":case"udp":return s.client_conn.timestamp_start;case"dns":return s.request.timestamp}}function Ti(s){switch(s.type){case"http":if(s.websocket){if(s.websocket.timestamp_end)return s.websocket.timestamp_end;if(s.websocket.messages_meta.timestamp_last)return s.websocket.messages_meta.timestamp_last}return s.response?s.response.timestamp_end:void 0;case"tcp":return s.server_conn?.timestamp_end;case"udp":return s.messages_meta.timestamp_last;case"dns":return s.response?.timestamp}}const Ri=s=>{switch(s.type){case"http":{let e=s.request.contentLength||0;return s.response&&(e+=s.response.contentLength||0),s.websocket&&(e+=s.websocket.messages_meta.contentLength||0),e}case"tcp":case"udp":return s.messages_meta.contentLength||0;case"dns":return s.response?.size??0}},Fs=s=>s.type==="http"&&!s.websocket,Ii=s=>s.modified,Ls=s=>s.intercepted,Di=s=>{if(s.type!=="http")return s.client_conn.tls_version==="QUICv1"?"quic":s.type;if(s.websocket)return"websocket";if(!s.response)return"plain";const e=wt.getContentType(s.response)||"";return s.response.status_code===304?"not-modified":300<=s.response.status_code&&s.response.status_code<400?"redirect":e.indexOf("image")>=0?"image":e.indexOf("javascript")>=0?"js":e.indexOf("css")>=0?"css":e.indexOf("html")>=0?"document":"plain"},Ai=s=>{switch(s.type){case"http":return dt.pretty_url(s.request);case"tcp":case"udp":return`${s.client_conn.peername.join(":")} ↔ ${s.server_conn?.address?.join(":")}`;case"dns":return`${s.request.questions.map(e=>`${e.name} ${e.type}`).join(", ")} = ${(s.response?.answers.map(e=>e.data).join(", ")??"...")||"?"}`}},Fi=s=>{switch(s.type){case"http":return s.response?.status_code;case"dns":return s.response?.response_code;default:return}},Li=s=>{switch(s.type){case"http":return s.websocket?s.client_conn.tls_established?"WSS":"WS":s.request.method;case"dns":return s.request.op_code;default:return s.type.toUpperCase()}},Oi=s=>{switch(s.type){case"http":return s.request.http_version;default:return""}},Pi={tls:s=>s.type==="http"&&s.request.scheme,icon:Di,index:()=>0,path:Ai,method:Li,version:Oi,status:Fi,size:Ri,time:s=>{const e=Zt(s),t=Ti(s);return e&&t&&t-e},timestamp:Zt,quickactions:()=>0,comment:s=>s.comment};function Td(s){return s in Pi}var Ne=(s=>(s.Search="search",s.Highlight="highlight",s))(Ne||{});const Mi={search:"",highlight:""},Rd=ue({name:"ui/filters",initialState:Mi,reducers:{setFilter(s,e){s.search=e.payload},setHighlight(s,e){s.highlight=e.payload}}}),{actions:Id,reducer:Dd}=Rd,{setFilter:qi,setHighlight:Hi}=Id;function xs(s,e){return s.toSorted?s.toSorted(e):[...s].sort(e)}function Os(s,...e){if(s.toSpliced)return s.toSpliced(...e);{const t=[...s];return t.splice(...e),t}}function kt(s){return new Map(s.map((e,t)=>[e.id,t]))}function gs(s){return new Set(s.map(e=>e.id))}function xr(s,e){return s.has(e)&&(s=new Set(s),s.delete(e)),s}function gr(s,e,t){const r=Os(s,t,1),i=new Map(e);i.delete(s[t].id);for(let n=r.length-1;n>=t;n--)i.set(r[n].id,n);return{view:r,_viewIndex:i}}function Ad(s,e,t,r){const i=[...s],n=i.length;let l=e,a=l.get(t.id);if(a+1<n&&r(t,i[a+1])>0){l=new Map(l);do{const d=i[a+1];i[a]=d,l.set(d.id,a),a++}while(a+1<n&&r(t,i[a+1])>0);l.set(t.id,a)}else if(a>0&&r(t,i[a-1])<0){l=new Map(l);do{const d=i[a-1];i[a]=d,l.set(d.id,a),a--}while(a>0&&r(t,i[a-1])<0);l.set(t.id,a)}return i[a]=t,{view:i,_viewIndex:l}}function vr(s,e,t,r){const i=Fd(s,t,r),n=Os(s,i,0,t),l=new Map(e);for(let a=n.length-1;a>=i;a--)l.set(n[a].id,a);return{view:n,_viewIndex:l}}function Fd(s,e,t){let r=0,i=s.length;if(i===0||t(s[i-1],e)<=0)return i;for(;r<i;){const n=r+i>>>1;t(e,s[n])>=0?r=n+1:i=n}return r}function Ps(s){return s=s.filter(Ls),()=>Promise.all(s.map(e=>ne(`/flows/${e.id}/resume`,{method:"POST"})))}function Vi(){return()=>ne("/flows/resume",{method:"POST"})}function Ui(s){return s=s.filter(Ls),()=>Promise.all(s.map(e=>ne(`/flows/${e.id}/kill`,{method:"POST"})))}function Ld(){return()=>ne("/flows/kill",{method:"POST"})}function zi(s){return()=>Promise.all(s.map(e=>ne(`/flows/${e.id}`,{method:"DELETE"})))}function Bi(s){return()=>Promise.all(s.map(e=>ne(`/flows/${e.id}/duplicate`,{method:"POST"})))}function Ms(s){return s=s.filter(Fs),()=>Promise.all(s.map(e=>ne(`/flows/${e.id}/replay`,{method:"POST"})))}function Wi(s){return s=s.filter(Ii),()=>Promise.all(s.map(e=>ne(`/flows/${e.id}/revert`,{method:"POST"})))}function br(s,e){return()=>Promise.all(s.map(t=>Pe(t,{marked:e})()))}function Pe(s,e){return()=>ne.put(`/flows/${s.id}`,e)}function Od(s,e,t){const r=new FormData;return e=new window.Blob([e],{type:"plain/text"}),r.append("file",e),()=>ne(`/flows/${s.id}/${t}/content.data`,{method:"POST",body:r})}function Ki(){return()=>ne("/clear",{method:"POST"})}function Pd(s){const e=new FormData;return e.append("file",s),()=>ne("/flows/dump",{method:"POST",body:e})}const Gi=$e("flows/add"),Xi=$e("flows/update"),Yi=$e("flows/remove"),qs=$e("flows/receive"),Ji=$e("flows/filterUpdate"),Qi=$e("flows/sort"),Ve=$e("flows/select"),Md={list:[],_listIndex:new Map,byId:new Map,view:[],_viewIndex:new Map,sort:{column:void 0,desc:!1},selected:[],selectedIds:new Set,highlightedIds:new Set};function qd(s=Md,e){if(qs.match(e)){const{sort:t}=s,r=e.payload,i=kt(r),n=new Map(r.map(p=>[p.id,p])),l=xs(r,vt(t)),a=kt(l),d=s.selected.map(p=>n.get(p.id)).filter(p=>p!==void 0),u=gs(d);return{list:r,_listIndex:i,byId:n,view:l,_viewIndex:a,sort:t,selected:d,selectedIds:u,highlightedIds:new Set}}else if(Gi.match(e)){const{flow:t,matching_filters:r}=e.payload;if(s._listIndex.has(t.id))return s;const{sort:i,selected:n,selectedIds:l}=s;let{view:a,_viewIndex:d,highlightedIds:u}=s;const m=new Map(s._listIndex);m.set(t.id,s.list.length);const p=[...s.list,t],x=new Map(s.byId);return x.set(t.id,t),(r[Ne.Search]===!0||r[Ne.Search]===void 0)&&({view:a,_viewIndex:d}=vr(a,d,t,vt(i))),r[Ne.Highlight]===!0&&(u=new Set(u),u.add(t.id)),{list:p,_listIndex:m,byId:x,view:a,_viewIndex:d,sort:i,selected:n,selectedIds:l,highlightedIds:u}}else if(Xi.match(e)){const{flow:t,matching_filters:r}=e.payload,{_listIndex:i,sort:n,selectedIds:l}=s;let{view:a,_viewIndex:d,selected:u,highlightedIds:m}=s;const p=s._listIndex.get(t.id),x=[...s.list];p!==void 0?x[p]=t:x.push(t);const v=new Map(s.byId);v.set(t.id,t);const y=d.get(t.id),w=y!==void 0,N=r[Ne.Search]===!0||r[Ne.Search]===void 0;return N&&!w?{view:a,_viewIndex:d}=vr(a,d,t,vt(n)):!N&&w?{view:a,_viewIndex:d}=gr(a,d,y):N&&w&&({view:a,_viewIndex:d}=Ad(a,d,t,vt(n))),l.has(t.id)&&(u=u.map(S=>S.id===t.id?t:S)),r[Ne.Highlight]===!0?m.has(t.id)||(m=new Set(m),m.add(t.id)):m=xr(m,t.id),{list:x,_listIndex:i,byId:v,view:a,_viewIndex:d,sort:n,selected:u,selectedIds:l,highlightedIds:m}}else if(Yi.match(e)){const t=e.payload,{sort:r}=s;let{view:i,_viewIndex:n,selected:l,selectedIds:a}=s;const d=s._listIndex.get(t);if(d===void 0)return s;const u=Os(s.list,d,1),m=kt(u),p=new Map(s.byId);p.delete(t);const x=n.get(t);if(x!==void 0&&({view:i,_viewIndex:n}=gr(i,n,x)),a.has(t)){if(l.length===1&&x!==void 0){const y=i[x]??i[x-1];l=y?[y]:[]}else l=l.filter(y=>y.id!==t);a=gs(l)}const v=xr(s.highlightedIds,t);return{list:u,_listIndex:m,byId:p,view:i,_viewIndex:n,sort:r,selected:l,selectedIds:a,highlightedIds:v}}else if(Ji.match(e)){const{name:t,matching_flow_ids:r}=e.payload;switch(t){case Ne.Search:{const i=xs(r===null?s.list:r.map(l=>s.byId.get(l)).filter(l=>l!==void 0),vt(s.sort)),n=kt(i);return{...s,view:i,_viewIndex:n}}case Ne.Highlight:return{...s,highlightedIds:new Set(r)};default:Ft(t)}}else if(Qi.match(e)){const t=e.payload;let r;t.column?r=xs(s.view,vt(t)):r=s.list.filter(n=>s._viewIndex.has(n.id));const i=kt(r);return{...s,sort:t,view:r,_viewIndex:i}}else return Ve.match(e)?{...s,selected:e.payload,selectedIds:gs(e.payload)}:s}function vt({column:s,desc:e}){if(!s)return(r,i)=>0;const t=Pi[s];return(r,i)=>{const n=t(r),l=t(i);return n>l?e?-1:1:n<l?e?1:-1:0}}function bt(s,e){const t=s.selected[s.selected.length-1],r=s._viewIndex.get(t?.id),i=0,n=s.view.length-1;let l;r===void 0?l=e<0?i:n:(l=r+e,l=window.Math.max(l,i),l=window.Math.min(l,n));const a=s.view[l];return Ve(a?[a]:[])}function Hd(s){return(e,t)=>{const{flows:r}=t();r.selectedIds.has(s.id)?e(Ve(r.selected.filter(i=>i!==s))):e(Ve([...r.selected,s]))}}function Vd(s){return(e,t)=>{const{flows:r}=t(),i=r.selected[r.selected.length-1],n=r._viewIndex.get(s.id),l=r._viewIndex.get(i?.id);if(n===void 0||l===void 0)return e(Ve([s]));let a;return n<=l?a=r.view.slice(n,l+1):(a=r.view.slice(l+1,n+1),a.push(i)),e(Ve(a))}}const Ud={activeModal:void 0},Zi=ue({name:"ui/modal",initialState:Ud,reducers:{setActiveModal(s,e){s.activeModal=e.payload},hideModal(s){s.activeModal=void 0}}}),{actions:zd,reducer:Bd}=Zi,Wd=Zi.actions.hideModal.type,{setActiveModal:Kd,hideModal:eo}=zd,yr=(()=>{const s=document.createElement("div");return s.setAttribute("contenteditable","PLAINTEXT-ONLY"),s.contentEditable==="plaintext-only"?"plaintext-only":"true"})();class ce extends R.Component{input=Ae.createRef();render(){const e=he("inline-block min-w-[1em] px-1 py-0.5 rounded border border-transparent","hover:bg-muted/50 hover:border-border","focus:outline-none focus:bg-muted/50 focus:border-border focus:shadow-sm","empty:before:content-[attr(placeholder)] empty:before:text-muted-foreground empty:before:italic",this.props.className);return o.jsx("span",{ref:this.input,tabIndex:0,className:e,placeholder:this.props.placeholder,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onInput:this.onInput,onPaste:this.onPaste,onMouseDown:this.onMouseDown,onClick:this.onClick,children:this.props.content})}componentDidUpdate(e){e.content!==this.props.content&&this.props.onInput?.(this.props.content)}isEditing=()=>this.input.current?.contentEditable===yr;startEditing=()=>{if(!this.input.current)return console.error("unreachable");this.isEditing()||(this.suppress_events=!0,this.input.current.blur(),this.input.current.contentEditable=yr,window.requestAnimationFrame(()=>{if(this.input.current){if(this.input.current.focus(),this.suppress_events=!1,this.props.selectAllOnClick){const e=document.createRange();e.selectNodeContents(this.input.current);const t=window.getSelection();t?.removeAllRanges(),t?.addRange(e)}this.props.onEditStart?.()}}))};resetValue=()=>{if(!this.input.current)return console.error("unreachable");this.input.current.textContent=this.props.content,this.props.onInput?.(this.props.content)};finishEditing=()=>{if(!this.input.current)return console.error("unreachable");this.props.onEditDone(this.input.current.textContent||""),this.input.current.blur(),this.input.current.contentEditable="inherit"};onPaste=e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)};suppress_events=!1;onMouseDown=e=>{this.suppress_events=!0,window.addEventListener("mouseup",this.onMouseUp,{once:!0})};onMouseUp=e=>{const t=e.target===this.input.current,r=!window.getSelection()?.toString();this.props.selectAllOnClick?t&&r&&this.startEditing():t&&this.startEditing(),this.suppress_events=!1};onClick=e=>{};onFocus=e=>{if(!this.input.current)throw"unreachable";this.suppress_events||this.startEditing()};onInput=e=>{this.props.onInput?.(this.input.current?.textContent||"")};onBlur=e=>{this.suppress_events||this.finishEditing()};onKeyDown=e=>{switch(e.stopPropagation(),e.key){case"Escape":e.preventDefault(),this.resetValue(),this.finishEditing();break;case"Enter":e.shiftKey||(e.preventDefault(),this.finishEditing());break}this.props.onKeyDown?.(e)}}function Rt(s){const e=j.c(15);let t;e[0]!==s.content||e[1]!==s.isValid?(t=s.isValid(s.content),e[0]=s.content,e[1]=s.isValid,e[2]=t):t=e[2];const[r,i]=R.useState(t),n=R.useRef(null);let l;e[3]!==s?(l=v=>{s.isValid(v)?s.onEditDone(v):n.current?.resetValue()},e[3]=s,e[4]=l):l=e[4];const a=l,d=r?"text-foreground":"text-red-400";let u;e[5]!==s.className||e[6]!==d?(u=he(s.className,d),e[5]=s.className,e[6]=d,e[7]=u):u=e[7];const m=u;let p;e[8]!==s?(p=v=>i(s.isValid(v)),e[8]=s,e[9]=p):p=e[9];let x;return e[10]!==m||e[11]!==a||e[12]!==s||e[13]!==p?(x=o.jsx(ce,{...s,className:m,onInput:p,onEditDone:a,ref:n}),e[10]=m,e[11]=a,e[12]=s,e[13]=p,e[14]=x):x=e[14],x}const Y=()=>ec(),P=tc,Gd=Mr.withTypes(),Hs=$e("EVENTS_ADD"),to=$e("EVENTS_RECEIVE"),ns=$e("events/toggleVisibility"),so=$e("events/toggleFilter");var no=(s=>(s.debug="debug",s.info="info",s.web="web",s.warn="warn",s.error="error",s))(no||{});const Xd={visible:!1,filters:{debug:!1,info:!0,web:!0,warn:!0,error:!0},list:[],view:[]};function Yd(s=Xd,e){if(Hs.match(e)){const t=e.payload;return{...s,list:[...s.list,t],view:s.filters[t.level]?[...s.view,t]:s.view}}else{if(to.match(e))return{...s,list:e.payload,view:e.payload.filter(t=>s.filters[t.level])};if(ns.match(e))return{...s,visible:!s.visible};if(so.match(e)){const t={...s.filters,[e.payload]:!s.filters[e.payload]};return{...s,filters:t,view:s.list.filter(r=>t[r.level])}}else return s}}function Jd(s,e="web"){return Hs({id:Math.random().toString(),message:s,level:e})}const wr={},Qd=ue({name:"ui/optionsEditor",initialState:wr,reducers:{startUpdate(s,e){s[e.payload.option]={isUpdating:!0,value:e.payload.value,error:!1}},updateSuccess(s,e){s[e.payload.option]=void 0},updateError(s,e){let t=s[e.payload.option].value;typeof t=="boolean"&&(t=!t),s[e.payload.option]={value:t,isUpdating:!1,error:e.payload.error}}},extraReducers:s=>{s.addCase(Wd,()=>wr)}}),{actions:Zd,reducer:eu}=Qd,{startUpdate:tu,updateSuccess:su,updateError:nu}=Zd;var Se=(s=>(s[s.Capture=0]="Capture",s[s.FlowList=1]="FlowList",s[s.Options=2]="Options",s[s.Flow=3]="Flow",s))(Se||{});const ru=ue({name:"ui/tabs",initialState:{current:1},reducers:{setCurrent(s,e){s.current=e.payload}}}),{actions:iu,reducer:ou}=ru,{setCurrent:Yt}=iu,$s="mitmproxy-theme",lu=()=>{if(typeof window<"u"){const s=localStorage.getItem($s);if(s==="dark"||s==="light")return s}return"light"},au={current:lu()},ro=ue({name:"theme",initialState:au,reducers:{setTheme:(s,e)=>{s.current=e.payload,typeof window<"u"&&localStorage.setItem($s,e.payload),typeof document<"u"&&(document.body.classList.remove("theme-light","theme-dark"),document.body.classList.add(`theme-${e.payload}`))},toggleTheme:s=>{const e=s.current==="light"?"dark":"light";s.current=e,typeof window<"u"&&localStorage.setItem($s,e),typeof document<"u"&&(document.body.classList.remove("theme-light","theme-dark"),document.body.classList.add(`theme-${e}`))}}}),{setTheme:Vh,toggleTheme:cu}=ro.actions,du=ro.reducer,uu=qr({flow:Sd,modal:Bd,optionsEditor:eu,tabs:ou,filter:Dd,theme:du});var Tt=(s=>(s.INIT="CONNECTION_INIT",s.FETCHING="CONNECTION_FETCHING",s.ESTABLISHED="CONNECTION_ESTABLISHED",s.ERROR="CONNECTION_ERROR",s))(Tt||{});const fu={state:"CONNECTION_INIT",message:void 0},io=ue({name:"connection",initialState:fu,reducers:{startFetching:s=>{s.state==="CONNECTION_INIT"&&(s.state="CONNECTION_FETCHING")},finishFetching:s=>{s.state==="CONNECTION_FETCHING"&&(s.state="CONNECTION_ESTABLISHED")},connectionError:(s,e)=>{s.state="CONNECTION_ERROR",s.message=e.payload}}}),{startFetching:mu,finishFetching:pu,connectionError:hu}=io.actions,xu=io.reducer,gu={add_upstream_certs_to_client_chain:!1,allow_hosts:[],anticache:!1,anticomp:!1,block_global:!0,block_list:[],block_private:!1,body_size_limit:void 0,cert_passphrase:void 0,certs:[],ciphers_client:void 0,ciphers_server:void 0,client_certs:void 0,client_replay:[],client_replay_concurrency:1,command_history:!0,confdir:"~/.mitmproxy",connect_addr:void 0,connection_strategy:"eager",console_focus_follow:!1,content_view_lines_cutoff:512,dns_name_servers:[],dns_use_hosts_file:!0,export_preserve_original_ip:!1,hardump:"",http2:!0,http2_ping_keepalive:58,http3:!0,http_connect_send_host_header:!0,ignore_hosts:[],intercept:void 0,intercept_active:!1,keep_alt_svc_header:!1,keep_host_header:!1,key_size:2048,listen_host:"",listen_port:void 0,map_local:[],map_remote:[],mode:["regular"],modify_body:[],modify_headers:[],normalize_outbound_headers:!0,onboarding:!0,onboarding_host:"mitm.it",protobuf_definitions:void 0,proxy_debug:!1,proxyauth:void 0,rawtcp:!0,readfile_filter:void 0,request_client_cert:!1,rfile:void 0,save_stream_file:void 0,save_stream_filter:void 0,scripts:[],server:!0,server_replay:[],server_replay_extra:"forward",server_replay_ignore_content:!1,server_replay_ignore_host:!1,server_replay_ignore_params:[],server_replay_ignore_payload_params:[],server_replay_ignore_port:!1,server_replay_kill_extra:!1,server_replay_nopop:!1,server_replay_refresh:!0,server_replay_reuse:!1,server_replay_use_headers:[],show_ignored_hosts:!1,showhost:!1,ssl_insecure:!1,ssl_verify_upstream_trusted_ca:void 0,ssl_verify_upstream_trusted_confdir:void 0,stickyauth:void 0,stickycookie:void 0,store_streamed_bodies:!1,stream_large_bodies:void 0,strip_ech:!0,tcp_hosts:[],tcp_timeout:600,termlog_verbosity:"info",tls_ecdh_curve_client:void 0,tls_ecdh_curve_server:void 0,tls_version_client_max:"UNBOUNDED",tls_version_client_min:"TLS1_2",tls_version_server_max:"UNBOUNDED",tls_version_server_min:"TLS1_2",udp_hosts:[],upstream_auth:void 0,upstream_cert:!0,validate_inbound_headers:!0,view_filter:void 0,view_order:"time",view_order_reversed:!1,web_columns:["tls","icon","path","method","status","size","time"],web_debug:!1,web_host:"127.0.0.1",web_open_browser:!0,web_password:"",web_port:8081,web_static_viewer:"",websocket:!0},rs=$e("OPTIONS_RECEIVE"),Vs=$e("OPTIONS_UPDATE"),vu=ue({name:"options",initialState:gu,reducers:{},extraReducers:s=>{s.addCase(rs,(e,t)=>{const r={};for(const[i,{value:n}]of Object.entries(t.payload))r[i]=n;return r}).addCase(Vs,(e,t)=>{for(const[r,{value:i}]of Object.entries(t.payload))e[r]=i})}}),bu=vu.reducer;async function yu(s,e,t){try{const r=await ne.put("/options",{[s]:e});if(r.status===200)t(su({option:s}));else throw await r.text()}catch(r){t(nu({option:s,error:r.toString()}))}}const wu=yu;function Us(s,e){return t=>{t(tu({option:s,value:e})),wu(s,e,t)}}const _u={visible:!1},ju=ue({name:"commandBar",initialState:_u,reducers:{toggleVisibility(s){s.visible=!s.visible}}}),{actions:Nu,reducer:Su}=ju,{toggleVisibility:oo}=Nu,Ue=$e("STATE_RECEIVE"),ze=$e("STATE_UPDATE"),$u={available:!1,version:"",contentViews:[],servers:{},platform:"",localModeUnavailable:null},Cu=ue({name:"backendState",initialState:$u,reducers:{},extraReducers:s=>{s.addCase(Ue,(e,t)=>({...e,available:!0,...t.payload})).addCase(ze,(e,t)=>({...e,...t.payload}))}}),ku=Cu.reducer,Eu={},Tu=ue({name:"optionsMeta",initialState:Eu,reducers:{},extraReducers:s=>{s.addCase(rs,(e,t)=>t.payload).addCase(Vs,(e,t)=>({...e,...t.payload}))}}),Ru=Tu.reducer,pt=(s,e)=>e.listen_host&&e.listen_port?`${s}@${e.listen_host}:${e.listen_port}`:e.listen_port?`${s}@${e.listen_port}`:s,lo=s=>{let[e,t]=Ss(s,"@");e||(e=t,t="");const[r,i]=$i(e,":");let n,l;if(t){let a;if(t.includes(":")?[n,a]=Ss(t,":"):(n="",a=t),a&&(l=parseInt(a,10),isNaN(l)||l<0||l>65535))throw new Error(`invalid port: ${a}`)}return{full_spec:s,name:r,data:i,listen_host:n,listen_port:l}},ao=s=>pt("regular",s),_r=({listen_host:s,listen_port:e})=>({ui_id:Math.random(),active:!0,listen_host:s,listen_port:e}),co=s=>s.selectedProcesses?`local:${s.selectedProcesses}`:"local",jr=({data:s})=>({ui_id:Math.random(),active:!0,selectedProcesses:s}),uo=s=>{const e=s.file_path?`wireguard:${s.file_path}`:"wireguard";return pt(e,s)},Nr=({data:s,listen_host:e,listen_port:t})=>({ui_id:Math.random(),active:!0,listen_host:e,listen_port:t,file_path:s});var is=(s=>(s.HTTP="http",s.HTTPS="https",s.HTTP3="http3",s.TLS="tls",s.DTLS="dtls",s.TCP="tcp",s.UDP="udp",s.DNS="dns",s.QUIC="quic",s))(is||{}),at=(s=>(s.CSS="css",s.JAVASCRIPT="javascript",s.XML="xml",s.YAML="yaml",s.NONE="none",s.ERROR="error",s))(at||{});const Cs=()=>({active:!1,protocol:is.HTTPS,destination:"",ui_id:Math.random()}),zs=s=>pt(`reverse:${s.protocol}://${s.destination}`,s),Iu=({data:s,listen_host:e,listen_port:t})=>{let[r,i]=$i(s,"://");return i||(i=r,r=is.HTTPS),{ui_id:Math.random(),active:!0,protocol:r,destination:i,listen_host:e,listen_port:t}},fo=s=>pt("transparent",s),Sr=({listen_host:s,listen_port:e})=>({ui_id:Math.random(),active:!0,listen_host:s,listen_port:e}),mo=s=>pt("socks5",s),$r=({listen_host:s,listen_port:e})=>({ui_id:Math.random(),active:!0,listen_host:s,listen_port:e}),po=s=>pt(`upstream:${s.destination}`,s),Cr=({data:s,listen_host:e,listen_port:t})=>({ui_id:Math.random(),active:!0,destination:s||"",listen_host:e,listen_port:t}),ho=s=>pt("dns",s),kr=({listen_host:s,listen_port:e})=>({ui_id:Math.random(),active:!0,listen_host:s,listen_port:e}),tt=s=>s.active&&!s.error;async function Du(s,e){const t=e.getState().modes,r=[...t.regular.filter(tt).map(ao),...t.local.filter(tt).map(co),...t.wireguard.filter(tt).map(uo),...t.reverse.filter(tt).map(zs),...t.transparent.filter(tt).map(fo),...t.socks.filter(tt).map(mo),...t.upstream.filter(tt).map(po),...t.dns.filter(tt).map(ho)],i=await ne.put("/options",{mode:r});if(i.status!==200)throw new Error(await i.text())}function re(s){return Gd(s,Du)}function se(s,e,t){s.addCase(t.pending,(r,i)=>{const{server:n,value:l}=i.meta.arg,a=r.findIndex(d=>d.ui_id===n.ui_id);a>=0&&(r[a][e]=l,r[a].error=void 0)}),s.addCase(t.rejected,(r,i)=>{const{server:n}=i.meta.arg,l=r.findIndex(a=>a.ui_id===n.ui_id);l>=0&&(r[l].error=i.error.message)})}function Ee(s,e){return function(r,i){if(i.payload.servers){const n=Object.values(i.payload.servers).filter(l=>l.type===s).map(l=>lo(l.full_spec));if(n.length>0)return n.map(e);for(const l of r)l.active=!1}}}const xo=re("modes/regular/setActive"),go=re("modes/regular/setListenHost"),vo=re("modes/regular/setListenPort"),Au=[{active:!0,ui_id:Math.random()}],Fu=ue({name:"modes/regular",initialState:Au,reducers:{},extraReducers:s=>{se(s,"active",xo),se(s,"listen_host",go),se(s,"listen_port",vo),s.addCase(Ue,Ee("regular",_r)),s.addCase(ze,Ee("regular",_r))}}),Lu=Fu.reducer,bo=re("modes/local/setActive"),It=re("modes/local/setSelectedProcesses"),Ou=[{active:!1,selectedProcesses:"",ui_id:Math.random()}],Pu=ue({name:"modes/local",initialState:Ou,reducers:{},extraReducers:s=>{se(s,"active",bo),se(s,"selectedProcesses",It),s.addCase(Ue,Ee("local",jr)),s.addCase(ze,Ee("local",jr))}}),Mu=Pu.reducer,yo=re("modes/wireguard/setActive"),wo=re("modes/wireguard/setListenHost"),_o=re("modes/wireguard/setListenPort"),jo=re("modes/wireguard/setFilePath"),qu=[{active:!1,ui_id:Math.random()}],Hu=ue({name:"modes/wireguard",initialState:qu,reducers:{},extraReducers:s=>{se(s,"active",yo),se(s,"listen_host",wo),se(s,"listen_port",_o),se(s,"file_path",jo),s.addCase(Ue,Ee("wireguard",Nr)),s.addCase(ze,Ee("wireguard",Nr))}}),Vu=Hu.reducer,ks=re("modes/reverse/setActive"),No=re("modes/reverse/setListenHost"),So=re("modes/reverse/setListenPort"),$o=re("modes/reverse/setProtocol"),Co=re("modes/reverse/setDestination"),Uu=[Cs()],ko=ue({name:"modes/reverse",initialState:Uu,reducers:{addServer:s=>{s.push(Cs())},removeServer:(s,e)=>{const t=s.findIndex(r=>r.ui_id===e.payload.ui_id);t!==-1&&(s[t].active&&console.error("servers should be deactivated before removal"),s.splice(t,1))}},extraReducers:s=>{se(s,"active",ks),se(s,"listen_host",No),se(s,"listen_port",So),se(s,"protocol",$o),se(s,"destination",Co),s.addCase(Ue,e),s.addCase(ze,e);function e(t,r){if(r.payload.servers){const i=Object.fromEntries(Object.entries(r.payload.servers).filter(([l,a])=>a.type==="reverse").map(([l,a])=>[l,lo(l)])),n=[];for(const l of t){const a=zs(l),d=a in i;delete i[a],n.push({...l,active:d})}for(const l of Object.values(i))n.push(Iu(l));return n.length>1&&es({...n[0],ui_id:void 0},{...Cs(),ui_id:void 0})&&n.shift(),n}}}}),{addServer:zu,removeServer:Bu}=ko.actions,Wu=ko.reducer,Eo=re("modes/transparent/setActive"),To=re("modes/transparent/setListenHost"),Ro=re("modes/transparent/setListenPort"),Ku=[{active:!1,ui_id:Math.random()}],Gu=ue({name:"modes/transparent",initialState:Ku,reducers:{},extraReducers:s=>{se(s,"active",Eo),se(s,"listen_host",To),se(s,"listen_port",Ro),s.addCase(Ue,Ee("transparent",Sr)),s.addCase(ze,Ee("transparent",Sr))}}),Xu=Gu.reducer,Io=re("modes/socks5/setActive"),Do=re("modes/socks5/setListenHost"),Ao=re("modes/socks5/setListenPort"),Yu=[{active:!1,ui_id:Math.random()}],Ju=ue({name:"modes/socks5",initialState:Yu,reducers:{},extraReducers:s=>{se(s,"active",Io),se(s,"listen_host",Do),se(s,"listen_port",Ao),s.addCase(Ue,Ee("socks5",$r)),s.addCase(ze,Ee("socks5",$r))}}),Qu=Ju.reducer,Fo=re("modes/upstream/setActive"),Lo=re("modes/upstream/setListenHost"),Oo=re("modes/upstream/setListenPort"),Po=re("modes/upstream/setDestination"),Zu=[{active:!1,destination:"",ui_id:Math.random()}],ef=ue({name:"modes/upstream",initialState:Zu,reducers:{},extraReducers:s=>{se(s,"active",Fo),se(s,"listen_host",Lo),se(s,"listen_port",Oo),se(s,"destination",Po),s.addCase(Ue,Ee("upstream",Cr)),s.addCase(ze,Ee("upstream",Cr))}}),tf=ef.reducer,Mo=re("modes/dns/setActive"),qo=re("modes/dns/setListenHost"),Ho=re("modes/dns/setListenPort"),sf=[{active:!0,ui_id:Math.random()}],nf=ue({name:"modes/dns",initialState:sf,reducers:{},extraReducers:s=>{se(s,"active",Mo),se(s,"listen_host",qo),se(s,"listen_port",Ho),s.addCase(Ue,Ee("dns",kr)),s.addCase(ze,Ee("dns",kr))}}),rf=nf.reducer,of=qr({regular:Lu,local:Mu,wireguard:Vu,reverse:Wu,transparent:Xu,socks:Qu,upstream:tf,dns:rf}),Dt=Mr("fetchProcesses",async(s,{rejectWithValue:e})=>{try{return(await ne("/processes")).json()}catch(t){return e(t.message)}}),lf={currentProcesses:[],isLoading:!1},af=ue({name:"processes",initialState:lf,reducers:{},extraReducers:s=>{s.addCase(Dt.pending,e=>{e.isLoading=!0,e.error=void 0}),s.addCase(Dt.fulfilled,(e,t)=>{e.isLoading=!1,e.currentProcesses=t.payload}),s.addCase(Dt.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}),cf=af.reducer,df={commandBar:Su,eventLog:Yd,flows:qd,connection:xu,modes:of,ui:uu,options:bu,options_meta:Ru,backendState:ku,processes:cf},uf={immutableCheck:{warnAfter:5e5},serializableCheck:{warnAfter:5e5,ignoredPaths:["flows"]}},jt=sc({reducer:df,middleware:s=>s(uf),devTools:!1});class ff extends R.Component{container=Ae.createRef();nameInput=Ae.createRef();valueInput=Ae.createRef();render=()=>{const[e,t]=this.props.item;return o.jsxs("div",{ref:this.container,className:"flex items-baseline gap-1 py-0.5 hover:bg-muted/50 rounded",onClick:this.onClick,onKeyDownCapture:this.onKeyDown,children:[o.jsx(ce,{ref:this.nameInput,className:"font-medium text-primary min-w-[100px]",content:e,onEditStart:this.props.onEditStart,onEditDone:r=>this.props.onEditDone([r,t]),selectAllOnClick:!0}),": ",o.jsx(ce,{ref:this.valueInput,className:"flex-1 text-muted-foreground",content:t,onEditStart:this.props.onEditStart,onEditDone:r=>this.props.onEditDone([e,r]),placeholder:"empty",selectAllOnClick:!0})]})};onClick=e=>{e.target===this.container.current&&this.props.onClickEmptyArea()};onKeyDown=e=>{e.target===this.valueInput.current?.input.current&&e.key==="Tab"&&this.props.onTabNext()}}class Vo extends R.Component{rowRefs={};currentlyEditing;justFinishedEditing;state={currentList:this.props.data||[],initialList:this.props.data};static getDerivedStateFromProps(e,t){return e.data!==t.initialList?{currentList:e.data||[],initialList:e.data}:null}render=()=>{this.rowRefs={};const e=this.state.currentList.map((t,r)=>o.jsx(ff,{item:t,onEditStart:()=>this.currentlyEditing=r,onEditDone:i=>this.onEditDone(r,i),onClickEmptyArea:()=>this.onClickEmptyArea(r),onTabNext:()=>this.onTabNext(r),ref:i=>{this.rowRefs[r]=i}},r));return o.jsxs("div",{className:he("space-y-0.5",this.props.className),onMouseDown:this.onMouseDown,children:[e,o.jsxs("div",{onClick:t=>{t.preventDefault(),this.onClickEmptyArea(this.state.currentList.length-1)},className:"flex items-center gap-1 py-1 text-muted-foreground hover:text-foreground cursor-pointer",role:"button","aria-label":"Add",children:[o.jsx(Hr,{className:"h-4 w-4"}),o.jsx("span",{className:"text-sm",children:"Add entry"})]})]})};onEditDone=(e,t)=>{const r=[...this.state.currentList];t[0]?r[e]=t:r.splice(e,1),this.currentlyEditing=void 0,Xt.isEqual(this.state.currentList,r)||this.props.onChange(r),this.setState({currentList:r})};onClickEmptyArea=e=>{if(this.justFinishedEditing)return;const t=[...this.state.currentList];t.splice(e+1,0,["",""]),this.setState({currentList:t},()=>this.rowRefs[e+1]?.nameInput.current?.startEditing())};onTabNext=e=>{e==this.state.currentList.length-1&&this.onClickEmptyArea(e)};onMouseDown=e=>{this.justFinishedEditing=this.currentlyEditing}}function Uo(s,e){const t=j.c(6),[r,i]=R.useState(),[n,l]=R.useState();let a;t[0]!==n||t[1]!==s?(a=()=>{n&&n.abort();const u=new AbortController;return ne(s,{signal:u.signal}).then(mf).then(m=>{i(m)}).catch(m=>{u.signal.aborted||i(`Error getting content: ${m}.`)}),l(u),()=>{u.signal.aborted||u.abort()}},t[0]=n,t[1]=s,t[2]=a):a=t[2];let d;return t[3]!==e||t[4]!==s?(d=[s,e],t[3]=e,t[4]=s,t[5]=d):d=t[5],R.useEffect(a,d),r}function mf(s){if(!s.ok)throw`${s.status} ${s.statusText}`.trim();return s.text()}function zo(s,e,t,r,i){const n=j.c(11);let l;n[0]!==s||n[1]!==r||n[2]!==e||n[3]!==t?(l=ke.getContentURL(s,e,t,r),n[0]=s,n[1]=r,n[2]=e,n[3]=t,n[4]=l):l=n[4];const d=Uo(l,i);let u;if(d)try{let m;n[5]!==d?(m=JSON.parse(d),n[5]=d,n[6]=m):m=n[6],u=m}catch{let m;n[7]!==d?(m={text:d,description:"Network Error",syntax_highlight:"error",view_name:"raw"},n[7]=d,n[8]=m):m=n[8];const p=m;if(e==="messages"){let x;n[9]!==p?(x=[p],n[9]=p,n[10]=x):x=n[10],u=x}else u=p}else u=void 0;return u}function H(...s){return nc(rc(s))}const pf=Rs("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground shadow-sm hover:bg-success/90",warning:"bg-warning text-warning-foreground shadow-sm hover:bg-warning/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Te=R.forwardRef((s,e)=>{const t=j.c(15);let r,i,n,l,a;t[0]!==s?({className:r,variant:a,size:n,asChild:l,...i}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n,t[4]=l,t[5]=a):(r=t[1],i=t[2],n=t[3],l=t[4],a=t[5]);const u=(l===void 0?!1:l)?ic:"button";let m;t[6]!==r||t[7]!==n||t[8]!==a?(m=H(pf({variant:a,size:n,className:r})),t[6]=r,t[7]=n,t[8]=a,t[9]=m):m=t[9];let p;return t[10]!==u||t[11]!==i||t[12]!==e||t[13]!==m?(p=o.jsx(u,{className:m,ref:e,...i}),t[10]=u,t[11]=i,t[12]=e,t[13]=m,t[14]=p):p=t[14],p});Te.displayName="Button";const Bo=Ae.memo(function(e){const t=j.c(30),{icon:r,text:i,title:n,onOpenFile:l,onClick:a,className:d,variant:u}=e,m=u===void 0?"button":u,p=R.useId(),x=R.useRef(null);let v;t[0]!==l?(v=T=>{T.preventDefault(),T.target.files&&T.target.files.length>0&&l(T.target.files[0]),x.current&&(x.current.value="")},t[0]=l,t[1]=v):v=t[1];const y=v;if(m==="menu"){let T;t[2]!==d?(T=H("relative flex cursor-pointer select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",d),t[2]=d,t[3]=T):T=t[3];let D;t[4]!==r||t[5]!==p||t[6]!==a||t[7]!==T||t[8]!==i||t[9]!==n?(D=o.jsxs("label",{htmlFor:p,title:n,className:T,onClick:a,children:[r,i]}),t[4]=r,t[5]=p,t[6]=a,t[7]=T,t[8]=i,t[9]=n,t[10]=D):D=t[10];let L;t[11]!==y||t[12]!==p?(L=o.jsx("input",{id:p,ref:x,className:"hidden",type:"file",onChange:y}),t[11]=y,t[12]=p,t[13]=L):L=t[13];let q;return t[14]!==D||t[15]!==L?(q=o.jsxs(o.Fragment,{children:[D,L]}),t[14]=D,t[15]=L,t[16]=q):q=t[16],q}let w;t[17]!==d?(w=H(d),t[17]=d,t[18]=w):w=t[18];let N;t[19]===Symbol.for("react.memo_cache_sentinel")?(N=()=>x.current?.click(),t[19]=N):N=t[19];let S;t[20]!==r||t[21]!==w||t[22]!==i||t[23]!==n?(S=o.jsxs(Te,{variant:"outline",size:"sm",className:w,title:n,onClick:N,children:[r,i]}),t[20]=r,t[21]=w,t[22]=i,t[23]=n,t[24]=S):S=t[24];let $;t[25]!==y?($=o.jsx("input",{ref:x,className:"hidden",type:"file",onChange:y}),t[25]=y,t[26]=$):$=t[26];let k;return t[27]!==S||t[28]!==$?(k=o.jsxs(o.Fragment,{children:[S,$]}),t[27]=S,t[28]=$,t[29]=k):k=t[29],k});function ve(s){const e=j.c(11),{onClick:t,children:r,icon:i,disabled:n,className:l,title:a}=s;let d;e[0]!==l?(d=H(l),e[0]=l,e[1]=d):d=e[1];const u=n?void 0:t;let m;e[2]!==i?(m=i&&o.jsx(i,{className:"h-4 w-4 mr-1"}),e[2]=i,e[3]=m):m=e[3];let p;return e[4]!==r||e[5]!==n||e[6]!==d||e[7]!==u||e[8]!==m||e[9]!==a?(p=o.jsxs(Te,{variant:"outline",size:"sm",className:d,onClick:u,disabled:n,title:a,children:[m,r]}),e[4]=r,e[5]=n,e[6]=d,e[7]=u,e[8]=m,e[9]=a,e[10]=p):p=e[10],p}const hf=oc.theme({"&":{color:"hsl(var(--foreground))",backgroundColor:"hsl(var(--background))"},".cm-content":{caretColor:"hsl(var(--foreground))"},"&.cm-focused .cm-cursor":{borderLeftColor:"hsl(var(--foreground))"},"&.cm-focused .cm-selectionBackground, ::selection":{backgroundColor:"hsl(var(--accent))"},".cm-gutters":{backgroundColor:"hsl(var(--muted))",color:"hsl(var(--muted-foreground))",border:"none"}},{dark:!0});function xf(s){const e=j.c(11),{initialContent:t,onChange:r,language:i,readonly:n}=s,l=n===void 0?!1:n,a=gf;let d;e:switch(i){case at.YAML:{let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=[dc()],e[0]=p):p=e[0],d=p;break e}case at.XML:{let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=[cc()],e[1]=p):p=e[1],d=p;break e}case at.JAVASCRIPT:{let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=[ac()],e[2]=p):p=e[2],d=p;break e}case at.CSS:{let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=[lc()],e[3]=p):p=e[3],d=p;break e}case void 0:case null:case at.NONE:case at.ERROR:{let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[4]=p):p=e[4],d=p;break e}default:{console.error("Unexpected syntax highlighting language: ",i);let x;e[5]===Symbol.for("react.memo_cache_sentinel")?(x=[],e[5]=x):x=e[5],d=x}}const u=d;let m;return e[6]!==u||e[7]!==t||e[8]!==r||e[9]!==l?(m=o.jsx("div",{className:"mb-3",onKeyDown:a,children:o.jsx(uc,{value:t,onChange:r,readOnly:l,extensions:u,theme:hf})}),e[6]=u,e[7]=t,e[8]=r,e[9]=l,e[10]=m):m=e[10],m}function gf(s){return s.stopPropagation()}const Wo=Ae.memo(function(e){const t=j.c(9),{content:r,maxLines:i,showMore:n}=e;if(r.length===0)return null;let l;if(t[0]!==r||t[1]!==i||t[2]!==n){let d;t[4]!==i||t[5]!==n?(d=(u,m)=>m===i?o.jsxs("button",{onClick:n,className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded bg-primary text-primary-foreground hover:bg-primary/90",children:[o.jsx(fc,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),"Show more"]},"showmore"):o.jsx("div",{children:u},m),t[4]=i,t[5]=n,t[6]=d):d=t[6],l=r.split(`
`).map(d),t[0]=r,t[1]=i,t[2]=n,t[3]=l}else l=t[3];let a;return t[7]!==l?(a=o.jsx("pre",{children:l}),t[7]=l,t[8]=a):a=t[8],a}),Ko=gc,Go=xc,vf=R.forwardRef((s,e)=>{const t=j.c(14);let r,i,n,l;t[0]!==s?({className:i,inset:n,children:r,...l}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n,t[4]=l):(r=t[1],i=t[2],n=t[3],l=t[4]);const a=n&&"pl-8";let d;t[5]!==i||t[6]!==a?(d=H("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a,i),t[5]=i,t[6]=a,t[7]=d):d=t[7];let u;t[8]===Symbol.for("react.memo_cache_sentinel")?(u=o.jsx(pc,{className:"ml-auto"}),t[8]=u):u=t[8];let m;return t[9]!==r||t[10]!==l||t[11]!==e||t[12]!==d?(m=o.jsxs(Vr,{ref:e,className:d,...l,children:[r,u]}),t[9]=r,t[10]=l,t[11]=e,t[12]=d,t[13]=m):m=t[13],m});vf.displayName=Vr.displayName;const bf=R.forwardRef((s,e)=>{const t=j.c(9);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),t[3]=r,t[4]=n):n=t[4];let l;return t[5]!==i||t[6]!==e||t[7]!==n?(l=o.jsx(Ur,{ref:e,className:n,...i}),t[5]=i,t[6]=e,t[7]=n,t[8]=l):l=t[8],l});bf.displayName=Ur.displayName;const Bs=R.forwardRef((s,e)=>{const t=j.c(11);let r,i,n;t[0]!==s?({className:r,sideOffset:n,...i}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n):(r=t[1],i=t[2],n=t[3]);const l=n===void 0?4:n;let a;t[4]!==r?(a=H("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),t[4]=r,t[5]=a):a=t[5];let d;return t[6]!==i||t[7]!==e||t[8]!==l||t[9]!==a?(d=o.jsx(mc,{children:o.jsx(zr,{ref:e,sideOffset:l,className:a,...i})}),t[6]=i,t[7]=e,t[8]=l,t[9]=a,t[10]=d):d=t[10],d});Bs.displayName=zr.displayName;const _t=R.forwardRef((s,e)=>{const t=j.c(11);let r,i,n;t[0]!==s?({className:r,inset:i,...n}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n):(r=t[1],i=t[2],n=t[3]);const l=i&&"pl-8";let a;t[4]!==r||t[5]!==l?(a=H("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",l,r),t[4]=r,t[5]=l,t[6]=a):a=t[6];let d;return t[7]!==n||t[8]!==e||t[9]!==a?(d=o.jsx(Br,{ref:e,className:a,...n}),t[7]=n,t[8]=e,t[9]=a,t[10]=d):d=t[10],d});_t.displayName=Br.displayName;const yf=R.forwardRef((s,e)=>{const t=j.c(14);let r,i,n,l;t[0]!==s?({className:n,children:i,checked:r,...l}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n,t[4]=l):(r=t[1],i=t[2],n=t[3],l=t[4]);let a;t[5]!==n?(a=H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),t[5]=n,t[6]=a):a=t[6];let d;t[7]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Yr,{children:o.jsx(At,{className:"h-4 w-4"})})}),t[7]=d):d=t[7];let u;return t[8]!==r||t[9]!==i||t[10]!==l||t[11]!==e||t[12]!==a?(u=o.jsxs(Wr,{ref:e,className:a,checked:r,...l,children:[d,i]}),t[8]=r,t[9]=i,t[10]=l,t[11]=e,t[12]=a,t[13]=u):u=t[13],u});yf.displayName=Wr.displayName;const wf=R.forwardRef((s,e)=>{const t=j.c(12);let r,i,n;t[0]!==s?({className:i,children:r,...n}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n):(r=t[1],i=t[2],n=t[3]);let l;t[4]!==i?(l=H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i),t[4]=i,t[5]=l):l=t[5];let a;t[6]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Yr,{children:o.jsx(hc,{className:"h-2 w-2 fill-current"})})}),t[6]=a):a=t[6];let d;return t[7]!==r||t[8]!==n||t[9]!==e||t[10]!==l?(d=o.jsxs(Kr,{ref:e,className:l,...n,children:[a,r]}),t[7]=r,t[8]=n,t[9]=e,t[10]=l,t[11]=d):d=t[11],d});wf.displayName=Kr.displayName;const _f=R.forwardRef((s,e)=>{const t=j.c(11);let r,i,n;t[0]!==s?({className:r,inset:i,...n}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n):(r=t[1],i=t[2],n=t[3]);const l=i&&"pl-8";let a;t[4]!==r||t[5]!==l?(a=H("px-2 py-1.5 text-sm font-semibold",l,r),t[4]=r,t[5]=l,t[6]=a):a=t[6];let d;return t[7]!==n||t[8]!==e||t[9]!==a?(d=o.jsx(Gr,{ref:e,className:a,...n}),t[7]=n,t[8]=e,t[9]=a,t[10]=d):d=t[10],d});_f.displayName=Gr.displayName;const Xo=R.forwardRef((s,e)=>{const t=j.c(9);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H("-mx-1 my-1 h-px bg-muted",r),t[3]=r,t[4]=n):n=t[4];let l;return t[5]!==i||t[6]!==e||t[7]!==n?(l=o.jsx(Xr,{ref:e,className:n,...i}),t[5]=i,t[6]=e,t[7]=n,t[8]=l):l=t[8],l});Xo.displayName=Xr.displayName;function He(s){const e=j.c(3),{onClick:t,children:r}=s;let i;return e[0]!==r||e[1]!==t?(i=o.jsx(_t,{onClick:t,children:r}),e[0]=r,e[1]=t,e[2]=i):i=e[2],i}const os=Ae.memo(function(e){const t=j.c(12),{text:r,children:i,onOpen:n}=e,[l,a]=R.useState(!1);let d;t[0]!==n?(d=y=>{a(y),n&&n(y)},t[0]=n,t[1]=d):d=t[1];const u=d;let m;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsx(ft,{className:"h-3 w-3"}),t[2]=m):m=t[2];let p;t[3]!==r?(p=o.jsx(Go,{asChild:!0,children:o.jsxs(Te,{variant:"ghost",size:"sm",className:"gap-1 h-8",children:[r,m]})}),t[3]=r,t[4]=p):p=t[4];let x;t[5]!==i?(x=o.jsx(Bs,{align:"start",children:i}),t[5]=i,t[6]=x):x=t[6];let v;return t[7]!==u||t[8]!==l||t[9]!==p||t[10]!==x?(v=o.jsxs(Ko,{open:l,onOpenChange:u,children:[p,x]}),t[7]=u,t[8]=l,t[9]=p,t[10]=x,t[11]=v):v=t[11],v});function Yo(s){const e=j.c(16),{value:t,onChange:r}=s,i=P(jf);let n,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx(js,{className:"h-3 w-3"}),l=o.jsx("b",{children:"View:"}),e[0]=n,e[1]=l):(n=e[0],l=e[1]);let a;e[2]!==t?(a=t.toLowerCase(),e[2]=t,e[3]=a):a=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx(ft,{className:"h-3 w-3"}),e[4]=d):d=e[4];let u;e[5]!==a?(u=o.jsxs("span",{className:"inline-flex items-center gap-1",children:[n,l," ",a," ",d]}),e[5]=a,e[6]=u):u=e[6];const m=u;let p;e[7]===Symbol.for("react.memo_cache_sentinel")?(p={placement:"top-end"},e[7]=p):p=e[7];let x;if(e[8]!==i||e[9]!==r){let y;e[11]!==r?(y=w=>o.jsx(He,{onClick:()=>r(w),children:w.toLowerCase().replace("_"," ")},w),e[11]=r,e[12]=y):y=e[12],x=i.map(y),e[8]=i,e[9]=r,e[10]=x}else x=e[10];let v;return e[13]!==m||e[14]!==x?(v=o.jsx(os,{text:m,options:p,children:x}),e[13]=m,e[14]=x,e[15]=v):v=e[15],v}function jf(s){return s.backendState.contentViews||[]}function Nf(s){const e=j.c(8),{flow:t,message:r}=s,[i,n]=R.useState(!1);if(i){let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>n(!1),e[0]=l):l=e[0];let a;return e[1]!==t||e[2]!==r?(a=o.jsx(Sf,{flow:t,message:r,stopEdit:l}),e[1]=t,e[2]=r,e[3]=a):a=e[3],a}else{let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=()=>n(!0),e[4]=l):l=e[4];let a;return e[5]!==t||e[6]!==r?(a=o.jsx($f,{flow:t,message:r,startEdit:l}),e[5]=t,e[6]=r,e[7]=a):a=e[7],a}}function Sf(s){const e=j.c(23),{flow:t,message:r,stopEdit:i}=s,n=Y(),l=t.request===r?"request":"response";let a;e[0]!==t||e[1]!==r?(a=ke.getContentURL(t,r),e[0]=t,e[1]=r,e[2]=a):a=e[2];const u=Uo(a,r.contentHash),[m,p]=R.useState();let x;e[3]!==u||e[4]!==n||e[5]!==m||e[6]!==t||e[7]!==l||e[8]!==i?(x=async()=>{await n(Pe(t,{[l]:{content:m||u||""}})),i()},e[3]=u,e[4]=n,e[5]=m,e[6]=t,e[7]=l,e[8]=i,e[9]=x):x=e[9];const v=x;let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=o.jsx("h5",{className:"text-sm font-medium",children:"[Editing]"}),e[10]=y):y=e[10];let w;e[11]!==v?(w=o.jsx(ve,{onClick:v,icon:At,className:"",children:"Done"}),e[11]=v,e[12]=w):w=e[12];let N;e[13]!==i?(N=o.jsx(ve,{onClick:()=>i(),icon:mt,className:"",children:"Cancel"}),e[13]=i,e[14]=N):N=e[14];let S;e[15]!==w||e[16]!==N?(S=o.jsxs("div",{className:"flex items-center justify-between gap-4 pb-2 border-b border-border",children:[y,o.jsxs("div",{className:"flex items-center gap-2",children:[w,N]})]}),e[15]=w,e[16]=N,e[17]=S):S=e[17];const $=u||"";let k;e[18]!==$?(k=o.jsx(xf,{initialContent:$,onChange:p}),e[18]=$,e[19]=k):k=e[19];let T;return e[20]!==S||e[21]!==k?(T=o.jsxs("div",{className:"p-4 space-y-4",children:[S,k]},"edit"),e[20]=S,e[21]=k,e[22]=T):T=e[22],T}function $f(s){const e=j.c(46),{flow:t,message:r,startEdit:i}=s,n=Y(),l=t.request===r?"request":"response";let a;e[0]!==t.id||e[1]!==l?(a=B=>B.ui.flow.contentViewFor[t.id+l]||"Auto",e[0]=t.id,e[1]=l,e[2]=a):a=e[2];const d=P(a),[u,m]=R.useState(P(Cf));let p;e[3]!==u?(p=()=>m(Math.max(1024,u*2)),e[3]=u,e[4]=p):p=e[4];const x=p,v=zo(t,r,d,u+1,r.contentHash);let y;if(r.contentLength===0)y="No content";else if(v===void 0)y="Loading...";else{const B=`${v.view_name} ${v.description}`;let W;e[5]!==B?(W=B.trimEnd(),e[5]=B,e[6]=W):W=e[6],y=W}let w;e[7]!==y?(w=o.jsx("h5",{className:"text-sm font-medium",children:y}),e[7]=y,e[8]=w):w=e[8];let N;e[9]!==v||e[10]!==t||e[11]!==r?(N=v&&v?.text.length>0&&o.jsx(kf,{flow:t,message:r}),e[9]=v,e[10]=t,e[11]=r,e[12]=N):N=e[12];let S;e[13]!==i?(S=o.jsx(ve,{onClick:i,icon:bc,className:"",children:"Edit"}),e[13]=i,e[14]=S):S=e[14];let $;e[15]===Symbol.for("react.memo_cache_sentinel")?($=o.jsx(yc,{className:"h-4 w-4 mr-2"}),e[15]=$):$=e[15];let k;e[16]!==n||e[17]!==t||e[18]!==l?(k=o.jsx(Bo,{icon:$,text:"Replace",title:"Upload a file to replace the content.",onOpenFile:B=>n(Od(t,B,l))}),e[16]=n,e[17]=t,e[18]=l,e[19]=k):k=e[19];let T;e[20]!==n||e[21]!==t.id||e[22]!==l?(T=B=>n(_i({messageId:t.id+l,contentView:B})),e[20]=n,e[21]=t.id,e[22]=l,e[23]=T):T=e[23];let D;e[24]!==d||e[25]!==T?(D=o.jsx(Yo,{value:d,onChange:T}),e[24]=d,e[25]=T,e[26]=D):D=e[26];let L;e[27]!==N||e[28]!==S||e[29]!==k||e[30]!==D?(L=o.jsxs("div",{className:"flex items-center gap-2",children:[N,S,k,D]}),e[27]=N,e[28]=S,e[29]=k,e[30]=D,e[31]=L):L=e[31];let q;e[32]!==L||e[33]!==w?(q=o.jsxs("div",{className:"flex items-center justify-between gap-4 pb-2 border-b border-border",children:[w,L]}),e[32]=L,e[33]=w,e[34]=q):q=e[34];let O;e[35]!==t||e[36]!==r?(O=Es.matches(r)&&o.jsx(Es,{flow:t,message:r}),e[35]=t,e[36]=r,e[37]=O):O=e[37];const V=v?.text??"";let z;e[38]!==u||e[39]!==x||e[40]!==V?(z=o.jsx(Wo,{content:V,maxLines:u,showMore:x}),e[38]=u,e[39]=x,e[40]=V,e[41]=z):z=e[41];let K;return e[42]!==q||e[43]!==O||e[44]!==z?(K=o.jsxs("div",{className:"p-4 space-y-4",children:[q,O,z]},"view"),e[42]=q,e[43]=O,e[44]=z,e[45]=K):K=e[45],K}function Cf(s){return s.options.content_view_lines_cutoff}function kf({flow:s,message:e}){const t=s.request===e?"request":"response",r=P(u=>u.ui.flow.contentViewFor[s.id+t]||"Auto"),[i,n]=R.useState(!1),[l,a]=R.useState(!1),d=async()=>{try{const u=ke.getContentURL(s,e,r);a(!0);const m=await ne(u);if(!m.ok)throw new Error(`${m.status} ${m.statusText}`.trim());const p=await m.json();await Cd(p),n(!0),setTimeout(()=>n(!1),2e3)}catch(u){console.error(u)}finally{a(!1)}};return o.jsx(ve,{onClick:d,icon:vc,className:"",disabled:l,children:i?"Copied!":"Copy"})}const Ef=/^image\/(png|jpe?g|gif|webp|vnc.microsoft.icon|x-icon|svg\+xml)$/i;Es.matches=s=>Ef.test(ke.getContentType(s)||"");function Es(s){const e=j.c(5),{flow:t,message:r}=s;let i;e[0]!==t||e[1]!==r?(i=ke.getContentURL(t,r),e[0]=t,e[1]=r,e[2]=i):i=e[2];let n;return e[3]!==i?(n=o.jsx("div",{className:"flex justify-center p-4",children:o.jsx("img",{src:i,alt:"preview",className:"max-w-full h-auto rounded border border-border"})}),e[3]=i,e[4]=n):n=e[4],n}function Tf(s){const e=j.c(24),{flow:t}=s,r=Y();let i;e[0]!==r||e[1]!==t?(i=x=>r(Pe(t,{request:{method:x}})),e[0]=r,e[1]=t,e[2]=i):i=e[2];let n;e[3]!==t.request.method||e[4]!==i?(n=o.jsx(Rt,{content:t.request.method,onEditDone:i,isValid:If,selectAllOnClick:!0}),e[3]=t.request.method,e[4]=i,e[5]=n):n=e[5];let l;e[6]!==t.request?(l=dt.pretty_url(t.request),e[6]=t.request,e[7]=l):l=e[7];let a;e[8]!==r||e[9]!==t?(a=x=>r(Pe(t,{request:{path:"",...ki(x)}})),e[8]=r,e[9]=t,e[10]=a):a=e[10];let d;e[11]!==l||e[12]!==a?(d=o.jsx(Rt,{content:l,onEditDone:a,isValid:Rf}),e[11]=l,e[12]=a,e[13]=d):d=e[13];let u;e[14]!==r||e[15]!==t?(u=x=>r(Pe(t,{request:{http_version:x}})),e[14]=r,e[15]=t,e[16]=u):u=e[16];let m;e[17]!==t.request.http_version||e[18]!==u?(m=o.jsx(Rt,{content:t.request.http_version,onEditDone:u,isValid:Ei,selectAllOnClick:!0}),e[17]=t.request.http_version,e[18]=u,e[19]=m):m=e[19];let p;return e[20]!==n||e[21]!==d||e[22]!==m?(p=o.jsxs("div",{className:"flex items-center gap-1 px-4 py-2 font-mono text-sm bg-muted/30 border-b border-border",children:[n,d,m]}),e[20]=n,e[21]=d,e[22]=m,e[23]=p):p=e[23],p}function Rf(s){return!!ki(s)?.host}function If(s){return s.length>0}function Df(s){const e=j.c(19),{flow:t}=s,r=Y();let i;e[0]!==r||e[1]!==t?(i=p=>r(Pe(t,{response:{http_version:p}})),e[0]=r,e[1]=t,e[2]=i):i=e[2];let n;e[3]!==t.response.http_version||e[4]!==i?(n=o.jsx(Rt,{content:t.response.http_version,onEditDone:i,isValid:Ei,selectAllOnClick:!0}),e[3]=t.response.http_version,e[4]=i,e[5]=n):n=e[5];const l=t.response.status_code+"";let a;e[6]!==r||e[7]!==t?(a=p=>r(Pe(t,{response:{code:parseInt(p)}})),e[6]=r,e[7]=t,e[8]=a):a=e[8];let d;e[9]!==l||e[10]!==a?(d=o.jsx(Rt,{content:l,onEditDone:a,isValid:Af,selectAllOnClick:!0}),e[9]=l,e[10]=a,e[11]=d):d=e[11];let u;e[12]!==r||e[13]!==t?(u=t.response.http_version!=="HTTP/2.0"&&o.jsx(ce,{content:t.response.reason,onEditDone:p=>r(Pe(t,{response:{msg:p}})),selectAllOnClick:!0}),e[12]=r,e[13]=t,e[14]=u):u=e[14];let m;return e[15]!==n||e[16]!==d||e[17]!==u?(m=o.jsxs("div",{className:"flex items-center gap-1 px-4 py-2 font-mono text-sm bg-muted/30 border-b border-border",children:[n,d,u]}),e[15]=n,e[16]=d,e[17]=u,e[18]=m):m=e[18],m}function Af(s){return/^\d+$/.test(s)}function Ff(s){const e=j.c(7),{flow:t,message:r}=s,i=Y(),n=t.request===r?"request":"response";let l;e[0]!==i||e[1]!==t||e[2]!==n?(l=d=>i(Pe(t,{[n]:{headers:d}})),e[0]=i,e[1]=t,e[2]=n,e[3]=l):l=e[3];let a;return e[4]!==r.headers||e[5]!==l?(a=o.jsx(Vo,{className:"px-4 py-2",data:r.headers,onChange:l}),e[4]=r.headers,e[5]=l,e[6]=a):a=e[6],a}function Lf(s){const e=j.c(8),{flow:t,message:r}=s,i=Y(),n=t.request===r?"request":"response";if(!!!ke.get_first_header(r,/^trailer$/i))return null;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx("h5",{className:"px-4 py-2 text-sm font-medium text-muted-foreground",children:"HTTP Trailers"}),e[0]=a):a=e[0];let d;e[1]!==i||e[2]!==t||e[3]!==n?(d=m=>i(Pe(t,{[n]:{trailers:m}})),e[1]=i,e[2]=t,e[3]=n,e[4]=d):d=e[4];let u;return e[5]!==r.trailers||e[6]!==d?(u=o.jsxs("div",{className:"border-t border-border",children:[a,o.jsx(Vo,{className:"px-4 py-2",data:r.trailers,onChange:d})]}),e[5]=r.trailers,e[6]=d,e[7]=u):u=e[7],u}const Jo=R.memo(function(e){const t=j.c(18),{flow:r,message:i}=e,n=r.request===i?"request":"response",l=r.request===i?Tf:Df;let a;t[0]!==l||t[1]!==r?(a=o.jsx(l,{flow:r}),t[0]=l,t[1]=r,t[2]=a):a=t[2];let d;t[3]!==r||t[4]!==i?(d=o.jsx(Ff,{flow:r,message:i}),t[3]=r,t[4]=i,t[5]=d):d=t[5];const u=r.id+n;let m;t[6]!==r||t[7]!==i||t[8]!==u?(m=o.jsx(Nf,{flow:r,message:i},u),t[6]=r,t[7]=i,t[8]=u,t[9]=m):m=t[9];let p;t[10]!==r||t[11]!==i?(p=o.jsx(Lf,{flow:r,message:i}),t[10]=r,t[11]=i,t[12]=p):p=t[12];let x;return t[13]!==a||t[14]!==d||t[15]!==m||t[16]!==p?(x=o.jsxs("section",{className:"divide-y divide-border",children:[a,d,m,p]}),t[13]=a,t[14]=d,t[15]=m,t[16]=p,t[17]=x):x=t[17],x});function Qo(){const s=j.c(2),e=P(Of);let t;return s[0]!==e?(t=o.jsx(Jo,{flow:e,message:e.request}),s[0]=e,s[1]=t):t=s[1],t}function Of(s){return s.flows.selected[0]}Qo.displayName="Request";function Zo(){const s=j.c(2),e=P(Pf);let t;return s[0]!==e?(t=o.jsx(Jo,{flow:e,message:e.response}),s[0]=e,s[1]=t):t=s[1],t}function Pf(s){return s.flows.selected[0]}Zo.displayName="Response";const Mf=s=>{const e=j.c(3),{message:t}=s,r=t.query?t.op_code:t.response_code,i=t.truncation?"(Truncated)":"";let n;return e[0]!==r||e[1]!==i?(n=o.jsxs("div",{children:[r," ",i]}),e[0]=r,e[1]=i,e[2]=n):n=e[2],n},qf=s=>{const e=j.c(10),{message:t}=s,r=t.recursion_desired?"Recursive ":"";let i;e[0]!==r?(i=o.jsxs("h5",{className:"text-sm font-semibold",children:[r,"Question"]}),e[0]=r,e[1]=i):i=e[1];let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-border",children:[o.jsx("th",{className:"text-left py-1 font-medium text-muted-foreground",children:"Name"}),o.jsx("th",{className:"text-left py-1 font-medium text-muted-foreground",children:"Type"}),o.jsx("th",{className:"text-left py-1 font-medium text-muted-foreground",children:"Class"})]})}),e[2]=n):n=e[2];let l;e[3]!==t.questions?(l=t.questions.map(Uf),e[3]=t.questions,e[4]=l):l=e[4];let a;e[5]!==l?(a=o.jsxs("table",{className:"w-full text-sm",children:[n,o.jsx("tbody",{children:l})]}),e[5]=l,e[6]=a):a=e[6];let d;return e[7]!==i||e[8]!==a?(d=o.jsxs("div",{className:"space-y-2",children:[i,a]}),e[7]=i,e[8]=a,e[9]=d):d=e[9],d},vs=s=>{const e=j.c(7),{name:t,values:r}=s;let i;e[0]!==t?(i=o.jsx("h5",{className:"text-sm font-semibold",children:t}),e[0]=t,e[1]=i):i=e[1];let n;e[2]!==r?(n=r.length>0?o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-border",children:[o.jsx("th",{className:"text-left py-1 font-medium text-muted-foreground",children:"Name"}),o.jsx("th",{className:"text-left py-1 font-medium text-muted-foreground",children:"Type"}),o.jsx("th",{className:"text-left py-1 font-medium text-muted-foreground",children:"Class"}),o.jsx("th",{className:"text-left py-1 font-medium text-muted-foreground",children:"TTL"}),o.jsx("th",{className:"text-left py-1 font-medium text-muted-foreground",children:"Data"})]})}),o.jsx("tbody",{children:r.map(zf)})]}):o.jsx("span",{className:"text-muted-foreground",children:"—"}),e[2]=r,e[3]=n):n=e[3];let l;return e[4]!==i||e[5]!==n?(l=o.jsxs("div",{className:"space-y-2",children:[i,n]}),e[4]=i,e[5]=n,e[6]=l):l=e[6],l},el=s=>{const e=j.c(19),{message:t}=s;let r,i;e[0]!==t?(r=o.jsx("div",{className:"px-4 py-2 font-mono text-sm bg-muted/30 border-b border-border rounded-t",children:o.jsx(Mf,{message:t})}),i=o.jsx(qf,{message:t}),e[0]=t,e[1]=r,e[2]=i):(r=e[1],i=e[2]);let n;e[3]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("div",{className:"border-t border-border"}),e[3]=n):n=e[3];const l=`${t.authoritative_answer?"Authoritative ":""}${t.recursion_available?"Recursive ":""}Answer`;let a;e[4]!==t.answers||e[5]!==l?(a=o.jsx(vs,{name:l,values:t.answers}),e[4]=t.answers,e[5]=l,e[6]=a):a=e[6];let d;e[7]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx("div",{className:"border-t border-border"}),e[7]=d):d=e[7];let u;e[8]!==t.authorities?(u=o.jsx(vs,{name:"Authority",values:t.authorities}),e[8]=t.authorities,e[9]=u):u=e[9];let m;e[10]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsx("div",{className:"border-t border-border"}),e[10]=m):m=e[10];let p;e[11]!==t.additionals?(p=o.jsx(vs,{name:"Additional",values:t.additionals}),e[11]=t.additionals,e[12]=p):p=e[12];let x;return e[13]!==r||e[14]!==i||e[15]!==a||e[16]!==u||e[17]!==p?(x=o.jsxs("section",{className:"p-4 space-y-4",children:[r,i,n,a,d,u,m,p]}),e[13]=r,e[14]=i,e[15]=a,e[16]=u,e[17]=p,e[18]=x):x=e[18],x};function tl(){const s=j.c(2),e=P(Hf);let t;return s[0]!==e.request?(t=o.jsx(el,{type:"request",message:e.request}),s[0]=e.request,s[1]=t):t=s[1],t}function Hf(s){return s.flows.selected[0]}tl.displayName="Request";function sl(){const s=j.c(2),e=P(Vf);let t;return s[0]!==e.response?(t=o.jsx(el,{type:"response",message:e.response}),s[0]=e.response,s[1]=t):t=s[1],t}function Vf(s){return s.flows.selected[0]}sl.displayName="Response";function Uf(s,e){return o.jsxs("tr",{className:"border-b border-border/50",children:[o.jsx("td",{className:"py-1",children:s.name}),o.jsx("td",{className:"py-1",children:s.type}),o.jsx("td",{className:"py-1",children:s.class})]},e)}function zf(s,e){return o.jsxs("tr",{className:"border-b border-border/50",children:[o.jsx("td",{className:"py-1",children:s.name}),o.jsx("td",{className:"py-1",children:s.type}),o.jsx("td",{className:"py-1",children:s.class}),o.jsx("td",{className:"py-1",children:s.ttl}),o.jsx("td",{className:"py-1",children:JSON.stringify(s.data).replace(/^"|"$/g,"")})]},e)}function Kt(s,e){return e?(e=[e[0],e[1]],e[0].includes(":")&&(e[0]=`[${e[0]}]`),o.jsxs("tr",{children:[o.jsxs("td",{className:"py-1 pr-4 text-muted-foreground w-40",children:[s,":"]}),o.jsx("td",{className:"py-1",children:e.join(":")})]})):o.jsx(o.Fragment,{})}function Er(s){const e=j.c(26),{conn:t}=s;let r;if("address"in t){let u;e[0]!==t.address?(u=Kt("Address",t.address),e[0]=t.address,e[1]=u):u=e[1];let m;e[2]!==t.peername?(m=Kt("Resolved address",t.peername),e[2]=t.peername,e[3]=m):m=e[3];let p;e[4]!==t.sockname?(p=Kt("Source address",t.sockname),e[4]=t.sockname,e[5]=p):p=e[5];let x;e[6]!==u||e[7]!==m||e[8]!==p?(x=o.jsxs(o.Fragment,{children:[u,m,p]}),e[6]=u,e[7]=m,e[8]=p,e[9]=x):x=e[9],r=x}else{let u;e[10]!==t.peername?(u=Kt("Address",t.peername),e[10]=t.peername,e[11]=u):u=e[11],r=u}let i;e[12]!==t.sni?(i=t.sni?o.jsxs("tr",{children:[o.jsxs("td",{className:"py-1 pr-4 text-muted-foreground w-40",children:[o.jsx("abbr",{title:"TLS Server Name Indication",children:"SNI"}),":"]}),o.jsx("td",{className:"py-1",children:t.sni})]}):null,e[12]=t.sni,e[13]=i):i=e[13];let n;e[14]!==t.alpn?(n=t.alpn?o.jsxs("tr",{children:[o.jsxs("td",{className:"py-1 pr-4 text-muted-foreground w-40",children:[o.jsx("abbr",{title:"ALPN protocol negotiated",children:"ALPN"}),":"]}),o.jsx("td",{className:"py-1",children:t.alpn})]}):null,e[14]=t.alpn,e[15]=n):n=e[15];let l;e[16]!==t.tls_version?(l=t.tls_version?o.jsxs("tr",{children:[o.jsx("td",{className:"py-1 pr-4 text-muted-foreground w-40",children:"TLS Version:"}),o.jsx("td",{className:"py-1",children:t.tls_version})]}):null,e[16]=t.tls_version,e[17]=l):l=e[17];let a;e[18]!==t.cipher?(a=t.cipher?o.jsxs("tr",{children:[o.jsx("td",{className:"py-1 pr-4 text-muted-foreground w-40",children:"TLS Cipher:"}),o.jsx("td",{className:"py-1",children:t.cipher})]}):null,e[18]=t.cipher,e[19]=a):a=e[19];let d;return e[20]!==r||e[21]!==i||e[22]!==n||e[23]!==l||e[24]!==a?(d=o.jsx("table",{className:"w-full text-sm",children:o.jsxs("tbody",{children:[r,i,n,l,a]})}),e[20]=r,e[21]=i,e[22]=n,e[23]=l,e[24]=a,e[25]=d):d=e[25],d}function Tr(s){return o.jsx("dl",{className:"grid grid-cols-[auto_1fr] gap-x-2 gap-y-0.5 text-sm",children:s.map(([e,t])=>o.jsxs(R.Fragment,{children:[o.jsx("dt",{className:"text-muted-foreground",children:e}),o.jsx("dd",{className:"text-foreground",children:t})]},e))})}function Bf(s){const e=j.c(46),{flow:t}=s,r=t.server_conn?.cert;if(!r){let K;return e[0]===Symbol.for("react.memo_cache_sentinel")?(K=o.jsx(o.Fragment,{}),e[0]=K):K=e[0],K}let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsx("h4",{className:"text-sm font-semibold mt-4 mb-2",children:"Server Certificate"},"name"),e[1]=i):i=e[1];let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("td",{className:"py-1 pr-4 text-muted-foreground w-40",children:"Type"}),e[2]=n):n=e[2];let l;e[3]!==r.keyinfo[0]||e[4]!==r.keyinfo[1]?(l=o.jsxs("tr",{children:[n,o.jsxs("td",{className:"py-1",children:[r.keyinfo[0],", ",r.keyinfo[1]," bits"]})]}),e[3]=r.keyinfo[0],e[4]=r.keyinfo[1],e[5]=l):l=e[5];let a;e[6]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx("td",{className:"py-1 pr-4 text-muted-foreground w-40",children:"SHA256 digest"}),e[6]=a):a=e[6];let d;e[7]!==r.sha256?(d=o.jsxs("tr",{children:[a,o.jsx("td",{className:"py-1 font-mono text-xs break-all",children:r.sha256})]}),e[7]=r.sha256,e[8]=d):d=e[8];let u;e[9]===Symbol.for("react.memo_cache_sentinel")?(u=o.jsx("td",{className:"py-1 pr-4 text-muted-foreground w-40",children:"Valid from"}),e[9]=u):u=e[9];let m;e[10]!==r.notbefore?(m=ut(r.notbefore,{includeMilliseconds:!1}),e[10]=r.notbefore,e[11]=m):m=e[11];let p;e[12]!==m?(p=o.jsxs("tr",{children:[u,o.jsx("td",{className:"py-1",children:m})]}),e[12]=m,e[13]=p):p=e[13];let x;e[14]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsx("td",{className:"py-1 pr-4 text-muted-foreground w-40",children:"Valid to"}),e[14]=x):x=e[14];let v;e[15]!==r.notafter?(v=ut(r.notafter,{includeMilliseconds:!1}),e[15]=r.notafter,e[16]=v):v=e[16];let y;e[17]!==v?(y=o.jsxs("tr",{children:[x,o.jsx("td",{className:"py-1",children:v})]}),e[17]=v,e[18]=y):y=e[18];let w;e[19]===Symbol.for("react.memo_cache_sentinel")?(w=o.jsx("td",{className:"py-1 pr-4 text-muted-foreground w-40",children:"Subject Alternative Names"}),e[19]=w):w=e[19];let N;e[20]!==r.altnames?(N=r.altnames.join(", "),e[20]=r.altnames,e[21]=N):N=e[21];let S;e[22]!==N?(S=o.jsxs("tr",{children:[w,o.jsx("td",{className:"py-1",children:N})]}),e[22]=N,e[23]=S):S=e[23];let $;e[24]===Symbol.for("react.memo_cache_sentinel")?($=o.jsx("td",{className:"py-1 pr-4 text-muted-foreground w-40 align-top",children:"Subject"}),e[24]=$):$=e[24];let k;e[25]!==r.subject?(k=Tr(r.subject),e[25]=r.subject,e[26]=k):k=e[26];let T;e[27]!==k?(T=o.jsxs("tr",{children:[$,o.jsx("td",{className:"py-1",children:k})]}),e[27]=k,e[28]=T):T=e[28];let D;e[29]===Symbol.for("react.memo_cache_sentinel")?(D=o.jsx("td",{className:"py-1 pr-4 text-muted-foreground w-40 align-top",children:"Issuer"}),e[29]=D):D=e[29];let L;e[30]!==r.issuer?(L=Tr(r.issuer),e[30]=r.issuer,e[31]=L):L=e[31];let q;e[32]!==L?(q=o.jsxs("tr",{children:[D,o.jsx("td",{className:"py-1",children:L})]}),e[32]=L,e[33]=q):q=e[33];let O;e[34]===Symbol.for("react.memo_cache_sentinel")?(O=o.jsx("td",{className:"py-1 pr-4 text-muted-foreground w-40",children:"Serial"}),e[34]=O):O=e[34];let V;e[35]!==r.serial?(V=o.jsxs("tr",{children:[O,o.jsx("td",{className:"py-1 font-mono text-xs",children:r.serial})]}),e[35]=r.serial,e[36]=V):V=e[36];let z;return e[37]!==y||e[38]!==S||e[39]!==T||e[40]!==q||e[41]!==V||e[42]!==l||e[43]!==d||e[44]!==p?(z=o.jsxs(o.Fragment,{children:[i,o.jsx("table",{className:"w-full text-sm",children:o.jsxs("tbody",{children:[l,d,p,y,S,T,q,V]})})]}),e[37]=y,e[38]=S,e[39]=T,e[40]=q,e[41]=V,e[42]=l,e[43]=d,e[44]=p,e[45]=z):z=e[45],z}function nl(s){const e=j.c(11),{flow:t}=s;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx("h4",{className:"text-sm font-semibold",children:"Client Connection"}),e[0]=r):r=e[0];let i;e[1]!==t.client_conn?(i=o.jsx(Er,{conn:t.client_conn}),e[1]=t.client_conn,e[2]=i):i=e[2];let n;e[3]!==t.server_conn?(n=t.server_conn?.address&&o.jsxs(o.Fragment,{children:[o.jsx("h4",{className:"text-sm font-semibold mt-4",children:"Server Connection"}),o.jsx(Er,{conn:t.server_conn})]}),e[3]=t.server_conn,e[4]=n):n=e[4];let l;e[5]!==t?(l=o.jsx(Bf,{flow:t}),e[5]=t,e[6]=l):l=e[6];let a;return e[7]!==i||e[8]!==n||e[9]!==l?(a=o.jsxs("section",{className:"p-4 space-y-4",children:[r,i,n,l]}),e[7]=i,e[8]=n,e[9]=l,e[10]=a):a=e[10],a}nl.displayName="Connection";function rl(s){const e=j.c(9),{flow:t}=s;let r;e[0]!==t.error.msg?(r=o.jsx("div",{className:"font-medium",children:t.error.msg}),e[0]=t.error.msg,e[1]=r):r=e[1];let i;e[2]!==t.error.timestamp?(i=ut(t.error.timestamp),e[2]=t.error.timestamp,e[3]=i):i=e[3];let n;e[4]!==i?(n=o.jsx("div",{className:"mt-1 text-sm text-yellow-600 dark:text-yellow-500",children:i}),e[4]=i,e[5]=n):n=e[5];let l;return e[6]!==r||e[7]!==n?(l=o.jsx("section",{className:"p-4",children:o.jsxs("div",{className:"p-4 rounded-md border border-yellow-500/50 bg-yellow-500/10 text-yellow-700 dark:text-yellow-400",children:[r,n]})}),e[6]=r,e[7]=n,e[8]=l):l=e[8],l}rl.displayName="Error";function Wf(s){const e=j.c(4),{t,deltaTo:r,title:i}=s;let n;return e[0]!==r||e[1]!==t||e[2]!==i?(n=t?o.jsxs("tr",{children:[o.jsxs("td",{className:"py-1 pr-4 text-muted-foreground",children:[i,":"]}),o.jsxs("td",{className:"py-1",children:[ut(t),r&&o.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",Ni(1e3*(t-r)),")"]})]})]}):o.jsx("tr",{}),e[0]=r,e[1]=t,e[2]=i,e[3]=n):n=e[3],n}function il(s){const e=j.c(26),{flow:t}=s;let r;t.type==="http"?r=t.request.timestamp_start:r=t.client_conn.timestamp_start;const i=t.server_conn?.timestamp_start;let n,l,a,d;if(e[0]!==t.client_conn.timestamp_end||e[1]!==t.client_conn.timestamp_start||e[2]!==t.client_conn.timestamp_tls_setup||e[3]!==t.request||e[4]!==t.response?.timestamp_end||e[5]!==t.response?.timestamp_start||e[6]!==t.server_conn?.timestamp_end||e[7]!==t.server_conn?.timestamp_tcp_setup||e[8]!==t.server_conn?.timestamp_tls_setup||e[9]!==t.type||e[10]!==r||e[11]!==i){const x=[{title:"Server conn. initiated",t:i,deltaTo:r},{title:"Server conn. TCP handshake",t:t.server_conn?.timestamp_tcp_setup,deltaTo:r},{title:"Server conn. TLS handshake",t:t.server_conn?.timestamp_tls_setup,deltaTo:r},{title:"Server conn. closed",t:t.server_conn?.timestamp_end,deltaTo:r},{title:"Client conn. established",t:t.client_conn.timestamp_start,deltaTo:t.type==="http"?r:void 0},{title:"Client conn. TLS handshake",t:t.client_conn.timestamp_tls_setup,deltaTo:r},{title:"Client conn. closed",t:t.client_conn.timestamp_end,deltaTo:r}];t.type==="http"&&x.push({title:"First request byte",t:t.request.timestamp_start},{title:"Request complete",t:t.request.timestamp_end,deltaTo:r},{title:"First response byte",t:t.response?.timestamp_start,deltaTo:r},{title:"Response complete",t:t.response?.timestamp_end,deltaTo:r}),a="p-4 space-y-4",e[16]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx("h4",{className:"text-sm font-semibold",children:"Timing"}),e[16]=d):d=e[16],l="w-full text-sm",n=x.filter(Xf).sort(Gf).map(Kf),e[0]=t.client_conn.timestamp_end,e[1]=t.client_conn.timestamp_start,e[2]=t.client_conn.timestamp_tls_setup,e[3]=t.request,e[4]=t.response?.timestamp_end,e[5]=t.response?.timestamp_start,e[6]=t.server_conn?.timestamp_end,e[7]=t.server_conn?.timestamp_tcp_setup,e[8]=t.server_conn?.timestamp_tls_setup,e[9]=t.type,e[10]=r,e[11]=i,e[12]=n,e[13]=l,e[14]=a,e[15]=d}else n=e[12],l=e[13],a=e[14],d=e[15];let u;e[17]!==n?(u=o.jsx("tbody",{children:n}),e[17]=n,e[18]=u):u=e[18];let m;e[19]!==l||e[20]!==u?(m=o.jsx("table",{className:l,children:u}),e[19]=l,e[20]=u,e[21]=m):m=e[21];let p;return e[22]!==a||e[23]!==d||e[24]!==m?(p=o.jsxs("section",{className:a,children:[d,m]}),e[22]=a,e[23]=d,e[24]=m,e[25]=p):p=e[25],p}function Kf(s){const{title:e,t,deltaTo:r}=s;return o.jsx(Wf,{title:e,t,deltaTo:r},e)}function Gf(s,e){return s.t-e.t}function Xf(s){return!!s.t}il.displayName="Timing";function Ws({flow:s,messages_meta:e}){const t=Y(),r=P(u=>u.ui.flow.contentViewFor[s.id+"messages"]||"Auto"),[i,n]=R.useState(P(u=>u.options.content_view_lines_cutoff)),l=R.useCallback(()=>n(Math.max(1024,i*2)),[i]),a=zo(s,"messages",r,i+1,s.id+e.count)??[];let d=i;return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between gap-4 pb-2 border-b border-border",children:[o.jsxs("h5",{className:"text-sm font-medium",children:[e.count," Messages"]}),o.jsx(Yo,{value:r,onChange:u=>t(_i({messageId:s.id+"messages",contentView:u}))})]}),a.map((u,m)=>{const p=u.from_client?wc:_c,x=u.from_client?"text-blue-500":"text-red-500",v=o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsx(p,{className:`h-4 w-4 ${x}`}),o.jsx("span",{children:u.timestamp&&ut(u.timestamp)})]}),o.jsx(Wo,{content:u.text,maxLines:d,showMore:l})]},m);return d-=u.text.split(`
`).length,v})]})}function ol(s){const e=j.c(8),{flow:t}=s;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx("h4",{className:"text-sm font-semibold",children:"WebSocket"}),e[0]=r):r=e[0];let i;e[1]!==t?(i=o.jsx(Ws,{flow:t,messages_meta:t.websocket.messages_meta}),e[1]=t,e[2]=i):i=e[2];let n;e[3]!==t.websocket?(n=o.jsx(Yf,{websocket:t.websocket}),e[3]=t.websocket,e[4]=n):n=e[4];let l;return e[5]!==i||e[6]!==n?(l=o.jsxs("section",{className:"p-4 space-y-4",children:[r,i,n]}),e[5]=i,e[6]=n,e[7]=l):l=e[7],l}ol.displayName="WebSocket";function Yf(s){const e=j.c(12),{websocket:t}=s;if(!t.timestamp_end)return null;const r=t.close_reason?`(${t.close_reason})`:"";let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsx(jc,{className:"h-4 w-4 text-muted-foreground"}),e[0]=i):i=e[0];const n=t.closed_by_client?"client":"server";let l;e[1]!==r||e[2]!==n||e[3]!==t.close_code?(l=o.jsxs("span",{className:"flex items-center gap-1",children:[i,"Closed by ",n," ","with code ",t.close_code," ",r,"."]}),e[1]=r,e[2]=n,e[3]=t.close_code,e[4]=l):l=e[4];let a;e[5]!==t.timestamp_end?(a=ut(t.timestamp_end),e[5]=t.timestamp_end,e[6]=a):a=e[6];let d;e[7]!==a?(d=o.jsx("span",{className:"text-xs text-muted-foreground",children:a}),e[7]=a,e[8]=d):d=e[8];let u;return e[9]!==l||e[10]!==d?(u=o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l,d]}),e[9]=l,e[10]=d,e[11]=u):u=e[11],u}function ll(s){const e=j.c(7),{flow:t}=s,r=Y();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsx("h4",{className:"text-sm font-semibold",children:"Comment"}),e[0]=i):i=e[0];let n;e[1]!==r||e[2]!==t?(n=a=>{r(Pe(t,{comment:a}))},e[1]=r,e[2]=t,e[3]=n):n=e[3];let l;return e[4]!==t.comment||e[5]!==n?(l=o.jsxs("section",{className:"p-4 space-y-4",children:[i,o.jsx(ce,{className:"flex-1 text-muted-foreground",content:t.comment,onEditDone:n,placeholder:"empty",selectAllOnClick:!0})]}),e[4]=t.comment,e[5]=n,e[6]=l):l=e[6],l}ll.displayName="Comment";function al(s){const e=j.c(2),{flow:t}=s;let r;return e[0]!==t?(r=o.jsx("section",{className:"p-4",children:o.jsx(Ws,{flow:t,messages_meta:t.messages_meta})}),e[0]=t,e[1]=r):r=e[1],r}al.displayName="Stream Data";function cl(s){const e=j.c(2),{flow:t}=s;let r;return e[0]!==t?(r=o.jsx("section",{className:"p-4",children:o.jsx(Ws,{flow:t,messages_meta:t.messages_meta})}),e[0]=t,e[1]=r):r=e[1],r}cl.displayName="Datagrams";const Rr={request:Qo,response:Zo,error:rl,connection:nl,timing:il,websocket:ol,tcpmessages:al,udpmessages:cl,dnsrequest:tl,dnsresponse:sl,comment:ll};function Ts(s){let e;switch(s.type){case"http":e=["request","response","websocket"].filter(t=>s[t]);break;case"tcp":e=["tcpmessages"];break;case"udp":e=["udpmessages"];break;case"dns":e=["request","response"].filter(t=>s[t]).map(t=>"dns"+t);break}return s.error&&e.push("error"),e.push("connection"),e.push("timing"),e.push("comment"),e}function Jf(){const s=j.c(18),e=Y(),t=P(Zf);let r=P(Qf);if(t==null){let $;return s[0]===Symbol.for("react.memo_cache_sentinel")?($=o.jsx(o.Fragment,{}),s[0]=$):$=s[0],$}const i=Ts(t);i.indexOf(r)<0&&(r==="response"&&t.error?r="error":r==="error"&&"response"in t?r="response":r=i[0]);const n=Rr[r],l="flex flex-col flex-1 min-h-0 border-t border-border",a="flex items-center h-10 px-2 border-b border-border bg-card gap-1";let d;s[1]!==e?(d=()=>e(Ve([])),s[1]=e,s[2]=d):d=s[2];let u,m;s[3]===Symbol.for("react.memo_cache_sentinel")?(u=o.jsx(mt,{className:"h-4 w-4"}),m=o.jsx("span",{className:"sr-only",children:"Close"}),s[3]=u,s[4]=m):(u=s[3],m=s[4]);let p;s[5]!==d?(p=o.jsxs(Te,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:d,"data-testid":"close-button-id",children:[u,m]}),s[5]=d,s[6]=p):p=s[6];const x="flex items-center gap-1 border-l border-border pl-2 ml-1",v=i.map($=>o.jsx("button",{className:H("px-3 py-1.5 text-sm font-medium rounded-md transition-colors","hover:bg-accent hover:text-accent-foreground",r===$?"bg-accent text-accent-foreground":"text-muted-foreground"),onClick:k=>{k.preventDefault(),e(Jt($))},children:Rr[$].displayName},$));let y;s[7]!==v?(y=o.jsx("div",{className:x,children:v}),s[7]=v,s[8]=y):y=s[8];let w;s[9]!==p||s[10]!==y?(w=o.jsxs("nav",{className:a,children:[p,y]}),s[9]=p,s[10]=y,s[11]=w):w=s[11];let N;s[12]!==n||s[13]!==t?(N=o.jsx("div",{className:"flex-1 overflow-auto p-2",children:o.jsx(n,{flow:t})}),s[12]=n,s[13]=t,s[14]=N):N=s[14];let S;return s[15]!==N||s[16]!==w?(S=o.jsxs("div",{className:l,children:[w,N]}),s[15]=N,s[16]=w,s[17]=S):S=s[17],S}function Qf(s){return s.ui.flow.tab}function Zf(s){return s.flows.selected[0]}function em(s){if(s.ctrlKey||s.metaKey)return()=>{};const e=s.key;return s.preventDefault(),(t,r)=>{const{flows:i}=r(),n=i.selected,l=n[0];switch(e){case"k":case"ArrowUp":t(bt(i,-1));break;case"j":case"ArrowDown":t(bt(i,1));break;case" ":case"PageDown":t(bt(i,10));break;case"PageUp":t(bt(i,-10));break;case"End":t(bt(i,1e10));break;case"Home":t(bt(i,-1e10));break;case"Escape":r().ui.modal.activeModal?t(eo()):t(Ve([]));break;case"ArrowLeft":{if(!l)break;const a=Ts(l),d=r().ui.flow.tab,u=a[(Math.max(0,a.indexOf(d))-1+a.length)%a.length];t(Jt(u));break}case"Tab":case"ArrowRight":{if(!l)break;const a=Ts(l),d=r().ui.flow.tab,u=a[(Math.max(0,a.indexOf(d))+1)%a.length];t(Jt(u));break}case"Delete":case"d":{t(zi(n));break}case"n":{Qt("view.flows.create","get","https://example.com/");break}case"D":{t(Bi(n));break}case"a":{t(Ps(n));break}case"A":{t(Vi());break}case"r":{t(Ms(n));break}case"v":{t(Wi(n));break}case"x":{t(Ui(n));break}case"X":{t(Ld());break}case"z":{t(Ki());break}default:return}}}class tm extends R.Component{static defaultProps={axis:"x"};node=Ae.createRef();constructor(e,t){super(e,t),this.state={applied:!1,startPos:0,dragPointer:.1},this.onLostPointerCapture=this.onLostPointerCapture.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this)}onPointerDown(e){this.state.dragPointer===.1&&(e.target.setPointerCapture(e.pointerId),this.setState({startPos:this.props.axis==="x"?e.pageX:e.pageY,dragPointer:e.pointerId}))}onLostPointerCapture(e){if(this.state.dragPointer!==e.pointerId)return;const t=this.node.current,r=t.previousElementSibling,i=t.nextElementSibling;t.style.transform="",r.style.flex=`0 0 ${Math.max(0,(this.props.axis==="x"?r.offsetWidth+e.pageX:r.offsetHeight+e.pageY)-this.state.startPos)}px`,i.style.flex="1 1 auto",this.setState({applied:!0,dragPointer:.1}),this.onResize()}onPointerMove(e){this.state.dragPointer===e.pointerId&&(this.node.current.style.transform=this.props.axis==="x"?`translateX(${e.pageX-this.state.startPos}px)`:`translateY(${e.pageY-this.state.startPos}px)`)}onResize(){window.setTimeout(()=>window.dispatchEvent(new CustomEvent("resize")),1)}reset(e){this.state.applied&&(this.node.current?.previousElementSibling instanceof HTMLElement&&(this.node.current.previousElementSibling.style.flex=""),this.node.current?.nextElementSibling instanceof HTMLElement&&(this.node.current.nextElementSibling.style.flex=""),e||this.setState({applied:!1}),this.onResize())}componentWillUnmount(){this.reset(!0)}render(){const e=this.props.axis==="x";return o.jsx("div",{ref:this.node,className:H("flex-shrink-0 relative z-10",e?"w-1 h-full":"w-full h-1"),children:o.jsx("div",{className:H("absolute bg-border hover:bg-primary/50 transition-colors",e?"w-1 h-full cursor-col-resize left-0":"w-full h-1 cursor-row-resize top-0"),onLostPointerCapture:this.onLostPointerCapture,onPointerDown:this.onPointerDown,onPointerMove:this.onPointerMove})})}}const Ks=s=>{const e=s.current;return e===null||e.scrollTop===0?!1:Math.ceil(e.scrollTop)+e.clientHeight>=e.scrollHeight},dl=s=>{s.current&&!Ks(s)&&(s.current.scrollTop=s.current.scrollHeight)};function Lt(s=void 0){if(!s)return{start:0,end:0,paddingTop:0,paddingBottom:0};const{itemCount:e,rowHeight:t,viewportTop:r,viewportHeight:i,itemHeights:n}=s,l=r+i;let a=0,d=0,u=0,m=0;if(n){let p=0;for(let x=0;x<e;x++){const v=n[x]||t;p<=r&&x%2===0&&(u=p,a=x),p<=l?d=x+1:m+=v,p+=v}if(r>0&&p<r+i)return Lt({itemCount:e,rowHeight:t,viewportTop:p-i,viewportHeight:i,itemHeights:n})}else{const p=Math.min(r,Math.max(0,e*t-i));a=Math.max(0,Math.floor(p/t)-1)&-2,d=Math.min(e,a+Math.ceil(i/t)+2),u=a*t,m=(e-d)*t}return{start:a,end:d,paddingTop:u,paddingBottom:m}}function sm(s){const e=j.c(13),{iconType:t}=s;switch(t){case"css":{let r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(Dc,{className:he("h-4 w-4","text-purple-500")}),e[0]=r):r=e[0],r}case"document":{let r;return e[1]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(Ic,{className:he("h-4 w-4","text-blue-500")}),e[1]=r):r=e[1],r}case"js":{let r;return e[2]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(Rc,{className:he("h-4 w-4","text-yellow-500")}),e[2]=r):r=e[2],r}case"plain":{let r;return e[3]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(fr,{className:he("h-4 w-4","text-muted-foreground")}),e[3]=r):r=e[3],r}case"image":{let r;return e[4]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(Tc,{className:he("h-4 w-4","text-green-500")}),e[4]=r):r=e[4],r}case"not-modified":{let r;return e[5]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(Ec,{className:he("h-4 w-4","text-gray-400")}),e[5]=r):r=e[5],r}case"redirect":{let r;return e[6]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(kc,{className:he("h-4 w-4","text-orange-500")}),e[6]=r):r=e[6],r}case"websocket":{let r;return e[7]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(Cc,{className:he("h-4 w-4","text-cyan-500")}),e[7]=r):r=e[7],r}case"tcp":{let r;return e[8]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx($c,{className:he("h-4 w-4","text-blue-400")}),e[8]=r):r=e[8],r}case"udp":{let r;return e[9]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(Zr,{className:he("h-4 w-4","text-indigo-400")}),e[9]=r):r=e[9],r}case"dns":{let r;return e[10]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(Qr,{className:he("h-4 w-4","text-teal-500")}),e[10]=r):r=e[10],r}case"quic":{let r;return e[11]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(Sc,{className:he("h-4 w-4","text-amber-500")}),e[11]=r):r=e[11],r}default:{let r;return e[12]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(fr,{className:he("h-4 w-4","text-muted-foreground")}),e[12]=r):r=e[12],r}}}const Gs=({flow:s})=>o.jsx("td",{className:"w-4 text-center",children:s.client_conn.tls_established&&o.jsx(Nc,{className:"h-3 w-3 text-green-500 inline-block"})});Gs.headerName="";const Xs=({flow:s})=>{const e=P(t=>t.flows._listIndex.get(s.id));return o.jsx("td",{className:"w-12 text-right text-muted-foreground pr-2",children:e+1})};Xs.headerName="#";const Ys=({flow:s})=>o.jsx("td",{className:"w-6 text-center",children:o.jsx(sm,{iconType:Di(s)})});Ys.headerName="";const Js=({flow:s})=>{let e;return s.error&&(s.error.msg==="Connection killed."?e=o.jsx(mt,{className:"h-3 w-3 inline-block ml-1 text-destructive"}):e=o.jsx(Is,{className:"h-3 w-3 inline-block ml-1 text-warning"})),o.jsx("td",{className:"max-w-xs truncate",children:o.jsxs("span",{className:"flex items-center gap-1",children:[s.marked&&o.jsx("span",{className:"text-xs",children:s.marked}),s.is_replay==="request"&&o.jsx(ts,{className:"h-3 w-3 text-blue-500"}),s.intercepted&&o.jsx(Jr,{className:"h-3 w-3 text-orange-500"}),e,o.jsx("span",{className:"truncate",children:Ai(s)})]})})};Js.headerName="Path";const Qs=({flow:s})=>o.jsx("td",{className:"w-16 font-medium",children:Li(s)});Qs.headerName="Method";const Zs=({flow:s})=>o.jsx("td",{className:"w-16 text-muted-foreground",children:Oi(s)});Zs.headerName="Version";const en=({flow:s})=>{let e="text-destructive";return s.type!=="http"&&s.type!="dns"||!s.response?o.jsx("td",{className:"w-12"}):(100<=s.response.status_code&&s.response.status_code<200?e="text-green-500":200<=s.response.status_code&&s.response.status_code<300?e="text-green-600":300<=s.response.status_code&&s.response.status_code<400?e="text-blue-400":(400<=s.response.status_code&&s.response.status_code<500||500<=s.response.status_code&&s.response.status_code<600)&&(e="text-red-500"),o.jsx("td",{className:he("w-12 font-medium",e),children:Fi(s)}))};en.headerName="Status";const tn=({flow:s})=>o.jsx("td",{className:"w-16 text-right text-muted-foreground",children:ji(Ri(s))});tn.headerName="Size";const sn=({flow:s})=>{const e=Zt(s),t=Ti(s);return o.jsx("td",{className:"w-16 text-right text-muted-foreground",children:e&&t?Ni(1e3*(t-e)):"..."})};sn.headerName="Time";const nn=({flow:s})=>{const e=Zt(s);return o.jsx("td",{className:"w-24 text-muted-foreground text-xs",children:e?ut(e):"..."})};nn.headerName="Start time";const ls=({flow:s})=>{const e=Y();let t=null;return s.intercepted?t=o.jsx("a",{href:"#",className:"hover:opacity-80",onClick:r=>{r.preventDefault(),e(Ps([s]))},children:o.jsx(ei,{className:"h-4 w-4 text-green-500"})}):Fs(s)&&(t=o.jsx("a",{href:"#",className:"hover:opacity-80",onClick:r=>{r.preventDefault(),e(Ms([s]))},children:o.jsx(ts,{className:"h-4 w-4 text-blue-500"})})),o.jsx("td",{className:"w-8 text-center","data-column":"quickactions",children:t?o.jsx("div",{children:t}):o.jsx(o.Fragment,{})})};ls.headerName="";const rn=({flow:s})=>{const e=s.comment;return o.jsx("td",{className:"max-w-xs truncate text-muted-foreground",children:e})};rn.headerName="Comment";const ul={icon:Ys,index:Xs,method:Qs,version:Zs,path:Js,quickactions:ls,size:tn,status:en,time:sn,timestamp:nn,tls:Gs,comment:rn},nm=Object.freeze(Object.defineProperty({__proto__:null,comment:rn,default:ul,icon:Ys,index:Xs,method:Qs,path:Js,quickactions:ls,size:tn,status:en,time:sn,timestamp:nn,tls:Gs,version:Zs},Symbol.toStringTag,{value:"Module"})),rm=R.memo(function(){const e=j.c(16),t=Y(),r=P(im),i=P(om),l=P(lm).filter(Td).concat("quickactions");let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={},e[0]=a):a=e[0];const[d,u]=R.useState(a),[m,p]=R.useState(null);let x;e[1]===Symbol.for("react.memo_cache_sentinel")?(x=(O,V)=>{O.stopPropagation();const z=O.currentTarget.parentElement;p({column:V,startX:O.clientX,startWidth:z.offsetWidth})},e[1]=x):x=e[1];const v=x;let y;e[2]!==m?(y=O=>{if(m){const V=O.clientX-m.startX,z=Math.max(50,m.startWidth+V);u(K=>({...K,[m.column]:z}))}},e[2]=m,e[3]=y):y=e[3];const w=y;let N;e[4]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{p(null)},e[4]=N):N=e[4];const S=N;let $,k;e[5]!==w||e[6]!==m?($=()=>{if(m)return document.addEventListener("mousemove",w),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",S)}},k=[m,w,S],e[5]=w,e[6]=m,e[7]=$,e[8]=k):($=e[7],k=e[8]),R.useEffect($,k);const T="border-b border-border";let D;e[9]!==d||e[10]!==t||e[11]!==i||e[12]!==r?(D=O=>o.jsxs("th",{className:H("h-10 px-2 text-left align-middle font-medium text-muted-foreground relative","cursor-pointer select-none hover:bg-muted/50 transition-colors",i===O&&"text-foreground"),style:d[O]?{width:d[O]}:void 0,onClick:()=>t(Qi({column:O===i&&r?void 0:O,desc:O!==i?!1:!r})),children:[o.jsxs("div",{className:"flex items-center gap-1",children:[ul[O].headerName,i===O&&(r?o.jsx(ft,{className:"h-3 w-3"}):o.jsx(ti,{className:"h-3 w-3"}))]}),O!=="quickactions"&&o.jsx("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary/50 flex items-center justify-center group",onMouseDown:V=>v(V,O),children:o.jsx(Ac,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 text-primary"})})]},O),e[9]=d,e[10]=t,e[11]=i,e[12]=r,e[13]=D):D=e[13];const L=l.map(D);let q;return e[14]!==L?(q=o.jsx("tr",{className:T,children:L}),e[14]=L,e[15]=q):q=e[15],q});function im(s){return s.flows.sort.desc}function om(s){return s.flows.sort.column}function lm(s){return s.options.web_columns}const am=Ae.memo(function({flow:e,selected:t,highlighted:r}){const i=Y(),n=P(d=>d.options.web_columns),l=R.useCallback(d=>{let u=d.target;for(;u.parentNode;){if(u.getAttribute("data-column")==="quickactions")return;u=u.parentNode}d.metaKey||d.ctrlKey?i(Hd(e)):d.shiftKey?(window.getSelection()?.empty(),i(Vd(e))):i(Ve([e]))},[e]),a=n.map(d=>nm[d]).filter(d=>d).concat(ls);return o.jsx("tr",{className:H("h-8 border-b border-border cursor-pointer transition-colors","hover:bg-muted/50",t&&"bg-flow-selected hover:bg-flow-selected/90",r&&!t&&"bg-flow-highlighted",e.intercepted&&"border-l-2 border-l-flow-intercept"),onClick:l,children:a.map(d=>o.jsx(d,{flow:e},d.name))})});class cm extends R.Component{static defaultProps={rowHeight:32};viewport=R.createRef();head=R.createRef();constructor(e,t){super(e,t),this.state={vScroll:Lt(),viewportTop:0},this.onViewportUpdate=this.onViewportUpdate.bind(this)}componentDidMount(){window.addEventListener("resize",this.onViewportUpdate),this.onViewportUpdate()}componentWillUnmount(){window.removeEventListener("resize",this.onViewportUpdate)}getSnapshotBeforeUpdate(){return Ks(this.viewport)}componentDidUpdate(e,t,r){r&&dl(this.viewport),(e.flowView!==this.props.flowView||e.rowHeight!==this.props.rowHeight||e.selectedIds!==this.props.selectedIds||e.highlightedIds!==this.props.highlightedIds||e.onlySelectedId!==this.props.onlySelectedId)&&this.onViewportUpdate();const{onlySelectedId:n}=this.props;if(n&&n!==e.onlySelectedId){const{rowHeight:a,firstSelectedIndex:d}=this.props,u=this.viewport.current,m=this.head.current,p=m?m.offsetHeight:0,x=d*a+p,v=x+a,y=u.scrollTop,w=u.offsetHeight;x-p<y?u.scrollTop=x-p:v>y+w&&(u.scrollTop=v-w),this.onViewportUpdate()}}onViewportUpdate(){const e=this.viewport.current,t=e.scrollTop||0,r=Lt({viewportTop:t,viewportHeight:e.offsetHeight||0,itemCount:this.props.flowView.length,rowHeight:this.props.rowHeight});if(this.state.viewportTop!==t||!es(this.state.vScroll,r)){const i=Math.min(t,r.end*this.props.rowHeight);this.setState({vScroll:r,viewportTop:i})}}render(){const{vScroll:e,viewportTop:t}=this.state,{flowView:r,selectedIds:i,highlightedIds:n}=this.props;return o.jsx("div",{className:H("flex-1 overflow-auto relative","bg-background"),onScroll:this.onViewportUpdate,ref:this.viewport,children:o.jsxs("table",{className:"w-full text-sm border-collapse",children:[o.jsx("thead",{ref:this.head,className:"sticky top-0 z-10 bg-table-header",children:o.jsx(rm,{})}),o.jsxs("tbody",{children:[o.jsx("tr",{style:{height:e.paddingTop}}),r.slice(e.start,e.end).map(l=>o.jsx(am,{flow:l,selected:i.has(l.id),highlighted:n.has(l.id)},l.id)),o.jsx("tr",{style:{height:e.paddingBottom}})]})]})})}}const dm=ss(s=>({flowView:s.flows.view,highlightedIds:s.flows.highlightedIds,selectedIds:s.flows.selectedIds,onlySelectedId:s.flows.selected.length===1&&s.flows.selected[0].id,firstSelectedIndex:s.flows._viewIndex.get(s.flows.selected[0]?.id)}))(cm);function um(){const s=j.c(2);let e;s[0]===Symbol.for("react.memo_cache_sentinel")?(e=o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"mitmproxy is running."}),s[0]=e):e=s[0];let t;return s[1]===Symbol.for("react.memo_cache_sentinel")?(t=o.jsxs("div",{className:"p-6",children:[e,o.jsxs("p",{className:"text-muted-foreground",children:["No flows have been recorded yet.",o.jsx("br",{}),"To start capturing traffic, please configure your settings in the Capture tab."]})]}),s[1]=t):t=s[1],t}function fm(s){const e=j.c(20);let{description:t,listen_addrs:r,is_running:i,wireguard_conf:n,type:l}=s;const a=R.useRef(null);let d,u;e[0]!==n?(d=()=>{n&&a.current&&Fc.toCanvas(a.current,n,{margin:0,scale:3})},u=[n],e[0]=n,e[1]=d,e[2]=u):(d=e[1],u=e[2]),R.useEffect(d,u);let m;const p=r.length===1||r.length===2&&r[0][1]===r[1][1],x=r.every(mm);if(p&&x){let w;e[3]!==r[0][1]?(w=pr(["*",r[0][1]]),e[3]=r[0][1],e[4]=w):w=e[4],m=w}else{let w;e[5]!==r?(w=r.map(pr).join(" and "),e[5]=r,e[6]=w):w=e[6],m=w}t=t[0].toUpperCase()+t.substr(1);let v;if(i){let w;e[9]!==t||e[10]!==m||e[11]!==l?(w=l==="local"?o.jsxs("div",{className:"text-success",children:[t," is active."]}):o.jsxs("div",{className:"text-success",children:[t," listening at ",m,"."]}),e[9]=t,e[10]=m,e[11]=l,e[12]=w):w=e[12];let N;e[13]!==n?(N=n&&o.jsxs("div",{className:"mt-2 space-y-2",children:[o.jsx("pre",{className:"p-2 bg-muted rounded text-xs overflow-auto",children:n}),o.jsx("canvas",{ref:a,className:"rounded"})]}),e[13]=n,e[14]=N):N=e[14];let S;e[15]!==w||e[16]!==N?(S=o.jsxs(o.Fragment,{children:[w,N]}),e[15]=w,e[16]=N,e[17]=S):S=e[17],v=S}else{let w;e[7]!==t?(w=o.jsx(o.Fragment,{children:o.jsxs("div",{className:"text-warning",children:[t," starting..."]})}),e[7]=t,e[8]=w):w=e[8],v=w}let y;return e[18]!==v?(y=o.jsx("div",{children:v}),e[18]=v,e[19]=y):y=e[19],y}function mm(s){return["::","0.0.0.0"].includes(s[0])}function nt(s){const e=j.c(5),{error:t,backendState:r}=s;let i;e[0]!==r||e[1]!==t?(i=t?o.jsx("div",{className:"text-destructive",children:t}):r&&o.jsx(fm,{...r}),e[0]=r,e[1]=t,e[2]=i):i=e[2];let n;return e[3]!==i?(n=o.jsx("div",{className:"mt-1 text-xs",children:i}),e[3]=i,e[4]=n):n=e[4],n}const on=R.forwardRef((s,e)=>{const t=j.c(10);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),t[3]=r,t[4]=n):n=t[4];let l;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx(Lc,{className:H("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")}),t[5]=l):l=t[5];let a;return t[6]!==i||t[7]!==e||t[8]!==n?(a=o.jsx(si,{className:n,...i,ref:e,children:l}),t[6]=i,t[7]=e,t[8]=n,t[9]=a):a=t[9],a});on.displayName=si.displayName;const pm=Rs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xe=R.forwardRef((s,e)=>{const t=j.c(9);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H(pm(),r),t[3]=r,t[4]=n):n=t[4];let l;return t[5]!==i||t[6]!==e||t[7]!==n?(l=o.jsx(ni,{ref:e,className:n,...i}),t[5]=i,t[6]=e,t[7]=n,t[8]=l):l=t[8],l});xe.displayName=ni.displayName;function rt(s){const e=j.c(13),{value:t,onChange:r,children:i,label:n}=s,l=R.useId(),a=`mode-switch-${l}`;let d;e[0]!==r?(d=()=>r({}),e[0]=r,e[1]=d):d=e[1];let u;e[2]!==a||e[3]!==d||e[4]!==t?(u=o.jsx(on,{id:a,checked:t,onCheckedChange:d}),e[2]=a,e[3]=d,e[4]=t,e[5]=u):u=e[5];const m=`mode-switch-${l}`;let p;e[6]!==n||e[7]!==m?(p=o.jsx(xe,{htmlFor:m,className:"text-sm font-normal cursor-pointer",children:n}),e[6]=n,e[7]=m,e[8]=p):p=e[8];let x;return e[9]!==i||e[10]!==u||e[11]!==p?(x=o.jsxs("div",{className:"flex items-center gap-3 py-2",children:[u,p,i]}),e[9]=i,e[10]=u,e[11]=p,e[12]=x):x=e[12],x}const fl=Pc,ml=Mc,ln=R.forwardRef((s,e)=>{const t=j.c(13);let r,i,n,l;t[0]!==s?({className:r,align:n,sideOffset:l,...i}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n,t[4]=l):(r=t[1],i=t[2],n=t[3],l=t[4]);const a=n===void 0?"center":n,d=l===void 0?4:l;let u;t[5]!==r?(u=H("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),t[5]=r,t[6]=u):u=t[6];let m;return t[7]!==a||t[8]!==i||t[9]!==e||t[10]!==d||t[11]!==u?(m=o.jsx(Oc,{children:o.jsx(ri,{ref:e,align:a,sideOffset:d,className:u,...i})}),t[7]=a,t[8]=i,t[9]=e,t[10]=d,t[11]=u,t[12]=m):m=t[12],m});ln.displayName=ri.displayName;const as=R.forwardRef((s,e)=>{const t=j.c(11);let r,i,n;t[0]!==s?({className:r,type:n,...i}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n):(r=t[1],i=t[2],n=t[3]);let l;t[4]!==r?(l=H("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),t[4]=r,t[5]=l):l=t[5];let a;return t[6]!==i||t[7]!==e||t[8]!==l||t[9]!==n?(a=o.jsx("input",{type:n,className:l,ref:e,...i}),t[6]=i,t[7]=e,t[8]=l,t[9]=n,t[10]=a):a=t[10],a});as.displayName="Input";const an=R.forwardRef((s,e)=>{const t=j.c(15);let r,i,n;t[0]!==s?({className:i,children:r,...n}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n):(r=t[1],i=t[2],n=t[3]);let l;t[4]!==i?(l=H("relative overflow-hidden",i),t[4]=i,t[5]=l):l=t[5];let a;t[6]!==r?(a=o.jsx(Hc,{className:"h-full w-full rounded-[inherit]",children:r}),t[6]=r,t[7]=a):a=t[7];let d,u;t[8]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx(pl,{}),u=o.jsx(Vc,{}),t[8]=d,t[9]=u):(d=t[8],u=t[9]);let m;return t[10]!==n||t[11]!==e||t[12]!==l||t[13]!==a?(m=o.jsxs(ii,{ref:e,className:l,...n,children:[a,d,u]}),t[10]=n,t[11]=e,t[12]=l,t[13]=a,t[14]=m):m=t[14],m});an.displayName=ii.displayName;const pl=R.forwardRef((s,e)=>{const t=j.c(14);let r,i,n;t[0]!==s?({className:r,orientation:n,...i}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n):(r=t[1],i=t[2],n=t[3]);const l=n===void 0?"vertical":n,a=l==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",d=l==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]";let u;t[4]!==r||t[5]!==a||t[6]!==d?(u=H("flex touch-none select-none transition-colors",a,d,r),t[4]=r,t[5]=a,t[6]=d,t[7]=u):u=t[7];let m;t[8]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsx(qc,{className:"relative flex-1 rounded-full bg-border"}),t[8]=m):m=t[8];let p;return t[9]!==l||t[10]!==i||t[11]!==e||t[12]!==u?(p=o.jsx(oi,{ref:e,orientation:l,className:u,...i,children:m}),t[9]=l,t[10]=i,t[11]=e,t[12]=u,t[13]=p):p=t[13],p});pl.displayName=oi.displayName;const hl=R.forwardRef((s,e)=>{const t=j.c(14);let r,i,n,l;t[0]!==s?({className:r,orientation:n,decorative:l,...i}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n,t[4]=l):(r=t[1],i=t[2],n=t[3],l=t[4]);const a=n===void 0?"horizontal":n,d=l===void 0?!0:l,u=a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]";let m;t[5]!==r||t[6]!==u?(m=H("shrink-0 bg-border",u,r),t[5]=r,t[6]=u,t[7]=m):m=t[7];let p;return t[8]!==d||t[9]!==a||t[10]!==i||t[11]!==e||t[12]!==m?(p=o.jsx(li,{ref:e,decorative:d,orientation:a,className:m,...i}),t[8]=d,t[9]=a,t[10]=i,t[11]=e,t[12]=m,t[13]=p):p=t[13],p});hl.displayName=li.displayName;function hm(s){const e=j.c(50),{server:t}=s,{currentProcesses:r,isLoading:i}=P(vm),{selectedProcesses:n}=P(gm);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];const[a,d]=R.useState(l),[u,m]=R.useState(""),[p,x]=R.useState(!1),v=Y(),{platform:y}=P(xm);let w;e[1]===Symbol.for("react.memo_cache_sentinel")?(w=F=>{m(F.target.value)},e[1]=w):w=e[1];const N=w;let S;e[2]!==y?(S=F=>{const oe=y.startsWith("win32")?"\\":"/";return Ss(F.executable,oe)[1]},e[2]=y,e[3]=S):S=e[3];const $=S;let k;e[4]!==v||e[5]!==$||e[6]!==n||e[7]!==t?(k=F=>{const oe=typeof F=="string"?F:$(F),Re=n?`${n}, ${oe}`:oe;v(It({server:t,value:Re}))},e[4]=v,e[5]=$,e[6]=n,e[7]=t,e[8]=k):k=e[8];const T=k;let D;e[9]!==v||e[10]!==$||e[11]!==n||e[12]!==t?(D=F=>{const oe=n?.split(/,\s*/).filter(Re=>Re!==$(F)).join(", ");v(It({server:t,value:oe}))},e[9]=v,e[10]=$,e[11]=n,e[12]=t,e[13]=D):D=e[13];const L=D,q=F=>{O(F)&&n?L(F):T(F)},O=F=>{const oe=$(F);return n?.includes(oe)};let V;e[14]!==r||e[15]!==v?(V=()=>{r.length===0&&v(Dt())},e[14]=r,e[15]=v,e[16]=V):V=e[16];let z;e[17]===Symbol.for("react.memo_cache_sentinel")?(z=[],e[17]=z):z=e[17],R.useEffect(V,z);let K;e[18]!==r||e[19]!==u||e[20]!==$||e[21]!==a?(K=()=>{if(u){const F=r.filter(oe=>$(oe).toLowerCase().includes(u.toLowerCase()));d(F)}else a!==r&&d(r)},e[18]=r,e[19]=u,e[20]=$,e[21]=a,e[22]=K):K=e[22];let B;e[23]!==r||e[24]!==u?(B=[u,r],e[23]=r,e[24]=u,e[25]=B):B=e[25],R.useEffect(K,B);let W;e[26]!==T||e[27]!==u?(W=F=>{F.stopPropagation(),F.key==="Enter"&&(T(u),m(""))},e[26]=T,e[27]=u,e[28]=W):W=e[28];const te=W,X=fl,Q=n&&n.length>0?"Add more...":"All applications";let J;e[29]!==Q?(J=o.jsx("span",{className:"text-xs truncate",children:Q}),e[29]=Q,e[30]=J):J=e[30];let ie;e[31]===Symbol.for("react.memo_cache_sentinel")?(ie=o.jsx(ft,{className:"h-3 w-3 opacity-50"}),e[31]=ie):ie=e[31];let ee;e[32]!==J?(ee=o.jsx(ml,{asChild:!0,children:o.jsxs(Te,{variant:"outline",size:"sm",className:"h-8 gap-1 justify-between min-w-[150px]",children:[J,ie]})}),e[32]=J,e[33]=ee):ee=e[33];const fe=ln,be="w-72 p-0",Be="start";let ye;e[34]!==u||e[35]!==te?(ye=o.jsx("div",{className:"p-2 border-b border-border",children:o.jsx(as,{type:"text",placeholder:"Search applications...",value:u,onChange:N,onKeyDown:te,className:"h-8"})}),e[34]=u,e[35]=te,e[36]=ye):ye=e[36];const Je="p-2";let we;e[37]===Symbol.for("react.memo_cache_sentinel")?(we=o.jsx("h4",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Running Applications"}),e[37]=we):we=e[37];const E=i?o.jsx("div",{className:"flex items-center justify-center py-4",children:o.jsx(Ds,{className:"h-4 w-4 animate-spin"})}):a.length>0?o.jsx(an,{className:"h-[200px]",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("button",{className:H("w-full flex items-center justify-between px-2 py-1.5 rounded text-sm","hover:bg-accent cursor-pointer",n===""&&"bg-accent"),onClick:()=>{v(It({server:t,value:""}))},children:[o.jsx("span",{children:"All applications"}),n===""&&o.jsx(At,{className:"h-4 w-4"})]}),o.jsx(hl,{className:"my-1"}),a.map((F,oe)=>o.jsxs("button",{className:H("w-full flex items-center justify-between px-2 py-1.5 rounded text-sm","hover:bg-accent cursor-pointer",O(F)&&"bg-accent"),onClick:()=>q(F),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("img",{className:"h-4 w-4",src:`./executable-icon?path=${F.executable}`,loading:"lazy"}),o.jsx("span",{className:"truncate",children:$(F)})]}),O(F)&&o.jsx(At,{className:"h-4 w-4 flex-shrink-0"})]},oe))]})}):o.jsxs("p",{className:"text-xs text-muted-foreground py-2",children:["Press ",o.jsx("strong",{children:"Enter"})," to capture traffic for programs matching: ",o.jsx("strong",{children:u})]});let me;e[38]!==we||e[39]!==E?(me=o.jsxs("div",{className:Je,children:[we,E]}),e[38]=we,e[39]=E,e[40]=me):me=e[40];let ae;e[41]!==fe||e[42]!==ye||e[43]!==me?(ae=o.jsxs(fe,{className:be,align:Be,children:[ye,me]}),e[41]=fe,e[42]=ye,e[43]=me,e[44]=ae):ae=e[44];let _e;return e[45]!==X||e[46]!==p||e[47]!==ee||e[48]!==ae?(_e=o.jsxs(X,{open:p,onOpenChange:x,children:[ee,ae]}),e[45]=X,e[46]=p,e[47]=ee,e[48]=ae,e[49]=_e):_e=e[49],_e}function xm(s){return s.backendState}function gm(s){return s.modes.local[0]}function vm(s){return s.processes}const bm=Rs("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-success text-success-foreground shadow hover:bg-success/80",warning:"border-transparent bg-warning text-warning-foreground shadow hover:bg-warning/80",info:"border-transparent bg-info text-info-foreground shadow hover:bg-info/80"}},defaultVariants:{variant:"default"}});function de(s){const e=j.c(10);let t,r,i;e[0]!==s?({className:t,variant:i,...r}=s,e[0]=s,e[1]=t,e[2]=r,e[3]=i):(t=e[1],r=e[2],i=e[3]);let n;e[4]!==t||e[5]!==i?(n=H(bm({variant:i}),t),e[4]=t,e[5]=i,e[6]=n):n=e[6];let l;return e[7]!==r||e[8]!==n?(l=o.jsx("div",{className:n,...r}),e[7]=r,e[8]=n,e[9]=l):l=e[9],l}function ym(){const s=j.c(9),e=P(_m),t=P(wm);let r;if(s[0]!==t||s[1]!==e){let d;s[3]!==t?(d=u=>o.jsx(jm,{server:u,backendState:t[co(u)]},u.ui_id),s[3]=t,s[4]=d):d=s[4],r=e.map(d),s[0]=t,s[1]=e,s[2]=r}else r=s[2];const i=r;let n,l;s[5]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("h4",{className:"text-sm font-semibold",children:"Local Applications"}),l=o.jsx("p",{className:"text-xs text-muted-foreground",children:"Transparently Intercept local application(s)."}),s[5]=n,s[6]=l):(n=s[5],l=s[6]);let a;return s[7]!==i?(a=o.jsxs("div",{className:"space-y-2",children:[n,l,i]}),s[7]=i,s[8]=a):a=s[8],a}function wm(s){return s.backendState.servers}function _m(s){return s.modes.local}function jm(s){const e=j.c(34),{server:t,backendState:r}=s,i=Y(),n=P(Sm),l=t.error||r?.last_exception||n||void 0;let a;e[0]!==i||e[1]!==t?(a=D=>{const L=t.selectedProcesses?.split(/,\s*/).filter(q=>q!==D).join(", ");i(It({server:t,value:L}))},e[0]=i,e[1]=t,e[2]=a):a=e[2];const d=a;let u;e[3]!==i||e[4]!==t?(u=()=>i(bo({server:t,value:!t.active})),e[3]=i,e[4]=t,e[5]=u):u=e[5];let m;e[6]!==d||e[7]!==t.selectedProcesses?(m=t.selectedProcesses?.split(/,\s*/).filter(Nm).map(D=>o.jsxs(de,{variant:"secondary",className:"gap-1 pr-1",children:[D,o.jsx("button",{className:"ml-1 hover:text-destructive",onClick:()=>d(D),children:o.jsx(mt,{className:"h-3 w-3"})})]},D)),e[6]=d,e[7]=t.selectedProcesses,e[8]=m):m=e[8];let p;e[9]!==m?(p=o.jsx("div",{className:"flex flex-wrap gap-1",children:m}),e[9]=m,e[10]=p):p=e[10];let x;e[11]!==t?(x=o.jsx(hm,{server:t}),e[11]=t,e[12]=x):x=e[12];let v;e[13]!==i?(v=()=>i(Dt()),e[13]=i,e[14]=v):v=e[14];let y;e[15]===Symbol.for("react.memo_cache_sentinel")?(y=o.jsx(ts,{className:"h-4 w-4"}),e[15]=y):y=e[15];let w;e[16]!==v?(w=o.jsx(Te,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:v,children:y}),e[16]=v,e[17]=w):w=e[17];let N;e[18]!==x||e[19]!==w?(N=o.jsxs("div",{className:"flex items-center gap-2",children:[x,w]}),e[18]=x,e[19]=w,e[20]=N):N=e[20];let S;e[21]!==p||e[22]!==N?(S=o.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[p,N]}),e[21]=p,e[22]=N,e[23]=S):S=e[23];let $;e[24]!==t.active||e[25]!==S||e[26]!==u?($=o.jsx(rt,{value:t.active,label:"Intercept traffic for",onChange:u,children:S}),e[24]=t.active,e[25]=S,e[26]=u,e[27]=$):$=e[27];let k;e[28]!==r||e[29]!==l?(k=o.jsx(nt,{error:l,backendState:r}),e[28]=r,e[29]=l,e[30]=k):k=e[30];let T;return e[31]!==$||e[32]!==k?(T=o.jsxs("div",{children:[$,k]}),e[31]=$,e[32]=k,e[33]=T):T=e[33],T}function Nm(s){return s.trim()!==""}function Sm(s){return s.processes.error}function ht(s){const e=j.c(14),{children:t,classname:r,isVisible:i}=s,[n,l]=R.useState(!1);let a,d;e[0]!==i?(a=()=>{i===!0&&l(!0)},d=[i],e[0]=i,e[1]=a,e[2]=d):(a=e[1],d=e[2]),R.useEffect(a,d);let u;e[3]!==r?(u=H("h-7 w-7",r),e[3]=r,e[4]=u):u=e[4];let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsx(ai,{className:"h-4 w-4"}),e[5]=m):m=e[5];let p;e[6]!==u?(p=o.jsx(ml,{asChild:!0,children:o.jsx(Te,{variant:"ghost",size:"icon",className:u,children:m})}),e[6]=u,e[7]=p):p=e[7];let x;e[8]!==t?(x=o.jsx(ln,{className:"w-64 p-4",align:"start",children:t}),e[8]=t,e[9]=x):x=e[9];let v;return e[10]!==n||e[11]!==p||e[12]!==x?(v=o.jsxs(fl,{open:n,onOpenChange:l,children:[p,x]}),e[10]=n,e[11]=p,e[12]=x,e[13]=v):v=e[13],v}function $m(){const s=j.c(9),e=P(km),t=P(Cm);let r;if(s[0]!==t||s[1]!==e){let d;s[3]!==t?(d=u=>o.jsx(Em,{server:u,backendState:t[ao(u)]},u.ui_id),s[3]=t,s[4]=d):d=s[4],r=e.map(d),s[0]=t,s[1]=e,s[2]=r}else r=s[2];const i=r;let n,l;s[5]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("h4",{className:"text-sm font-semibold",children:"Explicit HTTP(S) Proxy"}),l=o.jsx("p",{className:"text-xs text-muted-foreground",children:"You manually configure your client application or device to use an HTTP(S) proxy."}),s[5]=n,s[6]=l):(n=s[5],l=s[6]);let a;return s[7]!==i?(a=o.jsxs("div",{className:"space-y-2",children:[n,l,i]}),s[7]=i,s[8]=a):a=s[8],a}function Cm(s){return s.backendState.servers}function km(s){return s.modes.regular}function Em(s){const e=j.c(33),{server:t,backendState:r}=s,i=Y(),n=t.error||r?.last_exception||void 0;let l;e[0]!==i||e[1]!==t?(l=()=>i(xo({server:t,value:!t.active})),e[0]=i,e[1]=t,e[2]=l):l=e[2];let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx("h4",{className:"font-semibold mb-3",children:"Advanced Configuration"}),e[3]=a):a=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx(xe,{className:"text-xs",children:"Listen Host"}),e[4]=d):d=e[4];const u=t.listen_host||"";let m;e[5]!==i||e[6]!==t?(m=T=>i(go({server:t,value:T})),e[5]=i,e[6]=t,e[7]=m):m=e[7];let p;e[8]!==u||e[9]!==m?(p=o.jsxs("div",{children:[d,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:u,onEditDone:m})]}),e[8]=u,e[9]=m,e[10]=p):p=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsx(xe,{className:"text-xs",children:"Listen Port"}),e[11]=x):x=e[11];let v;e[12]!==t.listen_port?(v=t.listen_port?t.listen_port.toString():"",e[12]=t.listen_port,e[13]=v):v=e[13];let y;e[14]!==i||e[15]!==t?(y=T=>i(vo({server:t,value:parseInt(T)})),e[14]=i,e[15]=t,e[16]=y):y=e[16];let w;e[17]!==v||e[18]!==y?(w=o.jsxs("div",{children:[x,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:v,placeholder:"8080",onEditDone:y})]}),e[17]=v,e[18]=y,e[19]=w):w=e[19];let N;e[20]!==w||e[21]!==p?(N=o.jsxs(ht,{children:[a,o.jsxs("div",{className:"space-y-3",children:[p,w]})]}),e[20]=w,e[21]=p,e[22]=N):N=e[22];let S;e[23]!==t.active||e[24]!==l||e[25]!==N?(S=o.jsx(rt,{value:t.active,label:"Run HTTP/S Proxy",onChange:l,children:N}),e[23]=t.active,e[24]=l,e[25]=N,e[26]=S):S=e[26];let $;e[27]!==r||e[28]!==n?($=o.jsx(nt,{error:n,backendState:r}),e[27]=r,e[28]=n,e[29]=$):$=e[29];let k;return e[30]!==S||e[31]!==$?(k=o.jsxs("div",{children:[S,$]}),e[30]=S,e[31]=$,e[32]=k):k=e[32],k}function Tm(){const s=j.c(9),e=P(Im),t=P(Rm);let r;if(s[0]!==t||s[1]!==e){let d;s[3]!==t?(d=u=>o.jsx(Dm,{server:u,backendState:t[uo(u)]},u.ui_id),s[3]=t,s[4]=d):d=s[4],r=e.map(d),s[0]=t,s[1]=e,s[2]=r}else r=s[2];const i=r;let n,l;s[5]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("h4",{className:"text-sm font-semibold",children:"WireGuard Server"}),l=o.jsx("p",{className:"text-xs text-muted-foreground",children:"Start a WireGuard™ server and connect an external device for transparent proxying."}),s[5]=n,s[6]=l):(n=s[5],l=s[6]);let a;return s[7]!==i?(a=o.jsxs("div",{className:"space-y-2",children:[n,l,i]}),s[7]=i,s[8]=a):a=s[8],a}function Rm(s){return s.backendState.servers}function Im(s){return s.modes.wireguard}function Dm(s){const e=j.c(41),{server:t,backendState:r}=s,i=Y(),n=t.error||r?.last_exception||void 0;let l;e[0]!==i||e[1]!==t?(l=()=>i(yo({server:t,value:!t.active})),e[0]=i,e[1]=t,e[2]=l):l=e[2];let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx("h4",{className:"font-semibold mb-3",children:"Advanced Configuration"}),e[3]=a):a=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx(xe,{className:"text-xs",children:"Listen Host"}),e[4]=d):d=e[4];const u=t.listen_host||"";let m;e[5]!==i||e[6]!==t?(m=O=>i(wo({server:t,value:O})),e[5]=i,e[6]=t,e[7]=m):m=e[7];let p;e[8]!==u||e[9]!==m?(p=o.jsxs("div",{children:[d,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:u,placeholder:"(all interfaces)",onEditDone:m})]}),e[8]=u,e[9]=m,e[10]=p):p=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsx(xe,{className:"text-xs",children:"Listen Port"}),e[11]=x):x=e[11];let v;e[12]!==t.listen_port?(v=t.listen_port?t.listen_port.toString():"",e[12]=t.listen_port,e[13]=v):v=e[13];let y;e[14]!==i||e[15]!==t?(y=O=>i(_o({server:t,value:parseInt(O)})),e[14]=i,e[15]=t,e[16]=y):y=e[16];let w;e[17]!==v||e[18]!==y?(w=o.jsxs("div",{children:[x,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:v,placeholder:"51820",onEditDone:y})]}),e[17]=v,e[18]=y,e[19]=w):w=e[19];let N;e[20]===Symbol.for("react.memo_cache_sentinel")?(N=o.jsx(xe,{className:"text-xs",children:"Configuration File"}),e[20]=N):N=e[20];const S=t.file_path||"";let $;e[21]!==i||e[22]!==t?($=O=>i(jo({server:t,value:O})),e[21]=i,e[22]=t,e[23]=$):$=e[23];let k;e[24]!==S||e[25]!==$?(k=o.jsxs("div",{children:[N,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:S,placeholder:"~/.mitmproxy/wireguard.conf",onEditDone:$})]}),e[24]=S,e[25]=$,e[26]=k):k=e[26];let T;e[27]!==w||e[28]!==k||e[29]!==p?(T=o.jsxs(ht,{children:[a,o.jsxs("div",{className:"space-y-3",children:[p,w,k]})]}),e[27]=w,e[28]=k,e[29]=p,e[30]=T):T=e[30];let D;e[31]!==t.active||e[32]!==l||e[33]!==T?(D=o.jsx(rt,{value:t.active,label:"Run WireGuard Server",onChange:l,children:T}),e[31]=t.active,e[32]=l,e[33]=T,e[34]=D):D=e[34];let L;e[35]!==r||e[36]!==n?(L=o.jsx(nt,{error:n,backendState:r}),e[35]=r,e[36]=n,e[37]=L):L=e[37];let q;return e[38]!==D||e[39]!==L?(q=o.jsxs("div",{children:[D,L]}),e[38]=D,e[39]=L,e[40]=q):q=e[40],q}const xl=Gc,gl=Xc,cn=R.forwardRef((s,e)=>{const t=j.c(12);let r,i,n;t[0]!==s?({className:i,children:r,...n}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n):(r=t[1],i=t[2],n=t[3]);let l;t[4]!==i?(l=H("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",i),t[4]=i,t[5]=l):l=t[5];let a;t[6]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx(zc,{asChild:!0,children:o.jsx(ft,{className:"h-4 w-4 opacity-50"})}),t[6]=a):a=t[6];let d;return t[7]!==r||t[8]!==n||t[9]!==e||t[10]!==l?(d=o.jsxs(ci,{ref:e,className:l,...n,children:[r,a]}),t[7]=r,t[8]=n,t[9]=e,t[10]=l,t[11]=d):d=t[11],d});cn.displayName=ci.displayName;const vl=R.forwardRef((s,e)=>{const t=j.c(10);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H("flex cursor-default items-center justify-center py-1",r),t[3]=r,t[4]=n):n=t[4];let l;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx(ti,{className:"h-4 w-4"}),t[5]=l):l=t[5];let a;return t[6]!==i||t[7]!==e||t[8]!==n?(a=o.jsx(di,{ref:e,className:n,...i,children:l}),t[6]=i,t[7]=e,t[8]=n,t[9]=a):a=t[9],a});vl.displayName=di.displayName;const bl=R.forwardRef((s,e)=>{const t=j.c(10);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H("flex cursor-default items-center justify-center py-1",r),t[3]=r,t[4]=n):n=t[4];let l;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx(ft,{className:"h-4 w-4"}),t[5]=l):l=t[5];let a;return t[6]!==i||t[7]!==e||t[8]!==n?(a=o.jsx(ui,{ref:e,className:n,...i,children:l}),t[6]=i,t[7]=e,t[8]=n,t[9]=a):a=t[9],a});bl.displayName=ui.displayName;const dn=R.forwardRef((s,e)=>{const t=j.c(21);let r,i,n,l;t[0]!==s?({className:i,children:r,position:l,...n}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n,t[4]=l):(r=t[1],i=t[2],n=t[3],l=t[4]);const a=l===void 0?"popper":l,d=a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let u;t[5]!==i||t[6]!==d?(u=H("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",d,i),t[5]=i,t[6]=d,t[7]=u):u=t[7];let m;t[8]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsx(vl,{}),t[8]=m):m=t[8];const p=a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]";let x;t[9]!==p?(x=H("p-1",p),t[9]=p,t[10]=x):x=t[10];let v;t[11]!==r||t[12]!==x?(v=o.jsx(Bc,{className:x,children:r}),t[11]=r,t[12]=x,t[13]=v):v=t[13];let y;t[14]===Symbol.for("react.memo_cache_sentinel")?(y=o.jsx(bl,{}),t[14]=y):y=t[14];let w;return t[15]!==a||t[16]!==n||t[17]!==e||t[18]!==u||t[19]!==v?(w=o.jsx(Uc,{children:o.jsxs(fi,{ref:e,className:u,position:a,...n,children:[m,v,y]})}),t[15]=a,t[16]=n,t[17]=e,t[18]=u,t[19]=v,t[20]=w):w=t[20],w});dn.displayName=fi.displayName;const Am=R.forwardRef((s,e)=>{const t=j.c(9);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H("px-2 py-1.5 text-sm font-semibold",r),t[3]=r,t[4]=n):n=t[4];let l;return t[5]!==i||t[6]!==e||t[7]!==n?(l=o.jsx(mi,{ref:e,className:n,...i}),t[5]=i,t[6]=e,t[7]=n,t[8]=l):l=t[8],l});Am.displayName=mi.displayName;const un=R.forwardRef((s,e)=>{const t=j.c(14);let r,i,n;t[0]!==s?({className:i,children:r,...n}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n):(r=t[1],i=t[2],n=t[3]);let l;t[4]!==i?(l=H("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i),t[4]=i,t[5]=l):l=t[5];let a;t[6]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Wc,{children:o.jsx(At,{className:"h-4 w-4"})})}),t[6]=a):a=t[6];let d;t[7]!==r?(d=o.jsx(Kc,{children:r}),t[7]=r,t[8]=d):d=t[8];let u;return t[9]!==n||t[10]!==e||t[11]!==l||t[12]!==d?(u=o.jsxs(pi,{ref:e,className:l,...n,children:[a,d]}),t[9]=n,t[10]=e,t[11]=l,t[12]=d,t[13]=u):u=t[13],u});un.displayName=pi.displayName;const Fm=R.forwardRef((s,e)=>{const t=j.c(9);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H("-mx-1 my-1 h-px bg-muted",r),t[3]=r,t[4]=n):n=t[4];let l;return t[5]!==i||t[6]!==e||t[7]!==n?(l=o.jsx(hi,{ref:e,className:n,...i}),t[5]=i,t[6]=e,t[7]=n,t[8]=l):l=t[8],l});Fm.displayName=hi.displayName;function Lm(){const s=j.c(15),e=Y(),t=P(Pm),r=P(Om);let i,n;s[0]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsx("h4",{className:"text-sm font-semibold",children:"Reverse Proxy"}),n=o.jsx("p",{className:"text-xs text-muted-foreground",children:"Requests are forwarded to a preconfigured destination."}),s[0]=i,s[1]=n):(i=s[0],n=s[1]);let l;if(s[2]!==r||s[3]!==t){let p;s[5]!==r?(p=(x,v)=>o.jsx(Mm,{removable:v>0,server:x,backendState:r[zs(x)]},x.ui_id),s[5]=r,s[6]=p):p=s[6],l=t.map(p),s[2]=r,s[3]=t,s[4]=l}else l=s[4];let a;s[7]!==e?(a=()=>e(zu()),s[7]=e,s[8]=a):a=s[8];let d;s[9]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx(Hr,{className:"h-4 w-4"}),s[9]=d):d=s[9];let u;s[10]!==a?(u=o.jsxs(Te,{variant:"ghost",size:"sm",className:"gap-2 text-xs",onClick:a,children:[d,"Add additional server"]}),s[10]=a,s[11]=u):u=s[11];let m;return s[12]!==l||s[13]!==u?(m=o.jsxs("div",{className:"space-y-2",children:[i,n,o.jsxs("div",{className:"space-y-2",children:[l,u]})]}),s[12]=l,s[13]=u,s[14]=m):m=s[14],m}function Om(s){return s.backendState.servers}function Pm(s){return s.modes.reverse}function Mm(s){const e=j.c(58),{removable:t,server:r,backendState:i}=s,n=Y();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Object.values(is),e[0]=l):l=e[0];const a=l;let d;e[1]!==n||e[2]!==r?(d=async()=>{r.active&&await n(ks({server:r,value:!1})).unwrap(),await n(Bu(r))},e[1]=n,e[2]=r,e[3]=d):d=e[3];const u=d,m=r.error||i?.last_exception||void 0,p=r.active;let x;e[4]!==n||e[5]!==r?(x=()=>{n(ks({server:r,value:!r.active}))},e[4]=n,e[5]=r,e[6]=x):x=e[6];let v;e[7]!==n||e[8]!==r?(v=ee=>{n($o({server:r,value:ee}))},e[7]=n,e[8]=r,e[9]=v):v=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=o.jsx(cn,{className:"h-7 w-auto min-w-[80px] text-xs",children:o.jsx(gl,{})}),e[10]=y):y=e[10];let w;e[11]===Symbol.for("react.memo_cache_sentinel")?(w=o.jsx(dn,{children:a.map(qm)}),e[11]=w):w=e[11];let N;e[12]!==r.protocol||e[13]!==v?(N=o.jsxs(xl,{value:r.protocol,onValueChange:v,children:[y,w]}),e[12]=r.protocol,e[13]=v,e[14]=N):N=e[14];let S;e[15]===Symbol.for("react.memo_cache_sentinel")?(S=o.jsx("span",{className:"text-sm",children:"traffic to"}),e[15]=S):S=e[15];let $;e[16]!==r.destination?($=r.destination?.toString()||"",e[16]=r.destination,e[17]=$):$=e[17];let k;e[18]!==n||e[19]!==r?(k=ee=>n(Co({server:r,value:ee})),e[18]=n,e[19]=r,e[20]=k):k=e[20];let T;e[21]!==$||e[22]!==k?(T=o.jsx(ce,{className:"px-2 py-1 text-sm bg-background border border-input rounded min-w-[120px]",content:$,onEditDone:k,placeholder:"example.com"}),e[21]=$,e[22]=k,e[23]=T):T=e[23];let D;e[24]===Symbol.for("react.memo_cache_sentinel")?(D=o.jsx("h4",{className:"font-semibold mb-3",children:"Advanced Configuration"}),e[24]=D):D=e[24];let L;e[25]===Symbol.for("react.memo_cache_sentinel")?(L=o.jsx(xe,{className:"text-xs",children:"Listen Host"}),e[25]=L):L=e[25];const q=r.listen_host||"";let O;e[26]!==n||e[27]!==r?(O=ee=>n(No({server:r,value:ee})),e[26]=n,e[27]=r,e[28]=O):O=e[28];let V;e[29]!==q||e[30]!==O?(V=o.jsxs("div",{children:[L,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:q,onEditDone:O,placeholder:"*"})]}),e[29]=q,e[30]=O,e[31]=V):V=e[31];let z;e[32]===Symbol.for("react.memo_cache_sentinel")?(z=o.jsx(xe,{className:"text-xs",children:"Listen Port"}),e[32]=z):z=e[32];const K=String(r.listen_port||"");let B;e[33]!==n||e[34]!==r?(B=ee=>n(So({server:r,value:ee})),e[33]=n,e[34]=r,e[35]=B):B=e[35];let W;e[36]!==K||e[37]!==B?(W=o.jsxs("div",{children:[z,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:K,onEditDone:B,placeholder:"8080"})]}),e[36]=K,e[37]=B,e[38]=W):W=e[38];let te;e[39]!==V||e[40]!==W?(te=o.jsxs(ht,{children:[D,o.jsxs("div",{className:"space-y-3",children:[V,W]})]}),e[39]=V,e[40]=W,e[41]=te):te=e[41];let X;e[42]!==u||e[43]!==t?(X=t&&o.jsx(Te,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:u,children:o.jsx(As,{className:"h-4 w-4"})}),e[42]=u,e[43]=t,e[44]=X):X=e[44];let Q;e[45]!==r.active||e[46]!==T||e[47]!==te||e[48]!==X||e[49]!==x||e[50]!==N?(Q=o.jsxs(rt,{value:p,label:"Forward",onChange:x,children:[N,S,T,te,X]}),e[45]=r.active,e[46]=T,e[47]=te,e[48]=X,e[49]=x,e[50]=N,e[51]=Q):Q=e[51];let J;e[52]!==i||e[53]!==m?(J=o.jsx(nt,{error:m,backendState:i}),e[52]=i,e[53]=m,e[54]=J):J=e[54];let ie;return e[55]!==Q||e[56]!==J?(ie=o.jsxs("div",{children:[Q,J]}),e[55]=Q,e[56]=J,e[57]=ie):ie=e[57],ie}function qm(s){return o.jsx(un,{value:s,children:s},s)}function Hm(){const s=j.c(9),e=P(Um),t=P(Vm);let r;if(s[0]!==t||s[1]!==e){let d;s[3]!==t?(d=u=>o.jsx(zm,{server:u,backendState:t[fo(u)]},u.ui_id),s[3]=t,s[4]=d):d=s[4],r=e.map(d),s[0]=t,s[1]=e,s[2]=r}else r=s[2];const i=r;let n;s[5]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("h4",{className:"text-sm font-semibold",children:"Transparent Proxy"}),s[5]=n):n=s[5];let l;s[6]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsxs("p",{className:"text-xs text-muted-foreground",children:["You"," ",o.jsx("a",{href:"https://docs.mitmproxy.org/stable/howto-transparent/",className:"underline hover:text-foreground",children:"configure your routing table"})," ","to send traffic through mitmproxy."]}),s[6]=l):l=s[6];let a;return s[7]!==i?(a=o.jsxs("div",{className:"space-y-2",children:[n,l,i]}),s[7]=i,s[8]=a):a=s[8],a}function Vm(s){return s.backendState.servers}function Um(s){return s.modes.transparent}function zm(s){const e=j.c(33),{server:t,backendState:r}=s,i=Y(),n=t.error||r?.last_exception||void 0;let l;e[0]!==i||e[1]!==t?(l=()=>i(Eo({server:t,value:!t.active})),e[0]=i,e[1]=t,e[2]=l):l=e[2];let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx("h4",{className:"font-semibold mb-3",children:"Advanced Configuration"}),e[3]=a):a=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx(xe,{className:"text-xs",children:"Listen Host"}),e[4]=d):d=e[4];const u=t.listen_host||"";let m;e[5]!==i||e[6]!==t?(m=T=>i(To({server:t,value:T})),e[5]=i,e[6]=t,e[7]=m):m=e[7];let p;e[8]!==u||e[9]!==m?(p=o.jsxs("div",{children:[d,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:u,onEditDone:m})]}),e[8]=u,e[9]=m,e[10]=p):p=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsx(xe,{className:"text-xs",children:"Listen Port"}),e[11]=x):x=e[11];let v;e[12]!==t.listen_port?(v=t.listen_port?t.listen_port.toString():"",e[12]=t.listen_port,e[13]=v):v=e[13];let y;e[14]!==i||e[15]!==t?(y=T=>i(Ro({server:t,value:parseInt(T)})),e[14]=i,e[15]=t,e[16]=y):y=e[16];let w;e[17]!==v||e[18]!==y?(w=o.jsxs("div",{children:[x,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:v,placeholder:"8080",onEditDone:y})]}),e[17]=v,e[18]=y,e[19]=w):w=e[19];let N;e[20]!==w||e[21]!==p?(N=o.jsxs(ht,{children:[a,o.jsxs("div",{className:"space-y-3",children:[p,w]})]}),e[20]=w,e[21]=p,e[22]=N):N=e[22];let S;e[23]!==t.active||e[24]!==l||e[25]!==N?(S=o.jsx(rt,{value:t.active,label:"Run Transparent Proxy",onChange:l,children:N}),e[23]=t.active,e[24]=l,e[25]=N,e[26]=S):S=e[26];let $;e[27]!==r||e[28]!==n?($=o.jsx(nt,{error:n,backendState:r}),e[27]=r,e[28]=n,e[29]=$):$=e[29];let k;return e[30]!==S||e[31]!==$?(k=o.jsxs("div",{children:[S,$]}),e[30]=S,e[31]=$,e[32]=k):k=e[32],k}function Bm(){const s=j.c(9),e=P(Km),t=P(Wm);let r;if(s[0]!==t||s[1]!==e){let d;s[3]!==t?(d=u=>o.jsx(Gm,{server:u,backendState:t[mo(u)]},u.ui_id),s[3]=t,s[4]=d):d=s[4],r=e.map(d),s[0]=t,s[1]=e,s[2]=r}else r=s[2];const i=r;let n,l;s[5]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("h4",{className:"text-sm font-semibold",children:"SOCKS Proxy"}),l=o.jsx("p",{className:"text-xs text-muted-foreground",children:"You manually configure your client application or device to use a SOCKS5 proxy."}),s[5]=n,s[6]=l):(n=s[5],l=s[6]);let a;return s[7]!==i?(a=o.jsxs("div",{className:"space-y-2",children:[n,l,i]}),s[7]=i,s[8]=a):a=s[8],a}function Wm(s){return s.backendState.servers}function Km(s){return s.modes.socks}function Gm(s){const e=j.c(33),{server:t,backendState:r}=s,i=Y(),n=t.error||r?.last_exception||void 0;let l;e[0]!==i||e[1]!==t?(l=()=>i(Io({server:t,value:!t.active})),e[0]=i,e[1]=t,e[2]=l):l=e[2];let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx("h4",{className:"font-semibold mb-3",children:"Advanced Configuration"}),e[3]=a):a=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx(xe,{className:"text-xs",children:"Listen Host"}),e[4]=d):d=e[4];const u=t.listen_host||"";let m;e[5]!==i||e[6]!==t?(m=T=>i(Do({server:t,value:T})),e[5]=i,e[6]=t,e[7]=m):m=e[7];let p;e[8]!==u||e[9]!==m?(p=o.jsxs("div",{children:[d,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:u,onEditDone:m})]}),e[8]=u,e[9]=m,e[10]=p):p=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsx(xe,{className:"text-xs",children:"Listen Port"}),e[11]=x):x=e[11];let v;e[12]!==t.listen_port?(v=t.listen_port?t.listen_port.toString():"",e[12]=t.listen_port,e[13]=v):v=e[13];let y;e[14]!==i||e[15]!==t?(y=T=>i(Ao({server:t,value:parseInt(T)})),e[14]=i,e[15]=t,e[16]=y):y=e[16];let w;e[17]!==v||e[18]!==y?(w=o.jsxs("div",{children:[x,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:v,placeholder:"8080",onEditDone:y})]}),e[17]=v,e[18]=y,e[19]=w):w=e[19];let N;e[20]!==w||e[21]!==p?(N=o.jsxs(ht,{children:[a,o.jsxs("div",{className:"space-y-3",children:[p,w]})]}),e[20]=w,e[21]=p,e[22]=N):N=e[22];let S;e[23]!==t.active||e[24]!==l||e[25]!==N?(S=o.jsx(rt,{value:t.active,label:"Run SOCKS Proxy",onChange:l,children:N}),e[23]=t.active,e[24]=l,e[25]=N,e[26]=S):S=e[26];let $;e[27]!==r||e[28]!==n?($=o.jsx(nt,{error:n,backendState:r}),e[27]=r,e[28]=n,e[29]=$):$=e[29];let k;return e[30]!==S||e[31]!==$?(k=o.jsxs("div",{children:[S,$]}),e[30]=S,e[31]=$,e[32]=k):k=e[32],k}function Xm(){const s=j.c(9),e=P(Jm),t=P(Ym);let r;if(s[0]!==t||s[1]!==e){let d;s[3]!==t?(d=u=>o.jsx(Qm,{server:u,backendState:t[po(u)]},u.ui_id),s[3]=t,s[4]=d):d=s[4],r=e.map(d),s[0]=t,s[1]=e,s[2]=r}else r=s[2];const i=r;let n,l;s[5]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("h4",{className:"text-sm font-semibold",children:"Explicit HTTP(S) Proxy (With Upstream Proxy)"}),l=o.jsx("p",{className:"text-xs text-muted-foreground",children:"All requests are forwarded to a second HTTP(S) proxy server."}),s[5]=n,s[6]=l):(n=s[5],l=s[6]);let a;return s[7]!==i?(a=o.jsxs("div",{className:"space-y-2",children:[n,l,i]}),s[7]=i,s[8]=a):a=s[8],a}function Ym(s){return s.backendState.servers}function Jm(s){return s.modes.upstream}function Qm(s){const e=j.c(42),{server:t,backendState:r}=s,i=Y(),n=t.error||r?.last_exception||void 0;let l;e[0]!==i||e[1]!==t?(l=()=>{i(Fo({server:t,value:!t.active}))},e[0]=i,e[1]=t,e[2]=l):l=e[2];let a;e[3]!==t.destination?(a=t.destination?.toString()||"",e[3]=t.destination,e[4]=a):a=e[4];let d;e[5]!==i||e[6]!==t?(d=q=>i(Po({server:t,value:q})),e[5]=i,e[6]=t,e[7]=d):d=e[7];let u;e[8]!==a||e[9]!==d?(u=o.jsx(ce,{className:"px-2 py-1 text-sm bg-background border border-input rounded min-w-[180px]",content:a,onEditDone:d,placeholder:"http://example.com:8080"}),e[8]=a,e[9]=d,e[10]=u):u=e[10];let m;e[11]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsx("h4",{className:"font-semibold mb-3",children:"Advanced Configuration"}),e[11]=m):m=e[11];let p;e[12]===Symbol.for("react.memo_cache_sentinel")?(p=o.jsx(xe,{className:"text-xs",children:"Listen Host"}),e[12]=p):p=e[12];const x=t.listen_host||"";let v;e[13]!==i||e[14]!==t?(v=q=>i(Lo({server:t,value:q})),e[13]=i,e[14]=t,e[15]=v):v=e[15];let y;e[16]!==x||e[17]!==v?(y=o.jsxs("div",{children:[p,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:x,onEditDone:v})]}),e[16]=x,e[17]=v,e[18]=y):y=e[18];let w;e[19]===Symbol.for("react.memo_cache_sentinel")?(w=o.jsx(xe,{className:"text-xs",children:"Listen Port"}),e[19]=w):w=e[19];let N;e[20]!==t.listen_port?(N=t.listen_port?t.listen_port.toString():"",e[20]=t.listen_port,e[21]=N):N=e[21];let S;e[22]!==i||e[23]!==t?(S=q=>i(Oo({server:t,value:parseInt(q)})),e[22]=i,e[23]=t,e[24]=S):S=e[24];let $;e[25]!==N||e[26]!==S?($=o.jsxs("div",{children:[w,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:N,placeholder:"8080",onEditDone:S})]}),e[25]=N,e[26]=S,e[27]=$):$=e[27];let k;e[28]!==$||e[29]!==y?(k=o.jsxs(ht,{children:[m,o.jsxs("div",{className:"space-y-3",children:[y,$]})]}),e[28]=$,e[29]=y,e[30]=k):k=e[30];let T;e[31]!==t.active||e[32]!==l||e[33]!==k||e[34]!==u?(T=o.jsxs(rt,{value:t.active,label:"Run HTTP/S Proxy and forward requests to",onChange:l,children:[u,k]}),e[31]=t.active,e[32]=l,e[33]=k,e[34]=u,e[35]=T):T=e[35];let D;e[36]!==r||e[37]!==n?(D=o.jsx(nt,{error:n,backendState:r}),e[36]=r,e[37]=n,e[38]=D):D=e[38];let L;return e[39]!==T||e[40]!==D?(L=o.jsxs("div",{children:[T,D]}),e[39]=T,e[40]=D,e[41]=L):L=e[41],L}function Zm(){const s=j.c(9),e=P(tp),t=P(ep);let r;if(s[0]!==t||s[1]!==e){let d;s[3]!==t?(d=u=>o.jsx(sp,{server:u,backendState:t[ho(u)]},u.ui_id),s[3]=t,s[4]=d):d=s[4],r=e.map(d),s[0]=t,s[1]=e,s[2]=r}else r=s[2];const i=r;let n,l;s[5]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("h4",{className:"text-sm font-semibold",children:"DNS Server"}),l=o.jsx("p",{className:"text-xs text-muted-foreground",children:"A recursive DNS resolver using the host's DNS configuration."}),s[5]=n,s[6]=l):(n=s[5],l=s[6]);let a;return s[7]!==i?(a=o.jsxs("div",{className:"space-y-2",children:[n,l,i]}),s[7]=i,s[8]=a):a=s[8],a}function ep(s){return s.backendState.servers}function tp(s){return s.modes.dns}function sp(s){const e=j.c(33),{server:t,backendState:r}=s,i=Y(),n=t.error||r?.last_exception||void 0;let l;e[0]!==i||e[1]!==t?(l=()=>i(Mo({server:t,value:!t.active})),e[0]=i,e[1]=t,e[2]=l):l=e[2];let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx("h4",{className:"font-semibold mb-3",children:"Advanced Configuration"}),e[3]=a):a=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx(xe,{className:"text-xs",children:"Listen Host"}),e[4]=d):d=e[4];const u=t.listen_host||"";let m;e[5]!==i||e[6]!==t?(m=T=>i(qo({server:t,value:T})),e[5]=i,e[6]=t,e[7]=m):m=e[7];let p;e[8]!==u||e[9]!==m?(p=o.jsxs("div",{children:[d,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:u,onEditDone:m})]}),e[8]=u,e[9]=m,e[10]=p):p=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsx(xe,{className:"text-xs",children:"Listen Port"}),e[11]=x):x=e[11];let v;e[12]!==t.listen_port?(v=t.listen_port?t.listen_port.toString():"",e[12]=t.listen_port,e[13]=v):v=e[13];let y;e[14]!==i||e[15]!==t?(y=T=>i(Ho({server:t,value:parseInt(T)})),e[14]=i,e[15]=t,e[16]=y):y=e[16];let w;e[17]!==v||e[18]!==y?(w=o.jsxs("div",{children:[x,o.jsx(ce,{className:"mt-1 w-full px-2 py-1 text-sm bg-background border border-input rounded",content:v,placeholder:"8080",onEditDone:y})]}),e[17]=v,e[18]=y,e[19]=w):w=e[19];let N;e[20]!==w||e[21]!==p?(N=o.jsxs(ht,{children:[a,o.jsxs("div",{className:"space-y-3",children:[p,w]})]}),e[20]=w,e[21]=p,e[22]=N):N=e[22];let S;e[23]!==t.active||e[24]!==l||e[25]!==N?(S=o.jsx(rt,{value:t.active,label:"Run DNS Server",onChange:l,children:N}),e[23]=t.active,e[24]=l,e[25]=N,e[26]=S):S=e[26];let $;e[27]!==r||e[28]!==n?($=o.jsx(nt,{error:n,backendState:r}),e[27]=r,e[28]=n,e[29]=$):$=e[29];let k;return e[30]!==S||e[31]!==$?(k=o.jsxs("div",{children:[S,$]}),e[30]=S,e[31]=$,e[32]=k):k=e[32],k}function Ir(s){const e=j.c(10),{title:t,description:r}=s;let i;e[0]!==t?(i=o.jsx("h4",{className:"text-sm font-semibold",children:t}),e[0]=t,e[1]=i):i=e[1];let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx(Is,{className:"h-4 w-4 text-warning"}),e[2]=n):n=e[2];let l;e[3]!==i?(l=o.jsxs("div",{className:"flex items-center gap-2",children:[i,n]}),e[3]=i,e[4]=l):l=e[4];let a;e[5]!==r?(a=o.jsx("p",{className:"text-xs text-muted-foreground",children:r}),e[5]=r,e[6]=a):a=e[6];let d;return e[7]!==l||e[8]!==a?(d=o.jsxs("div",{className:"space-y-2 opacity-60",children:[l,a]}),e[7]=l,e[8]=a,e[9]=d):d=e[9],d}function np(){const s=j.c(18),{platform:e,localModeUnavailable:t}=P(rp);let r;s[0]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Intercept Traffic"}),o.jsx("p",{className:"text-muted-foreground",children:"Configure how you want to intercept traffic with mitmproxy."})]}),s[0]=r):r=s[0];let i;s[1]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsx("h3",{className:"text-lg font-medium",children:"Recommended"}),s[1]=i):i=s[1];let n;s[2]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx($m,{}),s[2]=n):n=s[2];let l;s[3]!==t?(l=t!==null?o.jsx(Ir,{title:"Local Redirect Mode",description:t}):o.jsx(ym,{}),s[3]=t,s[4]=l):l=s[4];let a,d;s[5]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx(Tm,{}),d=o.jsx(Lm,{}),s[5]=a,s[6]=d):(a=s[5],d=s[6]);let u;s[7]!==l?(u=o.jsxs("div",{className:"border-l-4 border-green-500 pl-4 space-y-4",children:[i,o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n,l,a,d]})]}),s[7]=l,s[8]=u):u=s[8];let m;s[9]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsx("h3",{className:"text-lg font-medium",children:"Advanced"}),s[9]=m):m=s[9];let p,x,v;s[10]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsx(Bm,{}),v=o.jsx(Xm,{}),p=o.jsx(Zm,{}),s[10]=p,s[11]=x,s[12]=v):(p=s[10],x=s[11],v=s[12]);let y;s[13]!==e?(y=o.jsxs("div",{className:"border-l-4 border-muted-foreground pl-4 space-y-4",children:[m,o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[x,v,p,e.startsWith("win32")?o.jsx(Ir,{title:"Transparent Proxy",description:"This mode is only supported on Linux and MacOS."}):o.jsx(Hm,{})]})]}),s[13]=e,s[14]=y):y=s[14];let w;return s[15]!==y||s[16]!==u?(w=o.jsxs("div",{className:"p-6 space-y-6",children:[r,u,y]}),s[15]=y,s[16]=u,s[17]=w):w=s[17],w}function rp(s){return s.backendState}function ip(){const s=j.c(5),e=P(ap),t=P(lp),r=P(op);let i;s[0]===Symbol.for("react.memo_cache_sentinel")?(i=H("flex-1 flex flex-col min-h-0 overflow-hidden"),s[0]=i):i=s[0];let n;return s[1]!==r||s[2]!==t||s[3]!==e?(n=o.jsx("div",{className:i,children:r===Se.Capture?o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsx(np,{})}):o.jsxs(o.Fragment,{children:[t?o.jsx(dm,{}):o.jsx(um,{}),e&&o.jsxs(o.Fragment,{children:[o.jsx(tm,{axis:"y"},"splitter"),o.jsx(Jf,{},"flowDetails")]})]})}),s[1]=r,s[2]=t,s[3]=e,s[4]=n):n=s[4],n}function op(s){return s.ui.tabs.current}function lp(s){return s.flows.list.length>0}function ap(s){return s.flows.selected.length===1}function Nt(s){const e=j.c(2),{children:t}=s;let r;return e[0]!==t?(r=window.MITMWEB_STATIC?null:o.jsx(o.Fragment,{children:t}),e[0]=t,e[1]=r):r=e[1],r}const cp=R.memo(function(){const e=j.c(21),t=Y(),r=P(dp);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsx(Go,{asChild:!0,children:o.jsxs(Te,{variant:"ghost",size:"sm",className:"gap-1 h-8",children:["File",o.jsx(ft,{className:"h-3 w-3"})]})}),e[0]=i):i=e[0];let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx(Yc,{className:"h-4 w-4 mr-2"}),e[1]=n):n=e[1];let l;e[2]!==t?(l=o.jsx(Bo,{variant:"menu",icon:n,text:"Open...",onOpenFile:S=>{t(Pd(S))}}),e[2]=t,e[3]=l):l=e[3];let a;e[4]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsxs(_t,{onClick:up,children:[o.jsx(mr,{className:"h-4 w-4 mr-2"}),"Save"]}),e[4]=a):a=e[4];let d;e[5]!==r?(d=()=>location.replace("/flows/dump?filter="+r),e[5]=r,e[6]=d):d=e[6];let u;e[7]===Symbol.for("react.memo_cache_sentinel")?(u=o.jsx(mr,{className:"h-4 w-4 mr-2"}),e[7]=u):u=e[7];let m;e[8]!==d?(m=o.jsxs(_t,{onClick:d,children:[u,"Save filtered"]}),e[8]=d,e[9]=m):m=e[9];let p;e[10]!==t?(p=()=>confirm("Delete all flows?")&&t(Ki()),e[10]=t,e[11]=p):p=e[11];let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsx(As,{className:"h-4 w-4 mr-2"}),e[12]=x):x=e[12];let v;e[13]!==p?(v=o.jsxs(_t,{onClick:p,children:[x,"Clear All"]}),e[13]=p,e[14]=v):v=e[14];let y;e[15]===Symbol.for("react.memo_cache_sentinel")?(y=o.jsx(Xo,{}),e[15]=y):y=e[15];let w;e[16]===Symbol.for("react.memo_cache_sentinel")?(w=o.jsxs(Nt,{children:[y,o.jsx(_t,{asChild:!0,children:o.jsxs("a",{href:"http://mitm.it/",target:"_blank",rel:"noreferrer",className:"flex items-center",children:[o.jsx(xi,{className:"h-4 w-4 mr-2"}),"Install Certificates..."]})})]}),e[16]=w):w=e[16];let N;return e[17]!==l||e[18]!==m||e[19]!==v?(N=o.jsxs(Ko,{children:[i,o.jsxs(Bs,{align:"start",children:[l,a,m,v,w]})]}),e[17]=l,e[18]=m,e[19]=v,e[20]=N):N=e[20],N});function dp(s){return s.ui.filter[Ne.Search]}function up(){return location.replace("/flows/dump")}const fp=ed,yl=Zc,wl=Qc,fn=R.forwardRef((s,e)=>{const t=j.c(11);let r,i,n;t[0]!==s?({className:r,sideOffset:n,...i}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n):(r=t[1],i=t[2],n=t[3]);const l=n===void 0?4:n;let a;t[4]!==r?(a=H("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),t[4]=r,t[5]=a):a=t[5];let d;return t[6]!==i||t[7]!==e||t[8]!==l||t[9]!==a?(d=o.jsx(Jc,{children:o.jsx(gi,{ref:e,sideOffset:l,className:a,...i})}),t[6]=i,t[7]=e,t[8]=l,t[9]=a,t[10]=d):d=t[10],d});fn.displayName=gi.displayName;const mp=R.memo(function(){const e=j.c(6),t=P(pp),r=P(hp);switch(t){case Tt.INIT:{let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsxs(de,{variant:"secondary",className:"gap-1.5 text-muted-foreground",children:[o.jsx(Ds,{className:"h-3 w-3 animate-spin"}),"connecting…"]}),e[0]=i):i=e[0],i}case Tt.FETCHING:{let i;return e[1]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsxs(de,{variant:"secondary",className:"gap-1.5 text-info",children:[o.jsx(yt,{className:"h-3 w-3 animate-pulse"}),"fetching data…"]}),e[1]=i):i=e[1],i}case Tt.ESTABLISHED:{let i;return e[2]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsxs(de,{variant:"success",className:"gap-1.5",children:[o.jsx(Zr,{className:"h-3 w-3"}),"connected"]}),e[2]=i):i=e[2],i}case Tt.ERROR:{let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsx(wl,{asChild:!0,children:o.jsxs(de,{variant:"destructive",className:"gap-1.5",children:[o.jsx(td,{className:"h-3 w-3"}),"connection lost"]})}),e[3]=i):i=e[3];let n;return e[4]!==r?(n=o.jsxs(yl,{children:[i,o.jsx(fn,{children:o.jsx("p",{children:r})})]}),e[4]=r,e[5]=n):n=e[5],n}default:Ft(t)}});function pp(s){return s.connection.state}function hp(s){return s.connection.message}function xp(){const s=j.c(16),e=Y(),t=P(gp);let r;s[0]!==t||s[1]!==e?(r=()=>{e(cu()),t==="light"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},s[0]=t,s[1]=e,s[2]=r):r=s[2];const i=r;let n;s[3]!==t?(n=t==="light"?o.jsx(sd,{className:"h-4 w-4"}):o.jsx(nd,{className:"h-4 w-4"}),s[3]=t,s[4]=n):n=s[4];const l=t==="light"?"dark":"light";let a;s[5]!==l?(a=o.jsxs("span",{className:"sr-only",children:["Switch to ",l," ","theme"]}),s[5]=l,s[6]=a):a=s[6];let d;s[7]!==i||s[8]!==n||s[9]!==a?(d=o.jsx(wl,{asChild:!0,children:o.jsxs(Te,{variant:"ghost",size:"icon",onClick:i,className:"h-8 w-8",children:[n,a]})}),s[7]=i,s[8]=n,s[9]=a,s[10]=d):d=s[10];const u=t==="light"?"dark":"light";let m;s[11]!==u?(m=o.jsx(fn,{children:o.jsxs("p",{children:["Switch to ",u," theme"]})}),s[11]=u,s[12]=m):m=s[12];let p;return s[13]!==d||s[14]!==m?(p=o.jsxs(yl,{children:[d,m]}),s[13]=d,s[14]=m,s[15]=p):p=s[15],p}function gp(s){return s.ui.theme.current}_l.title="Capture";function _l(){const s=j.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=o.jsx(o.Fragment,{}),s[0]=e):e=s[0],e}const Dr=function(){function s(r,i){function n(){this.constructor=r}n.prototype=i.prototype,r.prototype=new n}function e(r,i,n,l){this.message=r,this.expected=i,this.found=n,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,e)}s(e,Error);function t(r){var i=arguments.length>1?arguments[1]:{},n={},l={start:zn},a=zn,d={type:"other",description:"filter expression"},u=function(c){return c},m={type:"other",description:"whitespace"},p=/^[ \t\n\r]/,x={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},v={type:"other",description:"control character"},y=/^[|&!()~"]/,w={type:"class",value:'[|&!()~"]',description:'[|&!()~"]'},N={type:"other",description:"optional whitespace"},S="|",$={type:"literal",value:"|",description:'"|"'},k=function(c,f){return Ia(c,f)},T="&",D={type:"literal",value:"&",description:'"&"'},L=function(c,f){return Da(c,f)},q="!",O={type:"literal",value:"!",description:'"!"'},V=function(c){return Aa(c)},z="(",K={type:"literal",value:"(",description:'"("'},B=")",W={type:"literal",value:")",description:'")"'},te=function(c){return Fa(c)},X="~all",Q={type:"literal",value:"~all",description:'"~all"'},J=function(){return Xn},ie="~a",ee={type:"literal",value:"~a",description:'"~a"'},fe=function(){return Jn},be="~b",Be={type:"literal",value:"~b",description:'"~b"'},ye=function(c){return La(c)},Je="~bq",we={type:"literal",value:"~bq",description:'"~bq"'},E=function(c){return Oa(c)},me="~bs",ae={type:"literal",value:"~bs",description:'"~bs"'},_e=function(c){return Pa(c)},F="~c",oe={type:"literal",value:"~c",description:'"~c"'},Re=function(c){return Ma(c)},We="~comment",Z={type:"literal",value:"~comment",description:'"~comment"'},Qe=function(c){return qa(c)},le="~d",pe={type:"literal",value:"~d",description:'"~d"'},je=function(c){return Ha(c)},Ce="~dns",it={type:"literal",value:"~dns",description:'"~dns"'},Ot=function(){return Qn},Ze="~dst",ds={type:"literal",value:"~dst",description:'"~dst"'},_=function(c){return Va(c)},C="~e",A={type:"literal",value:"~e",description:'"~e"'},U=function(){return Zn},Pt="~h",us={type:"literal",value:"~h",description:'"~h"'},Ie=function(c){return Ua(c)},Fe="~hq",xt={type:"literal",value:"~hq",description:'"~hq"'},Ke=function(c){return za(c)},St="~hs",Mt={type:"literal",value:"~hs",description:'"~hs"'},ot=function(c){return Ba(c)},qt="~http",gt={type:"literal",value:"~http",description:'"~http"'},Le=function(){return er},hn="~marked",Il={type:"literal",value:"~marked",description:'"~marked"'},Dl=function(){return tr},xn="~marker",Al={type:"literal",value:"~marker",description:'"~marker"'},Fl=function(c){return Wa(c)},gn="~m",Ll={type:"literal",value:"~m",description:'"~m"'},Ol=function(c){return Ka(c)},vn="~q",Pl={type:"literal",value:"~q",description:'"~q"'},Ml=function(){return sr},bn="~replayq",ql={type:"literal",value:"~replayq",description:'"~replayq"'},Hl=function(){return nr},yn="~replays",Vl={type:"literal",value:"~replays",description:'"~replays"'},Ul=function(){return rr},wn="~replay",zl={type:"literal",value:"~replay",description:'"~replay"'},Bl=function(){return ir},_n="~src",Wl={type:"literal",value:"~src",description:'"~src"'},Kl=function(c){return Ga(c)},jn="~s",Gl={type:"literal",value:"~s",description:'"~s"'},Xl=function(){return or},Nn="~tcp",Yl={type:"literal",value:"~tcp",description:'"~tcp"'},Jl=function(){return lr},Sn="~udp",Ql={type:"literal",value:"~udp",description:'"~udp"'},Zl=function(){return ar},$n="~tq",ea={type:"literal",value:"~tq",description:'"~tq"'},ta=function(c){return Xa(c)},Cn="~ts",sa={type:"literal",value:"~ts",description:'"~ts"'},na=function(c){return Ya(c)},kn="~t",ra={type:"literal",value:"~t",description:'"~t"'},ia=function(c){return Ja(c)},En="~u",oa={type:"literal",value:"~u",description:'"~u"'},Tn=function(c){return Qa(c)},Rn="~websocket",la={type:"literal",value:"~websocket",description:'"~websocket"'},aa=function(){return cr},ca={type:"other",description:"integer"},In=/^['"]/,Dn={type:"class",value:`['"]`,description:`['"]`},An=/^[0-9]/,Fn={type:"class",value:"[0-9]",description:"[0-9]"},da=function(c){return parseInt(c.join(""),10)},ua={type:"other",description:"string"},Ln='"',On={type:"literal",value:'"',description:'"\\""'},fs=function(c){return c.join("")},Pn="'",Mn={type:"literal",value:"'",description:`"'"`},fa=/^["\\]/,ma={type:"class",value:'["\\\\]',description:'["\\\\]'},ms={type:"any",description:"any character"},$t=function(c){return c},qn="\\",Hn={type:"literal",value:"\\",description:'"\\\\"'},pa=/^['\\]/,ha={type:"class",value:"['\\\\]",description:"['\\\\]"},xa=/^['"\\]/,ga={type:"class",value:`['"\\\\]`,description:`['"\\\\]`},va="n",ba={type:"literal",value:"n",description:'"n"'},ya=function(){return`
`},wa="r",_a={type:"literal",value:"r",description:'"r"'},ja=function(){return"\r"},Na="t",Sa={type:"literal",value:"t",description:'"t"'},$a=function(){return"	"},h=0,Ht=[{line:1,column:1,seenCR:!1}],Me=0,ps=[],I=0,Vt;if("startRule"in i){if(!(i.startRule in l))throw new Error(`Can't start parsing from rule "`+i.startRule+'".');a=l[i.startRule]}function Vn(c){var f=Ht[c],g,b;if(f)return f;for(g=c-1;!Ht[g];)g--;for(f=Ht[g],f={line:f.line,column:f.column,seenCR:f.seenCR};g<c;)b=r.charAt(g),b===`
`?(f.seenCR||f.line++,f.column=1,f.seenCR=!1):b==="\r"||b==="\u2028"||b==="\u2029"?(f.line++,f.column=1,f.seenCR=!0):(f.column++,f.seenCR=!1),g++;return Ht[c]=f,f}function Un(c,f){var g=Vn(c),b=Vn(f);return{start:{offset:c,line:g.line,column:g.column},end:{offset:f,line:b.line,column:b.column}}}function M(c){h<Me||(h>Me&&(Me=h,ps=[]),ps.push(c))}function Ca(c,f,g,b){function qe(Oe){var et=1;for(Oe.sort(function(Bt,lt){return Bt.description<lt.description?-1:Bt.description>lt.description?1:0});et<Oe.length;)Oe[et-1]===Oe[et]?Oe.splice(et,1):et++}function De(Oe,et){function Bt(Za){function Wt(Xe){return Xe.charCodeAt(0).toString(16).toUpperCase()}return Za.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(Xe){return"\\x0"+Wt(Xe)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(Xe){return"\\x"+Wt(Xe)}).replace(/[\u0100-\u0FFF]/g,function(Xe){return"\\u0"+Wt(Xe)}).replace(/[\u1000-\uFFFF]/g,function(Xe){return"\\u"+Wt(Xe)})}var lt=new Array(Oe.length),dr,ur,Ct;for(Ct=0;Ct<Oe.length;Ct++)lt[Ct]=Oe[Ct].description;return dr=Oe.length>1?lt.slice(0,-1).join(", ")+" or "+lt[Oe.length-1]:lt[0],ur=et?'"'+Bt(et)+'"':"end of input","Expected "+dr+" but "+ur+" found."}return f!==null&&qe(f),new e(De(f,g),f,g,b)}function zn(){var c,f,g,b;return I++,c=h,f=Ge(),f!==n?(g=hs(),g!==n?(b=Ge(),b!==n?(f=u(g),c=f):(h=c,c=n)):(h=c,c=n)):(h=c,c=n),I--,c===n&&(f=n,I===0&&M(d)),c}function G(){var c;return I++,p.test(r.charAt(h))?(c=r.charAt(h),h++):(c=n,I===0&&M(x)),I--,c===n&&I===0&&M(m),c}function ka(){var c;return I++,y.test(r.charAt(h))?(c=r.charAt(h),h++):(c=n,I===0&&M(w)),I--,c===n&&I===0&&M(v),c}function Ge(){var c,f;for(I++,c=[],f=G();f!==n;)c.push(f),f=G();return I--,c===n&&(f=n,I===0&&M(N)),c}function hs(){var c,f,g,b,qe,De;return c=h,f=Ut(),f!==n?(g=Ge(),g!==n?(r.charCodeAt(h)===124?(b=S,h++):(b=n,I===0&&M($)),b!==n?(qe=Ge(),qe!==n?(De=hs(),De!==n?(f=k(f,De),c=f):(h=c,c=n)):(h=c,c=n)):(h=c,c=n)):(h=c,c=n)):(h=c,c=n),c===n&&(c=Ut()),c}function Ut(){var c,f,g,b,qe,De;if(c=h,f=zt(),f!==n?(g=Ge(),g!==n?(r.charCodeAt(h)===38?(b=T,h++):(b=n,I===0&&M(D)),b!==n?(qe=Ge(),qe!==n?(De=Ut(),De!==n?(f=L(f,De),c=f):(h=c,c=n)):(h=c,c=n)):(h=c,c=n)):(h=c,c=n)):(h=c,c=n),c===n){if(c=h,f=zt(),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=Ut(),b!==n?(f=L(f,b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;c===n&&(c=zt())}return c}function zt(){var c,f,g,b;return c=h,r.charCodeAt(h)===33?(f=q,h++):(f=n,I===0&&M(O)),f!==n?(g=Ge(),g!==n?(b=zt(),b!==n?(f=V(b),c=f):(h=c,c=n)):(h=c,c=n)):(h=c,c=n),c===n&&(c=Ea()),c}function Ea(){var c,f,g,b,qe,De;return c=h,r.charCodeAt(h)===40?(f=z,h++):(f=n,I===0&&M(K)),f!==n?(g=Ge(),g!==n?(b=hs(),b!==n?(qe=Ge(),qe!==n?(r.charCodeAt(h)===41?(De=B,h++):(De=n,I===0&&M(W)),De!==n?(f=te(b),c=f):(h=c,c=n)):(h=c,c=n)):(h=c,c=n)):(h=c,c=n)):(h=c,c=n),c===n&&(c=Ta()),c}function Ta(){var c,f,g,b;if(c=h,r.substr(h,4)===X?(f=X,h+=4):(f=n,I===0&&M(Q)),f!==n&&(f=J()),c=f,c===n&&(c=h,r.substr(h,2)===ie?(f=ie,h+=2):(f=n,I===0&&M(ee)),f!==n&&(f=fe()),c=f,c===n)){if(c=h,r.substr(h,2)===be?(f=be,h+=2):(f=n,I===0&&M(Be)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=ye(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.substr(h,3)===Je?(f=Je,h+=3):(f=n,I===0&&M(we)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=E(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.substr(h,3)===me?(f=me,h+=3):(f=n,I===0&&M(ae)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=_e(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.substr(h,2)===F?(f=F,h+=2):(f=n,I===0&&M(oe)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=Ra(),b!==n?(f=Re(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.substr(h,8)===We?(f=We,h+=8):(f=n,I===0&&M(Z)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=Qe(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.substr(h,2)===le?(f=le,h+=2):(f=n,I===0&&M(pe)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=je(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n&&(c=h,r.substr(h,4)===Ce?(f=Ce,h+=4):(f=n,I===0&&M(it)),f!==n&&(f=Ot()),c=f,c===n)){if(c=h,r.substr(h,4)===Ze?(f=Ze,h+=4):(f=n,I===0&&M(ds)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=_(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n&&(c=h,r.substr(h,2)===C?(f=C,h+=2):(f=n,I===0&&M(A)),f!==n&&(f=U()),c=f,c===n)){if(c=h,r.substr(h,2)===Pt?(f=Pt,h+=2):(f=n,I===0&&M(us)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=Ie(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.substr(h,3)===Fe?(f=Fe,h+=3):(f=n,I===0&&M(xt)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=Ke(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.substr(h,3)===St?(f=St,h+=3):(f=n,I===0&&M(Mt)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=ot(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n&&(c=h,r.substr(h,5)===qt?(f=qt,h+=5):(f=n,I===0&&M(gt)),f!==n&&(f=Le()),c=f,c===n&&(c=h,r.substr(h,7)===hn?(f=hn,h+=7):(f=n,I===0&&M(Il)),f!==n&&(f=Dl()),c=f,c===n))){if(c=h,r.substr(h,7)===xn?(f=xn,h+=7):(f=n,I===0&&M(Al)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=Fl(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.substr(h,2)===gn?(f=gn,h+=2):(f=n,I===0&&M(Ll)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=Ol(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n&&(c=h,r.substr(h,2)===vn?(f=vn,h+=2):(f=n,I===0&&M(Pl)),f!==n&&(f=Ml()),c=f,c===n&&(c=h,r.substr(h,8)===bn?(f=bn,h+=8):(f=n,I===0&&M(ql)),f!==n&&(f=Hl()),c=f,c===n&&(c=h,r.substr(h,8)===yn?(f=yn,h+=8):(f=n,I===0&&M(Vl)),f!==n&&(f=Ul()),c=f,c===n&&(c=h,r.substr(h,7)===wn?(f=wn,h+=7):(f=n,I===0&&M(zl)),f!==n&&(f=Bl()),c=f,c===n))))){if(c=h,r.substr(h,4)===_n?(f=_n,h+=4):(f=n,I===0&&M(Wl)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=Kl(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n&&(c=h,r.substr(h,2)===jn?(f=jn,h+=2):(f=n,I===0&&M(Gl)),f!==n&&(f=Xl()),c=f,c===n&&(c=h,r.substr(h,4)===Nn?(f=Nn,h+=4):(f=n,I===0&&M(Yl)),f!==n&&(f=Jl()),c=f,c===n&&(c=h,r.substr(h,4)===Sn?(f=Sn,h+=4):(f=n,I===0&&M(Ql)),f!==n&&(f=Zl()),c=f,c===n)))){if(c=h,r.substr(h,3)===$n?(f=$n,h+=3):(f=n,I===0&&M(ea)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=ta(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.substr(h,3)===Cn?(f=Cn,h+=3):(f=n,I===0&&M(sa)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=na(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.substr(h,2)===kn?(f=kn,h+=2):(f=n,I===0&&M(ra)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=ia(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.substr(h,2)===En?(f=En,h+=2):(f=n,I===0&&M(oa)),f!==n){if(g=[],b=G(),b!==n)for(;b!==n;)g.push(b),b=G();else g=n;g!==n?(b=ge(),b!==n?(f=Tn(b),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;c===n&&(c=h,r.substr(h,10)===Rn?(f=Rn,h+=10):(f=n,I===0&&M(la)),f!==n&&(f=aa()),c=f,c===n&&(c=h,f=ge(),f!==n&&(f=Tn(f)),c=f))}}}}}}}}}}}}}}}}}return c}function Ra(){var c,f,g,b;if(I++,c=h,In.test(r.charAt(h))?(f=r.charAt(h),h++):(f=n,I===0&&M(Dn)),f===n&&(f=null),f!==n){if(g=[],An.test(r.charAt(h))?(b=r.charAt(h),h++):(b=n,I===0&&M(Fn)),b!==n)for(;b!==n;)g.push(b),An.test(r.charAt(h))?(b=r.charAt(h),h++):(b=n,I===0&&M(Fn));else g=n;g!==n?(In.test(r.charAt(h))?(b=r.charAt(h),h++):(b=n,I===0&&M(Dn)),b===n&&(b=null),b!==n?(f=da(g),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;return I--,c===n&&(f=n,I===0&&M(ca)),c}function ge(){var c,f,g,b;if(I++,c=h,r.charCodeAt(h)===34?(f=Ln,h++):(f=n,I===0&&M(On)),f!==n){for(g=[],b=Bn();b!==n;)g.push(b),b=Bn();g!==n?(r.charCodeAt(h)===34?(b=Ln,h++):(b=n,I===0&&M(On)),b!==n?(f=fs(g),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n){if(c=h,r.charCodeAt(h)===39?(f=Pn,h++):(f=n,I===0&&M(Mn)),f!==n){for(g=[],b=Wn();b!==n;)g.push(b),b=Wn();g!==n?(r.charCodeAt(h)===39?(b=Pn,h++):(b=n,I===0&&M(Mn)),b!==n?(f=fs(g),c=f):(h=c,c=n)):(h=c,c=n)}else h=c,c=n;if(c===n)if(c=h,f=h,I++,g=ka(),I--,g===n?f=void 0:(h=f,f=n),f!==n){if(g=[],b=Kn(),b!==n)for(;b!==n;)g.push(b),b=Kn();else g=n;g!==n?(f=fs(g),c=f):(h=c,c=n)}else h=c,c=n}return I--,c===n&&(f=n,I===0&&M(ua)),c}function Bn(){var c,f,g;return c=h,f=h,I++,fa.test(r.charAt(h))?(g=r.charAt(h),h++):(g=n,I===0&&M(ma)),I--,g===n?f=void 0:(h=f,f=n),f!==n?(r.length>h?(g=r.charAt(h),h++):(g=n,I===0&&M(ms)),g!==n?(f=$t(g),c=f):(h=c,c=n)):(h=c,c=n),c===n&&(c=h,r.charCodeAt(h)===92?(f=qn,h++):(f=n,I===0&&M(Hn)),f!==n?(g=Gn(),g!==n?(f=$t(g),c=f):(h=c,c=n)):(h=c,c=n)),c}function Wn(){var c,f,g;return c=h,f=h,I++,pa.test(r.charAt(h))?(g=r.charAt(h),h++):(g=n,I===0&&M(ha)),I--,g===n?f=void 0:(h=f,f=n),f!==n?(r.length>h?(g=r.charAt(h),h++):(g=n,I===0&&M(ms)),g!==n?(f=$t(g),c=f):(h=c,c=n)):(h=c,c=n),c===n&&(c=h,r.charCodeAt(h)===92?(f=qn,h++):(f=n,I===0&&M(Hn)),f!==n?(g=Gn(),g!==n?(f=$t(g),c=f):(h=c,c=n)):(h=c,c=n)),c}function Kn(){var c,f,g;return c=h,f=h,I++,g=G(),I--,g===n?f=void 0:(h=f,f=n),f!==n?(r.length>h?(g=r.charAt(h),h++):(g=n,I===0&&M(ms)),g!==n?(f=$t(g),c=f):(h=c,c=n)):(h=c,c=n),c}function Gn(){var c,f;return xa.test(r.charAt(h))?(c=r.charAt(h),h++):(c=n,I===0&&M(ga)),c===n&&(c=h,r.charCodeAt(h)===110?(f=va,h++):(f=n,I===0&&M(ba)),f!==n&&(f=ya()),c=f,c===n&&(c=h,r.charCodeAt(h)===114?(f=wa,h++):(f=n,I===0&&M(_a)),f!==n&&(f=ja()),c=f,c===n&&(c=h,r.charCodeAt(h)===116?(f=Na,h++):(f=n,I===0&&M(Sa)),f!==n&&(f=$a()),c=f))),c}function Ia(c,f){function g(){return c.apply(this,arguments)||f.apply(this,arguments)}return g.desc=c.desc+" or "+f.desc,g}function Da(c,f){function g(){return c.apply(this,arguments)&&f.apply(this,arguments)}return g.desc=c.desc+" and "+f.desc,g}function Aa(c){function f(){return!c.apply(this,arguments)}return f.desc="not "+c.desc,f}function Fa(c){function f(){return c.apply(this,arguments)}return f.desc="("+c.desc+")",f}function Xn(c){return!0}Xn.desc="all flows";var Yn=[new RegExp("text/javascript"),new RegExp("application/x-javascript"),new RegExp("application/javascript"),new RegExp("text/css"),new RegExp("image/.*"),new RegExp("font/.*"),new RegExp("application/font.*")];function Jn(c){if(c.response){for(var f=wt.getContentType(c.response),g=Yn.length;g--;)if(Yn[g].test(f))return!0}return!1}Jn.desc="is asset";function La(c){c=new RegExp(c,"i");function f(g){return!0}return f.desc="body matches "+c,f}function Oa(c){c=new RegExp(c,"i");function f(g){return!0}return f.desc="body request matches "+c,f}function Pa(c){c=new RegExp(c,"i");function f(g){return!0}return f.desc="body response matches "+c,f}function Ma(c){function f(g){return g.response&&g.response.status_code===c}return f.desc="resp. code is "+c,f}function qa(c){c=new RegExp(c,"i");function f(g){return c.test(g.comment)}return f.desc="comment matches "+c,f}function Ha(c){c=new RegExp(c,"i");function f(g){return g.request&&(c.test(g.request.host)||c.test(g.request.pretty_host))}return f.desc="domain matches "+c,f}function Qn(c){return c.type==="dns"}Qn.desc="is a DNS Flow";function Va(c){c=new RegExp(c,"i");function f(g){return!!g.server_conn.address&&c.test(g.server_conn.address[0]+":"+g.server_conn.address[1])}return f.desc="destination address matches "+c,f}function Zn(c){return!!c.error}Zn.desc="has error";function Ua(c){c=new RegExp(c,"i");function f(g){return g.request&&dt.match_header(g.request,c)||g.response&&wt.match_header(g.response,c)}return f.desc="header matches "+c,f}function za(c){c=new RegExp(c,"i");function f(g){return g.request&&dt.match_header(g.request,c)}return f.desc="req. header matches "+c,f}function Ba(c){c=new RegExp(c,"i");function f(g){return g.response&&wt.match_header(g.response,c)}return f.desc="resp. header matches "+c,f}function er(c){return c.type==="http"}er.desc="is an HTTP Flow";function tr(c){return c.marked}tr.desc="is marked";function Wa(c){c=new RegExp(c,"i");function f(g){return c.test(g.marked)}return f.desc="marker matches "+c,f}function Ka(c){c=new RegExp(c,"i");function f(g){return g.request&&c.test(g.request.method)}return f.desc="method matches "+c,f}function sr(c){return c.request&&!c.response}sr.desc="has no response";function nr(c){return c.is_replay==="request"}nr.desc="request has been replayed";function rr(c){return c.is_replay==="response"}rr.desc="response has been replayed";function ir(c){return!!c.is_replay}ir.desc="flow has been replayed";function Ga(c){c=new RegExp(c,"i");function f(g){return!!g.client_conn.peername&&c.test(g.client_conn.peername[0]+":"+g.client_conn.peername[1])}return f.desc="source address matches "+c,f}function or(c){return!!c.response}or.desc="has response";function lr(c){return c.type==="tcp"}lr.desc="is a TCP Flow";function ar(c){return c.type==="udp"}ar.desc="is a UDP Flow";function Xa(c){c=new RegExp(c,"i");function f(g){return g.request&&c.test(dt.getContentType(g.request))}return f.desc="req. content type matches "+c,f}function Ya(c){c=new RegExp(c,"i");function f(g){return g.response&&c.test(wt.getContentType(g.response))}return f.desc="resp. content type matches "+c,f}function Ja(c){c=new RegExp(c,"i");function f(g){return g.request&&c.test(dt.getContentType(g.request))||g.response&&c.test(wt.getContentType(g.response))}return f.desc="content type matches "+c,f}function Qa(c){c=new RegExp(c,"i");function f(g){if(g.type==="dns"){const b=g.request?.questions[0];return b&&c.test(b.name)}return g.request&&c.test(dt.pretty_url(g.request))}return f.desc="url matches "+c,f}function cr(c){return!!c.websocket}if(cr.desc="is a Websocket Flow",Vt=a(),Vt!==n&&h===r.length)return Vt;throw Vt!==n&&h<r.length&&M({type:"end",description:"end of input"}),Ca(null,ps,Me<r.length?r.charAt(Me):null,Me<r.length?Un(Me,Me+1):Un(Me,Me))}return{SyntaxError:e,parse:t}}();class Ye extends R.Component{static xhr;static doc;constructor(e,t){super(e,t),this.state={doc:Ye.doc}}componentDidMount(){Ye.xhr||(Ye.xhr=ne("/filter-help").then(e=>e.json()),Ye.xhr.catch(()=>{Ye.xhr=null})),this.state.doc||Ye.xhr.then(e=>{Ye.doc=e,this.setState({doc:e})})}render(){const{doc:e}=this.state;return e?o.jsx("table",{className:"w-full text-xs",children:o.jsxs("tbody",{children:[e.commands.map(t=>o.jsxs("tr",{onClick:()=>this.props.selectHandler(t[0].split(" ")[0]+" "),className:"hover:bg-muted/50 cursor-pointer",children:[o.jsx("td",{className:"py-0.5 pr-2 font-mono text-primary whitespace-nowrap",children:t[0].replace(" "," ")}),o.jsx("td",{className:"py-0.5 text-muted-foreground",children:t[1]})]},t[1])),o.jsx("tr",{children:o.jsx("td",{colSpan:2,className:"pt-2",children:o.jsxs("a",{href:"https://mitmproxy.org/docs/latest/concepts-filters/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-primary hover:underline",children:[o.jsx(xi,{className:"h-3 w-3"}),"mitmproxy docs"]})})},"docs-link")]})}):o.jsx(Ds,{className:"h-4 w-4 animate-spin"})}}var cs=(s=>(s.SEARCH="search",s.HIGHLIGHT="tag",s.INTERCEPT="pause",s))(cs||{});const vp={search:id,tag:rd,pause:Jr};class mn extends R.Component{inputRef=Ae.createRef();constructor(e,t){super(e,t),this.state={value:this.props.value,focus:!1,mousefocus:!1},this.onChange=this.onChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.selectFilter=this.selectFilter.bind(this)}UNSAFE_componentWillReceiveProps(e){this.setState({value:e.value})}isValid(e){try{return e&&Dr.parse(e),!0}catch{return!1}}getDesc(){if(!this.state.value)return o.jsx(Ye,{selectHandler:this.selectFilter});try{return Dr.parse(this.state.value).desc}catch(e){return""+e}}onChange(e){const t=e.target.value;this.setState({value:t}),this.isValid(t)&&this.props.onChange(t)}onFocus(){this.setState({focus:!0})}onBlur(){this.setState({focus:!1})}onMouseEnter(){this.setState({mousefocus:!0})}onMouseLeave(){this.setState({mousefocus:!1})}onKeyDown(e){(e.key==="Escape"||e.key==="Enter")&&(this.blur(),this.setState({mousefocus:!1})),e.stopPropagation()}selectFilter(e){this.setState({value:e}),this.inputRef.current?.focus(),this.isValid(e)&&this.props.onChange(e)}blur(){this.inputRef.current?.blur()}select(){this.inputRef.current?.select()}render(){const{icon:e,color:t,placeholder:r}=this.props,{value:i,focus:n,mousefocus:l}=this.state,a=vp[e];return o.jsxs("div",{className:he("relative flex items-center my-1",{"ring-2 ring-red-500":!this.isValid(i)}),children:[o.jsx("span",{className:"flex items-center justify-center px-2 bg-muted border border-r-0 border-input rounded-l h-8",children:o.jsx(a,{className:"h-4 w-4",style:{color:t}})}),o.jsx("input",{type:"text",ref:this.inputRef,placeholder:r,className:"h-8 px-2 py-1 text-sm bg-background border border-input rounded-r focus:outline-none focus:ring-1 focus:ring-ring min-w-[120px]",value:i,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown}),(n||l)&&o.jsx("div",{className:"absolute top-full left-0 mt-1 z-50 w-64 p-3 bg-popover border border-border rounded-md shadow-md",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:o.jsx("div",{className:"text-sm text-popover-foreground",children:this.getDesc()})})]})}}jl.title="Flow List";function jl(){const s=j.c(2);let e;s[0]===Symbol.for("react.memo_cache_sentinel")?(e=o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wp,{}),o.jsx(jp,{})]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Find"})]}),s[0]=e):e=s[0];let t;return s[1]===Symbol.for("react.memo_cache_sentinel")?(t=o.jsxs("div",{className:"flex gap-6 p-2",children:[e,o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bp,{}),o.jsx(Sp,{})]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Intercept"})]})]}),s[1]=t):t=s[1],t}function bp(){const s=j.c(5),e=Y(),r=P(yp)||"";let i;s[0]!==e?(i=l=>e(Us("intercept",l)),s[0]=e,s[1]=i):i=s[1];let n;return s[2]!==r||s[3]!==i?(n=o.jsx(mn,{value:r,placeholder:"Intercept",icon:cs.INTERCEPT,color:"hsl(208, 56%, 53%)",onChange:i}),s[2]=r,s[3]=i,s[4]=n):n=s[4],n}function yp(s){return s.options.intercept}function wp(){const s=j.c(5),e=Y(),t=P(_p);let r;s[0]!==e?(r=n=>e(qi(n)),s[0]=e,s[1]=r):r=s[1];let i;return s[2]!==r||s[3]!==t?(i=o.jsx(mn,{value:t,placeholder:"Search",icon:cs.SEARCH,color:"currentColor",onChange:r}),s[2]=r,s[3]=t,s[4]=i):i=s[4],i}function _p(s){return s.ui.filter[Ne.Search]}function jp(){const s=j.c(5),e=Y(),t=P(Np);let r;s[0]!==e?(r=n=>e(Hi(n)),s[0]=e,s[1]=r):r=s[1];let i;return s[2]!==r||s[3]!==t?(i=o.jsx(mn,{value:t,placeholder:"Highlight",icon:cs.HIGHLIGHT,color:"hsl(48, 100%, 50%)",onChange:r}),s[2]=r,s[3]=t,s[4]=i):i=s[4],i}function Np(s){return s.ui.filter[Ne.Highlight]}function Sp(){const s=j.c(2),e=Y();let t;return s[0]!==e?(t=o.jsx(ve,{title:"[a]ccept all",icon:od,onClick:()=>e(Vi()),children:"Resume All"}),s[0]=e,s[1]=t):t=s[1],t}function pn(s){const e=j.c(6),{value:t,onChange:r,children:i}=s;let n;e[0]!==r||e[1]!==t?(n=o.jsx("input",{type:"checkbox",checked:t,onChange:r,className:"h-4 w-4 rounded border-input"}),e[0]=r,e[1]=t,e[2]=n):n=e[2];let l;return e[3]!==i||e[4]!==n?(l=o.jsx("div",{className:"flex items-center text-sm",children:o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n,i]})}),e[3]=i,e[4]=n,e[5]=l):l=e[5],l}function bs(s){const e=j.c(10),{name:t,children:r}=s,i=Y();let n;e[0]!==t?(n=m=>m.options[t],e[0]=t,e[1]=n):n=e[1];const l=P(n),a=!!l;let d;e[2]!==i||e[3]!==t||e[4]!==l?(d=()=>i(Us(t,!l)),e[2]=i,e[3]=t,e[4]=l,e[5]=d):d=e[5];let u;return e[6]!==r||e[7]!==a||e[8]!==d?(u=o.jsx(pn,{value:a,onChange:d,children:r}),e[6]=r,e[7]=a,e[8]=d,e[9]=u):u=e[9],u}function $p(){const s=j.c(5),e=Y(),t=P(Cp);let r;s[0]!==e?(r=()=>e(ns()),s[0]=e,s[1]=r):r=s[1];let i;return s[2]!==r||s[3]!==t?(i=o.jsx(pn,{value:t,onChange:r,children:"Display Event Log"}),s[2]=r,s[3]=t,s[4]=i):i=s[4],i}function Cp(s){return s.eventLog.visible}function kp(){const s=j.c(5),e=Y(),t=P(Ep);let r;s[0]!==e?(r=()=>e(oo()),s[0]=e,s[1]=r):r=s[1];let i;return s[2]!==r||s[3]!==t?(i=o.jsx(pn,{value:t,onChange:r,children:"Display Command Bar"}),s[2]=r,s[3]=t,s[4]=i):i=s[4],i}function Ep(s){return s.commandBar.visible}function ys(s){const e=j.c(5),{children:t,resource:r}=s,i=`https://docs.mitmproxy.org/stable/${r}`;let n;e[0]!==t?(n=t||o.jsx(ld,{className:"h-4 w-4 inline-block"}),e[0]=t,e[1]=n):n=e[1];let l;return e[2]!==n||e[3]!==i?(l=o.jsx("a",{target:"_blank",href:i,rel:"noreferrer",children:n}),e[2]=n,e[3]=i,e[4]=l):l=e[4],l}Nl.title="Options";function Nl(){const s=j.c(16),e=Y(),t=Tp;let r;s[0]!==e?(r=()=>e(t()),s[0]=e,s[1]=r):r=s[1];let i;s[2]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsx("sup",{children:"alpha"}),s[2]=i):i=s[2];let n;s[3]!==r?(n=o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(ve,{title:"Open Options",icon:ai,onClick:r,children:["Edit Options ",i]})}),s[3]=r,s[4]=n):n=s[4];let l;s[5]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx("div",{className:"text-xs text-muted-foreground",children:"Options Editor"}),s[5]=l):l=s[5];let a;s[6]!==n?(a=o.jsxs("div",{className:"flex flex-col gap-1",children:[n,l]}),s[6]=n,s[7]=a):a=s[7];let d;s[8]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsxs(bs,{name:"anticache",children:["Strip cache headers"," ",o.jsx(ys,{resource:"overview/features/#anticache"})]}),s[8]=d):d=s[8];let u;s[9]===Symbol.for("react.memo_cache_sentinel")?(u=o.jsxs(bs,{name:"showhost",children:["Use host header for display"," ",o.jsx(ys,{resource:"concepts/options/#showhost"})]}),s[9]=u):u=s[9];let m;s[10]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[d,u,o.jsxs(bs,{name:"ssl_insecure",children:["Don't verify server certificates"," ",o.jsx(ys,{resource:"concepts/options/#ssl_insecure"})]})]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Quick Options"})]}),s[10]=m):m=s[10];let p;s[11]!==a?(p=o.jsxs(Nt,{children:[a,m]}),s[11]=a,s[12]=p):p=s[12];let x;s[13]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx($p,{}),o.jsx(kp,{})]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"View Options"})]}),s[13]=x):x=s[13];let v;return s[14]!==p?(v=o.jsxs("div",{className:"flex gap-6 p-2",children:[p,x]}),s[14]=p,s[15]=v):v=s[15],v}function Tp(){return Kd("OptionModal")}const Et=async(s,e)=>{const t=(async()=>{const r=await Qt("export",e,`@${s.id}`);if(r.value)return r.value;throw r.error?r.error:r})();try{await Si(t)}catch(r){alert(r)}};Sl.title="Flow";function Sl(){const s=j.c(63),e=Y(),t=P(Rp),r=t[0];let i;s[0]!==t?(i=t.some(Ls),s[0]=t,s[1]=i):i=s[1];const n=i;if(t.length===0){let J;return s[2]===Symbol.for("react.memo_cache_sentinel")?(J=o.jsx("div",{}),s[2]=J):J=s[2],J}let l;s[3]!==e||s[4]!==t?(l=()=>e(Ms(t)),s[3]=e,s[4]=t,s[5]=l):l=s[5];let a;s[6]!==t?(a=t.some(Fs),s[6]=t,s[7]=a):a=s[7];const d=!a;let u;s[8]!==l||s[9]!==d?(u=o.jsx(ve,{title:"[r]eplay flow",icon:ts,onClick:l,disabled:d,children:"Replay"}),s[8]=l,s[9]=d,s[10]=u):u=s[10];let m;s[11]!==e||s[12]!==t?(m=o.jsx(ve,{title:"[D]uplicate flow",icon:ad,onClick:()=>e(Bi(t)),children:"Duplicate"}),s[11]=e,s[12]=t,s[13]=m):m=s[13];let p;s[14]!==t?(p=t.some(Ii),s[14]=t,s[15]=p):p=s[15];const x=!p;let v;s[16]!==e||s[17]!==t?(v=()=>e(Wi(t)),s[16]=e,s[17]=t,s[18]=v):v=s[18];let y;s[19]!==x||s[20]!==v?(y=o.jsx(ve,{disabled:x,title:"revert changes to flow [V]",icon:cd,onClick:v,children:"Revert"}),s[19]=x,s[20]=v,s[21]=y):y=s[21];let w;s[22]!==e||s[23]!==t?(w=o.jsx(ve,{title:"[d]elete flow",icon:As,onClick:()=>{e(zi(t))},children:"Delete"}),s[22]=e,s[23]=t,s[24]=w):w=s[24];let N;s[25]!==t?(N=o.jsx(qp,{flows:t}),s[25]=t,s[26]=N):N=s[26];let S;s[27]!==w||s[28]!==N||s[29]!==u||s[30]!==m||s[31]!==y?(S=o.jsxs("div",{className:"flex items-center gap-2",children:[u,m,y,w,N]}),s[27]=w,s[28]=N,s[29]=u,s[30]=m,s[31]=y,s[32]=S):S=s[32];let $;s[33]===Symbol.for("react.memo_cache_sentinel")?($=o.jsx("div",{className:"text-xs text-muted-foreground",children:"Flow Modification"}),s[33]=$):$=s[33];let k;s[34]!==S?(k=o.jsx(Nt,{children:o.jsxs("div",{className:"flex flex-col gap-1",children:[S,$]})}),s[34]=S,s[35]=k):k=s[35];let T;s[36]!==r?(T=o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ip,{flow:r}),o.jsx(Lp,{flow:r})]}),s[36]=r,s[37]=T):T=s[37];let D;s[38]===Symbol.for("react.memo_cache_sentinel")?(D=o.jsx("div",{className:"text-xs text-muted-foreground",children:"Export"}),s[38]=D):D=s[38];let L;s[39]!==T?(L=o.jsxs("div",{className:"flex flex-col gap-1",children:[T,D]}),s[39]=T,s[40]=L):L=s[40];const q=!n;let O;s[41]!==e||s[42]!==t?(O=()=>e(Ps(t)),s[41]=e,s[42]=t,s[43]=O):O=s[43];let V;s[44]!==q||s[45]!==O?(V=o.jsx(ve,{disabled:q,title:"[a]ccept intercepted flow",icon:ei,onClick:O,children:"Resume"}),s[44]=q,s[45]=O,s[46]=V):V=s[46];const z=!n;let K;s[47]!==e||s[48]!==t?(K=()=>e(Ui(t)),s[47]=e,s[48]=t,s[49]=K):K=s[49];let B;s[50]!==z||s[51]!==K?(B=o.jsx(ve,{disabled:z,title:"kill intercepted flow [x]",icon:mt,onClick:K,children:"Abort"}),s[50]=z,s[51]=K,s[52]=B):B=s[52];let W;s[53]!==V||s[54]!==B?(W=o.jsxs("div",{className:"flex items-center gap-2",children:[V,B]}),s[53]=V,s[54]=B,s[55]=W):W=s[55];let te;s[56]===Symbol.for("react.memo_cache_sentinel")?(te=o.jsx("div",{className:"text-xs text-muted-foreground",children:"Interception"}),s[56]=te):te=s[56];let X;s[57]!==W?(X=o.jsx(Nt,{children:o.jsxs("div",{className:"flex flex-col gap-1",children:[W,te]})}),s[57]=W,s[58]=X):X=s[58];let Q;return s[59]!==k||s[60]!==L||s[61]!==X?(Q=o.jsxs("div",{className:"flex gap-6 p-2",children:[k,L,X]}),s[59]=k,s[60]=L,s[61]=X,s[62]=Q):Q=s[62],Q}function Rp(s){return s.flows.selected}const Gt=s=>{const e=window.open(s,"_blank","noopener,noreferrer");e&&(e.opener=null)};function Ip(s){const e=j.c(23),{flow:t}=s,r=P(Fp);if(t.type!=="http"){let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsx(ve,{icon:yt,onClick:Ap,disabled:!0,children:"Download"}),e[0]=i):i=e[0],i}if(t.request.contentLength&&!t.response?.contentLength){let i;e[1]!==t?(i=()=>Gt(ke.getContentURL(t,t.request)),e[1]=t,e[2]=i):i=e[2];const n=!r;let l;return e[3]!==i||e[4]!==n?(l=o.jsx(ve,{icon:yt,onClick:i,disabled:n,children:"Download"}),e[3]=i,e[4]=n,e[5]=l):l=e[5],l}if(t.response){const i=t.response;if(!t.request.contentLength&&t.response.contentLength){let n;e[6]!==t||e[7]!==i?(n=()=>Gt(ke.getContentURL(t,i)),e[6]=t,e[7]=i,e[8]=n):n=e[8];const l=!r;let a;return e[9]!==n||e[10]!==l?(a=o.jsx(ve,{icon:yt,onClick:n,disabled:l,children:"Download"}),e[9]=n,e[10]=l,e[11]=a):a=e[11],a}if(t.request.contentLength&&t.response.contentLength){if(!r){let m;return e[12]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsx(ve,{icon:yt,onClick:Dp,disabled:!0,children:"Download"}),e[12]=m):m=e[12],m}let n,l;e[13]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(yt,{className:"h-4 w-4"}),"Download"]}),l={placement:"bottom-start"},e[13]=n,e[14]=l):(n=e[13],l=e[14]);let a;e[15]!==t?(a=o.jsx(He,{onClick:()=>Gt(ke.getContentURL(t,t.request)),children:"Download request"}),e[15]=t,e[16]=a):a=e[16];let d;e[17]!==t||e[18]!==i?(d=o.jsx(He,{onClick:()=>Gt(ke.getContentURL(t,i)),children:"Download response"}),e[17]=t,e[18]=i,e[19]=d):d=e[19];let u;return e[20]!==a||e[21]!==d?(u=o.jsxs(os,{text:n,options:l,children:[a,d]}),e[20]=a,e[21]=d,e[22]=u):u=e[22],u}}return null}function Dp(){}function Ap(){return 0}function Fp(s){return s.flows.selected.length===1}function Lp(s){const e=j.c(19),{flow:t}=s,r=P(Pp);if(t.type!=="http"||!r){let x;return e[0]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsx(ve,{title:"Export flow.",icon:js,onClick:Op,disabled:!0,children:"Export"}),e[0]=x):x=e[0],x}let i,n;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(js,{className:"h-4 w-4"}),"Export"]}),n={placement:"bottom-start"},e[1]=i,e[2]=n):(i=e[1],n=e[2]);let l;e[3]!==t?(l=o.jsx(He,{onClick:()=>Et(t,"raw_request"),children:"Copy raw request"}),e[3]=t,e[4]=l):l=e[4];let a;e[5]!==t?(a=o.jsx(He,{onClick:()=>Et(t,"raw_response"),children:"Copy raw response"}),e[5]=t,e[6]=a):a=e[6];let d;e[7]!==t?(d=o.jsx(He,{onClick:()=>Et(t,"raw"),children:"Copy raw request and response"}),e[7]=t,e[8]=d):d=e[8];let u;e[9]!==t?(u=o.jsx(He,{onClick:()=>Et(t,"curl"),children:"Copy as cURL"}),e[9]=t,e[10]=u):u=e[10];let m;e[11]!==t?(m=o.jsx(He,{onClick:()=>Et(t,"httpie"),children:"Copy as HTTPie"}),e[11]=t,e[12]=m):m=e[12];let p;return e[13]!==l||e[14]!==a||e[15]!==d||e[16]!==u||e[17]!==m?(p=o.jsxs(os,{text:i,options:n,children:[l,a,d,u,m]}),e[13]=l,e[14]=a,e[15]=d,e[16]=u,e[17]=m,e[18]=p):p=e[18],p}function Op(){}function Pp(s){return s.flows.selected.length===1}const Mp={":red_circle:":"🔴",":orange_circle:":"🟠",":yellow_circle:":"🟡",":green_circle:":"🟢",":large_blue_circle:":"🔵",":purple_circle:":"🟣",":brown_circle:":"🟤"};function qp(s){const e=j.c(5),{flows:t}=s,r=Y();let i,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(dd,{className:"h-4 w-4"}),"Mark"]}),n={placement:"bottom-start"},e[0]=i,e[1]=n):(i=e[0],n=e[1]);let l;return e[2]!==r||e[3]!==t?(l=o.jsxs(os,{text:i,options:n,children:[o.jsx(He,{onClick:()=>r(br(t,"")),children:"⚪ (no marker)"}),Object.entries(Mp).map(a=>{const[d,u]=a;return o.jsxs(He,{onClick:()=>r(br(t,d)),children:[u," ",d.replace(/[:_]/g," ")]},d)})]}),e[2]=r,e[3]=t,e[4]=l):l=e[4],l}const Ar={[Se.Capture]:_l,[Se.FlowList]:jl,[Se.Options]:Nl,[Se.Flow]:Sl};function Hp(){const s=j.c(28),e=Y(),t=P(Up),r=P(Vp),[i,n]=R.useState(!1);let l;s[0]!==r.length?(l=[Se.Capture,Se.FlowList,Se.Options],r.length>0&&l.push(Se.Flow),s[0]=r.length,s[1]=l):l=s[1];let a;s[2]!==t||s[3]!==e||s[4]!==r.length||s[5]!==i?(a=()=>{r.length>0&&!i?(e(Yt(Se.Flow)),n(!0)):r.length===0&&(i&&n(!1),t===Se.Flow&&e(Yt(Se.FlowList)))},s[2]=t,s[3]=e,s[4]=r.length,s[5]=i,s[6]=a):a=s[6];let d;s[7]!==t||s[8]!==r||s[9]!==i?(d=[r,i,t],s[7]=t,s[8]=r,s[9]=i,s[10]=d):d=s[10],R.useEffect(a,d);let u;s[11]!==e?(u=function(D,L){L.preventDefault(),e(Yt(D))},s[11]=e,s[12]=u):u=s[12];const m=u,p=Ar[t];let x;s[13]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsx(cp,{}),s[13]=x):x=s[13];let v;s[14]!==t||s[15]!==l||s[16]!==m?(v=o.jsx("div",{className:"flex items-center gap-1 border-l border-border pl-2 ml-1",children:l.map(T=>o.jsx("button",{className:H("px-3 py-1.5 text-sm font-medium rounded-md transition-colors","hover:bg-accent hover:text-accent-foreground",T===t?"bg-accent text-accent-foreground":"text-muted-foreground"),onClick:D=>m(T,D),children:Ar[T].title},T))}),s[14]=t,s[15]=l,s[16]=m,s[17]=v):v=s[17];let y,w;s[18]===Symbol.for("react.memo_cache_sentinel")?(y=o.jsx("div",{className:"flex-1"}),w=o.jsx(xp,{}),s[18]=y,s[19]=w):(y=s[18],w=s[19]);let N;s[20]===Symbol.for("react.memo_cache_sentinel")?(N=o.jsx(Nt,{children:o.jsx(mp,{})}),s[20]=N):N=s[20];let S;s[21]!==v?(S=o.jsxs("nav",{className:"flex items-center h-10 px-2 gap-1",children:[x,v,y,w,N]}),s[21]=v,s[22]=S):S=s[22];let $;s[23]!==p?($=o.jsx("div",{className:"px-2 py-1.5 border-t border-border",children:o.jsx(p,{})}),s[23]=p,s[24]=$):$=s[24];let k;return s[25]!==S||s[26]!==$?(k=o.jsxs("header",{className:"flex-shrink-0 border-b border-border bg-card",children:[S,$]}),s[25]=S,s[26]=$,s[27]=k):k=s[27],k}function Vp(s){return s.flows.selected}function Up(s){return s.ui.tabs.current}const ws=function(){function s(r,i){function n(){this.constructor=r}n.prototype=i.prototype,r.prototype=new n}function e(r,i,n,l){this.message=r,this.expected=i,this.found=n,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,e)}s(e,Error);function t(r){var i=arguments.length>1?arguments[1]:{},n={},l={Expr:le},a=le,d=function(_,C){return[_,...C]},u=function(_){return[_]},m=function(){return""},p={type:"other",description:"string"},x='"',v={type:"literal",value:'"',description:'"\\""'},y=function(_){return _.join("")},w="'",N={type:"literal",value:"'",description:`"'"`},S=/^["\\]/,$={type:"class",value:'["\\\\]',description:'["\\\\]'},k={type:"any",description:"any character"},T=function(_){return _},D="\\",L={type:"literal",value:"\\",description:'"\\\\"'},q=/^['\\]/,O={type:"class",value:"['\\\\]",description:"['\\\\]"},V=/^['"\\]/,z={type:"class",value:`['"\\\\]`,description:`['"\\\\]`},K="n",B={type:"literal",value:"n",description:'"n"'},W=function(){return`
`},te="r",X={type:"literal",value:"r",description:'"r"'},Q=function(){return"\r"},J="t",ie={type:"literal",value:"t",description:'"t"'},ee=function(){return"	"},fe={type:"other",description:"whitespace"},be=/^[ \t\n\r]/,Be={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},ye={type:"other",description:"control character"},Je=/^[|&!()~"]/,we={type:"class",value:'[|&!()~"]',description:'[|&!()~"]'},E=0,me=[{line:1,column:1,seenCR:!1}],ae=0,_e=[],F=0,oe;if("startRule"in i){if(!(i.startRule in l))throw new Error(`Can't start parsing from rule "`+i.startRule+'".');a=l[i.startRule]}function Re(_){var C=me[_],A,U;if(C)return C;for(A=_-1;!me[A];)A--;for(C=me[A],C={line:C.line,column:C.column,seenCR:C.seenCR};A<_;)U=r.charAt(A),U===`
`?(C.seenCR||C.line++,C.column=1,C.seenCR=!1):U==="\r"||U==="\u2028"||U==="\u2029"?(C.line++,C.column=1,C.seenCR=!0):(C.column++,C.seenCR=!1),A++;return me[_]=C,C}function We(_,C){var A=Re(_),U=Re(C);return{start:{offset:_,line:A.line,column:A.column},end:{offset:C,line:U.line,column:U.column}}}function Z(_){E<ae||(E>ae&&(ae=E,_e=[]),_e.push(_))}function Qe(_,C,A,U){function Pt(Ie){var Fe=1;for(Ie.sort(function(xt,Ke){return xt.description<Ke.description?-1:xt.description>Ke.description?1:0});Fe<Ie.length;)Ie[Fe-1]===Ie[Fe]?Ie.splice(Fe,1):Fe++}function us(Ie,Fe){function xt(qt){function gt(Le){return Le.charCodeAt(0).toString(16).toUpperCase()}return qt.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(Le){return"\\x0"+gt(Le)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(Le){return"\\x"+gt(Le)}).replace(/[\u0100-\u0FFF]/g,function(Le){return"\\u0"+gt(Le)}).replace(/[\u1000-\uFFFF]/g,function(Le){return"\\u"+gt(Le)})}var Ke=new Array(Ie.length),St,Mt,ot;for(ot=0;ot<Ie.length;ot++)Ke[ot]=Ie[ot].description;return St=Ie.length>1?Ke.slice(0,-1).join(", ")+" or "+Ke[Ie.length-1]:Ke[0],Mt=Fe?'"'+xt(Fe)+'"':"end of input","Expected "+St+" but "+Mt+" found."}return C!==null&&Pt(C),new e(us(C,A),C,A,U)}function le(){var _,C,A,U;if(_=E,C=pe(),C!==n){if(A=[],U=Ze(),U!==n)for(;U!==n;)A.push(U),U=Ze();else A=n;A!==n?(U=le(),U!==n?(C=d(C,U),_=C):(E=_,_=n)):(E=_,_=n)}else E=_,_=n;if(_===n&&(_=E,C=pe(),C!==n&&(C=u(C)),_=C,_===n)){for(_=E,C=[],A=Ze();A!==n;)C.push(A),A=Ze();C!==n&&(C=m()),_=C}return _}function pe(){var _,C,A,U;if(F++,_=E,r.charCodeAt(E)===34?(C=x,E++):(C=n,F===0&&Z(v)),C!==n){for(A=[],U=je();U!==n;)A.push(U),U=je();A!==n?(r.charCodeAt(E)===34?(U=x,E++):(U=n,F===0&&Z(v)),U!==n?(C=y(A),_=C):(E=_,_=n)):(E=_,_=n)}else E=_,_=n;if(_===n){if(_=E,r.charCodeAt(E)===39?(C=w,E++):(C=n,F===0&&Z(N)),C!==n){for(A=[],U=Ce();U!==n;)A.push(U),U=Ce();A!==n?(r.charCodeAt(E)===39?(U=w,E++):(U=n,F===0&&Z(N)),U!==n?(C=y(A),_=C):(E=_,_=n)):(E=_,_=n)}else E=_,_=n;if(_===n){if(_=E,C=E,F++,A=ds(),F--,A===n?C=void 0:(E=C,C=n),C!==n){if(A=[],U=it(),U!==n)for(;U!==n;)A.push(U),U=it();else A=n;A!==n?(C=y(A),_=C):(E=_,_=n)}else E=_,_=n;if(_===n){if(_=E,r.charCodeAt(E)===34?(C=x,E++):(C=n,F===0&&Z(v)),C!==n){for(A=[],U=je();U!==n;)A.push(U),U=je();A!==n?(C=y(A),_=C):(E=_,_=n)}else E=_,_=n;if(_===n)if(_=E,r.charCodeAt(E)===39?(C=w,E++):(C=n,F===0&&Z(N)),C!==n){for(A=[],U=Ce();U!==n;)A.push(U),U=Ce();A!==n?(C=y(A),_=C):(E=_,_=n)}else E=_,_=n}}}return F--,_===n&&(C=n,F===0&&Z(p)),_}function je(){var _,C,A;return _=E,C=E,F++,S.test(r.charAt(E))?(A=r.charAt(E),E++):(A=n,F===0&&Z($)),F--,A===n?C=void 0:(E=C,C=n),C!==n?(r.length>E?(A=r.charAt(E),E++):(A=n,F===0&&Z(k)),A!==n?(C=T(A),_=C):(E=_,_=n)):(E=_,_=n),_===n&&(_=E,r.charCodeAt(E)===92?(C=D,E++):(C=n,F===0&&Z(L)),C!==n?(A=Ot(),A!==n?(C=T(A),_=C):(E=_,_=n)):(E=_,_=n)),_}function Ce(){var _,C,A;return _=E,C=E,F++,q.test(r.charAt(E))?(A=r.charAt(E),E++):(A=n,F===0&&Z(O)),F--,A===n?C=void 0:(E=C,C=n),C!==n?(r.length>E?(A=r.charAt(E),E++):(A=n,F===0&&Z(k)),A!==n?(C=T(A),_=C):(E=_,_=n)):(E=_,_=n),_===n&&(_=E,r.charCodeAt(E)===92?(C=D,E++):(C=n,F===0&&Z(L)),C!==n?(A=Ot(),A!==n?(C=T(A),_=C):(E=_,_=n)):(E=_,_=n)),_}function it(){var _,C,A;return _=E,C=E,F++,A=Ze(),F--,A===n?C=void 0:(E=C,C=n),C!==n?(r.length>E?(A=r.charAt(E),E++):(A=n,F===0&&Z(k)),A!==n?(C=T(A),_=C):(E=_,_=n)):(E=_,_=n),_}function Ot(){var _,C;return V.test(r.charAt(E))?(_=r.charAt(E),E++):(_=n,F===0&&Z(z)),_===n&&(_=E,r.charCodeAt(E)===110?(C=K,E++):(C=n,F===0&&Z(B)),C!==n&&(C=W()),_=C,_===n&&(_=E,r.charCodeAt(E)===114?(C=te,E++):(C=n,F===0&&Z(X)),C!==n&&(C=Q()),_=C,_===n&&(_=E,r.charCodeAt(E)===116?(C=J,E++):(C=n,F===0&&Z(ie)),C!==n&&(C=ee()),_=C))),_}function Ze(){var _;return F++,be.test(r.charAt(E))?(_=r.charAt(E),E++):(_=n,F===0&&Z(Be)),F--,_===n&&F===0&&Z(fe),_}function ds(){var _;return F++,Je.test(r.charAt(E))?(_=r.charAt(E),E++):(_=n,F===0&&Z(we)),F--,_===n&&F===0&&Z(ye),_}if(oe=a(),oe!==n&&E===r.length)return oe;throw oe!==n&&E<r.length&&Z({type:"end",description:"end of input"}),Qe(null,_e,ae<r.length?r.charAt(ae):null,ae<r.length?We(ae,ae+1):We(ae,ae))}return{SyntaxError:e,parse:t}}();function _s(s,e=""){if(!s)return[];const t=[];for(const r of Object.keys(s))r.startsWith(e)&&t.push(r);return t}function zp(s){const e=j.c(6),{results:t}=s,r=R.useRef(null);let i,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{r&&r.current.addEventListener("DOMNodeInserted",Wp)},n=[],e[0]=i,e[1]=n):(i=e[0],n=e[1]),R.useEffect(i,n);let l;e[2]!==t?(l=t.map(Bp),e[2]=t,e[3]=l):l=e[3];let a;return e[4]!==l?(a=o.jsx("div",{className:"max-h-40 overflow-auto text-sm font-mono p-2 bg-muted/50 rounded",ref:r,children:l}),e[4]=l,e[5]=a):a=e[5],a}function Bp(s,e){return o.jsxs("div",{className:"mb-2",children:[o.jsx("div",{className:"text-primary",children:o.jsxs("strong",{children:["$ ",s.command]})}),o.jsx("div",{className:"text-muted-foreground whitespace-pre-wrap",children:s.result})]},e)}function Wp(s){const e=s.currentTarget;e.scroll({top:e.scrollHeight,behavior:"auto"})}function Kp(s){const e=j.c(19),{nextArgs:t,currentArg:r,help:i,description:n,availableCommands:l}=s;let a;if(e[0]!==r||e[1]!==t){a=[];for(let w=0;w<t.length;w++){if(w==r){a.push(o.jsx("mark",{children:t[w]},w));continue}a.push(o.jsxs("span",{children:[t[w]," "]},w))}e[0]=r,e[1]=t,e[2]=a}else a=e[2];let d;e[3]!==a?(d=a.length>0&&o.jsxs("div",{children:[o.jsx("strong",{className:"text-foreground",children:"Argument suggestion:"})," ",o.jsx("span",{className:"font-mono",children:a})]}),e[3]=a,e[4]=d):d=e[4];let u;e[5]!==i?(u=i?.includes("->")&&o.jsxs("div",{children:[o.jsx("strong",{className:"text-foreground",children:"Signature help: "}),o.jsx("span",{className:"font-mono text-muted-foreground",children:i})]}),e[5]=i,e[6]=u):u=e[6];let m;e[7]!==n?(m=n&&o.jsxs("div",{className:"text-muted-foreground",children:["# ",n]}),e[7]=n,e[8]=m):m=e[8];let p;e[9]===Symbol.for("react.memo_cache_sentinel")?(p=o.jsx("strong",{className:"text-foreground",children:"Available Commands: "}),e[9]=p):p=e[9];let x;e[10]!==l?(x=JSON.stringify(l),e[10]=l,e[11]=x):x=e[11];let v;e[12]!==x?(v=o.jsxs("div",{children:[p,o.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1 max-h-20 overflow-auto",children:x})]}),e[12]=x,e[13]=v):v=e[13];let y;return e[14]!==d||e[15]!==u||e[16]!==m||e[17]!==v?(y=o.jsx("div",{className:"relative mb-2 p-3 bg-popover border border-border rounded-md shadow-md text-sm",children:o.jsxs("div",{className:"space-y-1",children:[d,u,m,v]})}),e[14]=d,e[15]=u,e[16]=m,e[17]=v,e[18]=y):y=e[18],y}function Gp(){const s=j.c(44),[e,t]=R.useState(""),[r,i]=R.useState(""),[n,l]=R.useState(0);let a;s[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],s[0]=a):a=s[0];const[d,u]=R.useState(a);let m;s[1]===Symbol.for("react.memo_cache_sentinel")?(m=[],s[1]=m):m=s[1];const[p,x]=R.useState(m);let v;s[2]===Symbol.for("react.memo_cache_sentinel")?(v={},s[2]=v):v=s[2];const[y,w]=R.useState(v);let N;s[3]===Symbol.for("react.memo_cache_sentinel")?(N=[],s[3]=N):N=s[3];const[S,$]=R.useState(N),[k,T]=R.useState(0),[D,L]=R.useState(""),[q,O]=R.useState("");let V;s[4]===Symbol.for("react.memo_cache_sentinel")?(V=[],s[4]=V):V=s[4];const[z,K]=R.useState(V);let B;s[5]===Symbol.for("react.memo_cache_sentinel")?(B=[],s[5]=B):B=s[5];const[W,te]=R.useState(B),[X,Q]=R.useState(void 0);let J,ie;s[6]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{ne("/commands",{method:"GET"}).then(eh).then(le=>{w(le),u(_s(le)),x(Object.keys(le))}).catch(Zp)},ie=[],s[6]=J,s[7]=ie):(J=s[6],ie=s[7]),R.useEffect(J,ie);let ee,fe;s[8]===Symbol.for("react.memo_cache_sentinel")?(ee=()=>{Qt("commands.history.get").then(le=>{te(le.value)}).catch(Qp)},fe=[],s[8]=ee,s[9]=fe):(ee=s[8],fe=s[9]),R.useEffect(ee,fe);let be;s[10]!==y?(be=(le,pe)=>{const je=ws.parse(pe),Ce=ws.parse(le);L(y[je[0]]?.signature_help),O(y[je[0]]?.help||""),u(_s(y,Ce[0])),x(_s(y,je[0]));const it=y[je[0]]?.parameters.map(Jp);it&&($([je[0],...it]),T(je.length-1))},s[10]=y,s[11]=be):be=s[11];const Be=be;let ye;s[12]===Symbol.for("react.memo_cache_sentinel")?(ye=le=>{t(le.target.value),i(le.target.value),l(0)},s[12]=ye):ye=s[12];const Je=ye;let we;s[13]!==p||s[14]!==d||s[15]!==n||s[16]!==X||s[17]!==W||s[18]!==e||s[19]!==z?(we=le=>{if(le.key==="Enter"){const[pe,...je]=ws.parse(e);te([...W,e]),Qt("commands.history.add",e).catch(Yp),ne.post(`/commands/${pe}`,{arguments:je}).then(Xp).then(Ce=>{Q(void 0),$([]),K([...z,{command:e,result:JSON.stringify(Ce.value||Ce.error)}])}).catch(Ce=>{Q(void 0),$([]),K([...z,{command:e,result:Ce.toString()}])}),L(""),O(""),t(""),i(""),l(0),u(p)}if(le.key==="ArrowUp"){let pe;X===void 0?pe=W.length-1:pe=Math.max(0,X-1),t(W[pe]),i(W[pe]),Q(pe)}if(le.key==="ArrowDown"){if(X===void 0)return;if(X==W.length-1)t(""),i(""),Q(void 0);else{const pe=X+1;t(W[pe]),i(W[pe]),Q(pe)}}le.key==="Tab"&&(t(d[n]),l((n+1)%d.length),le.preventDefault()),le.stopPropagation()},s[13]=p,s[14]=d,s[15]=n,s[16]=X,s[17]=W,s[18]=e,s[19]=z,s[20]=we):we=s[20];const E=we;let me;s[21]!==y||s[22]!==e||s[23]!==r||s[24]!==Be?(me=le=>{if(!e){x(Object.keys(y));return}Be(r,e),le.stopPropagation()},s[21]=y,s[22]=e,s[23]=r,s[24]=Be,s[25]=me):me=s[25];const ae=me;let _e;s[26]===Symbol.for("react.memo_cache_sentinel")?(_e=o.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Command Result"}),s[26]=_e):_e=s[26];let F;s[27]!==z?(F=o.jsx(zp,{results:z}),s[27]=z,s[28]=F):F=s[28];let oe;s[29]!==p||s[30]!==k||s[31]!==q||s[32]!==S||s[33]!==D?(oe=o.jsx(Kp,{nextArgs:S,currentArg:k,help:D,description:q,availableCommands:p}),s[29]=p,s[30]=k,s[31]=q,s[32]=S,s[33]=D,s[34]=oe):oe=s[34];let Re;s[35]===Symbol.for("react.memo_cache_sentinel")?(Re=o.jsx("span",{className:"flex items-center justify-center px-2 bg-muted border border-r-0 border-input rounded-l h-8",children:o.jsx(ud,{className:"h-4 w-4"})}),s[35]=Re):Re=s[35];const We=e||"";let Z;s[36]!==E||s[37]!==ae||s[38]!==We?(Z=o.jsxs("div",{className:"flex items-center",children:[Re,o.jsx("input",{type:"text",placeholder:"Enter command",className:"h-8 flex-1 px-2 py-1 text-sm bg-background border border-input rounded-r focus:outline-none focus:ring-1 focus:ring-ring",value:We,onChange:Je,onKeyDown:E,onKeyUp:ae})]}),s[36]=E,s[37]=ae,s[38]=We,s[39]=Z):Z=s[39];let Qe;return s[40]!==F||s[41]!==oe||s[42]!==Z?(Qe=o.jsxs("div",{className:"p-2 border-t border-border bg-background",children:[_e,F,oe,Z]}),s[40]=F,s[41]=oe,s[42]=Z,s[43]=Qe):Qe=s[43],Qe}function Xp(s){return s.json()}function Yp(){return 0}function Jp(s){return s.name}function Qp(s){return console.error(s)}function Zp(s){return console.error(s)}function eh(s){return s.json()}function th(s){const e=j.c(7),{checked:t,onToggle:r,text:i}=s,n=t?"secondary":"ghost";let l;e[0]!==t?(l=t?o.jsx(fd,{className:"h-3 w-3"}):o.jsx(md,{className:"h-3 w-3"}),e[0]=t,e[1]=l):l=e[1];let a;return e[2]!==r||e[3]!==n||e[4]!==l||e[5]!==i?(a=o.jsxs(Te,{variant:n,size:"sm",onClick:r,className:"h-6 px-2 text-xs gap-1",children:[l,i]}),e[2]=r,e[3]=n,e[4]=l,e[5]=i,e[6]=a):a=e[6],a}class sh extends R.Component{static defaultProps={rowHeight:18};heights;viewport=Ae.createRef();constructor(e){super(e),this.heights={},this.state={vScroll:Lt()},this.onViewportUpdate=this.onViewportUpdate.bind(this)}componentDidMount(){window.addEventListener("resize",this.onViewportUpdate),this.onViewportUpdate()}componentWillUnmount(){window.removeEventListener("resize",this.onViewportUpdate)}getSnapshotBeforeUpdate(){return Ks(this.viewport)}componentDidUpdate(e,t,r){r&&dl(this.viewport),this.onViewportUpdate()}onViewportUpdate(){const e=this.viewport.current,t=Lt({itemCount:this.props.events.length,rowHeight:this.props.rowHeight,viewportTop:e.scrollTop,viewportHeight:e.offsetHeight,itemHeights:this.props.events.map(r=>this.heights[r.id])});es(this.state.vScroll,t)||this.setState({vScroll:t})}setHeight(e,t){if(t&&!this.heights[e]){const r=t.offsetHeight;this.heights[e]!==r&&(this.heights[e]=r,this.onViewportUpdate())}}render(){const{vScroll:e}=this.state,{events:t}=this.props;return o.jsxs("pre",{ref:this.viewport,onScroll:this.onViewportUpdate,className:H("flex-1 overflow-auto m-0 p-2","font-mono text-xs leading-relaxed","bg-background"),children:[o.jsx("div",{style:{height:e.paddingTop}}),t.slice(e.start,e.end).map(r=>o.jsxs("div",{ref:i=>{this.setHeight(r.id,i)},className:"flex items-start gap-2 py-0.5",children:[o.jsx(nh,{event:r}),o.jsx("span",{className:"whitespace-pre-wrap break-all",children:r.message})]},r.id)),o.jsx("div",{style:{height:e.paddingBottom}})]})}}function nh(s){const e=j.c(5),{event:t}=s;switch(t.level){case"web":{let r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(Qr,{className:H("h-3 w-3 flex-shrink-0 mt-0.5","text-info")}),e[0]=r):r=e[0],r}case"debug":{let r;return e[1]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(xd,{className:H("h-3 w-3 flex-shrink-0 mt-0.5","text-muted-foreground")}),e[1]=r):r=e[1],r}case"warn":{let r;return e[2]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(Is,{className:H("h-3 w-3 flex-shrink-0 mt-0.5","text-warning")}),e[2]=r):r=e[2],r}case"error":{let r;return e[3]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(hd,{className:H("h-3 w-3 flex-shrink-0 mt-0.5","text-destructive")}),e[3]=r):r=e[3],r}default:{let r;return e[4]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(pd,{className:H("h-3 w-3 flex-shrink-0 mt-0.5","text-info")}),e[4]=r):r=e[4],r}}}class rh extends R.Component{static defaultProps={defaultHeight:200};dragStart;constructor(e,t){super(e,t),this.state={height:this.props.defaultHeight},this.onDragStart=this.onDragStart.bind(this),this.onDragMove=this.onDragMove.bind(this),this.onDragStop=this.onDragStop.bind(this)}onDragStart(e){e.preventDefault(),this.dragStart=this.state.height+e.pageY,window.addEventListener("mousemove",this.onDragMove),window.addEventListener("mouseup",this.onDragStop),window.addEventListener("dragend",this.onDragStop)}onDragMove(e){e.preventDefault(),this.setState({height:this.dragStart-e.pageY})}onDragStop(e){e.preventDefault(),window.removeEventListener("mousemove",this.onDragMove)}render(){const{height:e}=this.state,{filters:t,events:r,toggleFilter:i,close:n}=this.props;return o.jsxs("div",{className:H("flex flex-col border-t border-border bg-card","flex-shrink-0 overflow-hidden"),style:{height:e},children:[o.jsxs("div",{className:H("flex items-center justify-between px-2 py-1","border-b border-border bg-muted cursor-ns-resize"),onMouseDown:this.onDragStart,children:[o.jsx("span",{className:"text-sm font-medium",children:"Event Log"}),o.jsxs("div",{className:"flex items-center gap-2",children:[Object.values(no).map(l=>o.jsx(th,{text:l,checked:t[l],onToggle:()=>i(l)},l)),o.jsx(Te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:n,children:o.jsx(mt,{className:"h-4 w-4"})})]})]}),o.jsx(sh,{events:r})]})}}const ih=ss(s=>({filters:s.eventLog.filters,events:s.eventLog.view}),{close:ns,toggleFilter:so})(rh);function oh(){const s=j.c(55),e=P(ah),{mode:t,intercept:r,showhost:i,upstream_cert:n,rawtcp:l,http2:a,websocket:d,anticache:u,anticomp:m,stickyauth:p,stickycookie:x,stream_large_bodies:v,listen_host:y,listen_port:w,server:N,ssl_insecure:S}=P(lh);let $;s[0]===Symbol.for("react.memo_cache_sentinel")?($=H("flex-shrink-0 flex items-center justify-between","px-2 py-1.5 border-t border-border bg-card","text-xs"),s[0]=$):$=s[0];let k;s[1]!==t?(k=t&&(t.length!==1||t[0]!=="regular")&&o.jsx(de,{variant:"success",className:"text-xs",children:t.join(",")}),s[1]=t,s[2]=k):k=s[2];let T;s[3]!==r?(T=r&&o.jsxs(de,{variant:"success",className:"text-xs",children:["Intercept: ",r]}),s[3]=r,s[4]=T):T=s[4];let D;s[5]!==S?(D=S&&o.jsx(de,{variant:"destructive",className:"text-xs",children:"ssl_insecure"}),s[5]=S,s[6]=D):D=s[6];let L;s[7]!==i?(L=i&&o.jsx(de,{variant:"success",className:"text-xs",children:"showhost"}),s[7]=i,s[8]=L):L=s[8];let q;s[9]!==n?(q=!n&&o.jsx(de,{variant:"success",className:"text-xs",children:"no-upstream-cert"}),s[9]=n,s[10]=q):q=s[10];let O;s[11]!==l?(O=!l&&o.jsx(de,{variant:"success",className:"text-xs",children:"no-raw-tcp"}),s[11]=l,s[12]=O):O=s[12];let V;s[13]!==a?(V=!a&&o.jsx(de,{variant:"success",className:"text-xs",children:"no-http2"}),s[13]=a,s[14]=V):V=s[14];let z;s[15]!==d?(z=!d&&o.jsx(de,{variant:"success",className:"text-xs",children:"no-websocket"}),s[15]=d,s[16]=z):z=s[16];let K;s[17]!==u?(K=u&&o.jsx(de,{variant:"success",className:"text-xs",children:"anticache"}),s[17]=u,s[18]=K):K=s[18];let B;s[19]!==m?(B=m&&o.jsx(de,{variant:"success",className:"text-xs",children:"anticomp"}),s[19]=m,s[20]=B):B=s[20];let W;s[21]!==p?(W=p&&o.jsxs(de,{variant:"success",className:"text-xs",children:["stickyauth: ",p]}),s[21]=p,s[22]=W):W=s[22];let te;s[23]!==x?(te=x&&o.jsxs(de,{variant:"success",className:"text-xs",children:["stickycookie: ",x]}),s[23]=x,s[24]=te):te=s[24];let X;s[25]!==v?(X=v&&o.jsxs(de,{variant:"success",className:"text-xs",children:["stream: ",ji(v)]}),s[25]=v,s[26]=X):X=s[26];let Q;s[27]!==k||s[28]!==B||s[29]!==W||s[30]!==te||s[31]!==X||s[32]!==T||s[33]!==D||s[34]!==L||s[35]!==q||s[36]!==O||s[37]!==V||s[38]!==z||s[39]!==K?(Q=o.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[k,T,D,L,q,O,V,z,K,B,W,te,X]}),s[27]=k,s[28]=B,s[29]=W,s[30]=te,s[31]=X,s[32]=T,s[33]=D,s[34]=L,s[35]=q,s[36]=O,s[37]=V,s[38]=z,s[39]=K,s[40]=Q):Q=s[40];let J;s[41]!==y||s[42]!==w||s[43]!==N?(J=N&&o.jsxs(de,{variant:"info",className:"text-xs",title:"HTTP Proxy Server Address",children:[y||"*",":",w||8080]}),s[41]=y,s[42]=w,s[43]=N,s[44]=J):J=s[44];let ie;s[45]!==J?(ie=o.jsx(Nt,{children:J}),s[45]=J,s[46]=ie):ie=s[46];let ee;s[47]!==e?(ee=o.jsxs(de,{variant:"secondary",className:"text-xs",title:"Mitmproxy Version",children:["mitmproxy ",e]}),s[47]=e,s[48]=ee):ee=s[48];let fe;s[49]!==ie||s[50]!==ee?(fe=o.jsxs("div",{className:"flex items-center gap-1.5",children:[ie,ee]}),s[49]=ie,s[50]=ee,s[51]=fe):fe=s[51];let be;return s[52]!==Q||s[53]!==fe?(be=o.jsxs("footer",{className:$,children:[Q,fe]}),s[52]=Q,s[53]=fe,s[54]=be):be=s[54],be}function lh(s){return s.options}function ah(s){return s.backendState.version}const ch=bd,dh=gd,$l=R.forwardRef((s,e)=>{const t=j.c(9);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),t[3]=r,t[4]=n):n=t[4];let l;return t[5]!==i||t[6]!==e||t[7]!==n?(l=o.jsx(vi,{ref:e,className:n,...i}),t[5]=i,t[6]=e,t[7]=n,t[8]=l):l=t[8],l});$l.displayName=vi.displayName;const Cl=R.forwardRef((s,e)=>{const t=j.c(13);let r,i,n;t[0]!==s?({className:i,children:r,...n}=s,t[0]=s,t[1]=r,t[2]=i,t[3]=n):(r=t[1],i=t[2],n=t[3]);let l;t[4]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx($l,{}),t[4]=l):l=t[4];let a;t[5]!==i?(a=H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",i),t[5]=i,t[6]=a):a=t[6];let d;t[7]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsxs(vd,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(mt,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]}),t[7]=d):d=t[7];let u;return t[8]!==r||t[9]!==n||t[10]!==e||t[11]!==a?(u=o.jsxs(dh,{children:[l,o.jsxs(bi,{ref:e,className:a,...n,children:[r,d]})]}),t[8]=r,t[9]=n,t[10]=e,t[11]=a,t[12]=u):u=t[12],u});Cl.displayName=bi.displayName;const kl=s=>{const e=j.c(8);let t,r;e[0]!==s?({className:t,...r}=s,e[0]=s,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]!==t?(i=H("flex flex-col space-y-1.5 text-center sm:text-left",t),e[3]=t,e[4]=i):i=e[4];let n;return e[5]!==r||e[6]!==i?(n=o.jsx("div",{className:i,...r}),e[5]=r,e[6]=i,e[7]=n):n=e[7],n};kl.displayName="DialogHeader";const El=R.forwardRef((s,e)=>{const t=j.c(9);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H("text-lg font-semibold leading-none tracking-tight",r),t[3]=r,t[4]=n):n=t[4];let l;return t[5]!==i||t[6]!==e||t[7]!==n?(l=o.jsx(yi,{ref:e,className:n,...i}),t[5]=i,t[6]=e,t[7]=n,t[8]=l):l=t[8],l});El.displayName=yi.displayName;const Tl=R.forwardRef((s,e)=>{const t=j.c(9);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H("text-sm text-muted-foreground",r),t[3]=r,t[4]=n):n=t[4];let l;return t[5]!==i||t[6]!==e||t[7]!==n?(l=o.jsx(wi,{ref:e,className:n,...i}),t[5]=i,t[6]=e,t[7]=n,t[8]=l):l=t[8],l});Tl.displayName=wi.displayName;function uh(s){const e=j.c(6),{children:t,open:r,onOpenChange:i}=s,n=r===void 0?!0:r;let l;e[0]!==t?(l=o.jsx(Cl,{className:"max-w-4xl h-[85vh] overflow-hidden flex flex-col",children:t}),e[0]=t,e[1]=l):l=e[1];let a;return e[2]!==i||e[3]!==n||e[4]!==l?(a=o.jsx(ch,{open:n,onOpenChange:i,children:l}),e[2]=i,e[3]=n,e[4]=l,e[5]=a):a=e[5],a}const Rl=R.forwardRef((s,e)=>{const t=j.c(9);let r,i;t[0]!==s?({className:r,...i}=s,t[0]=s,t[1]=r,t[2]=i):(r=t[1],i=t[2]);let n;t[3]!==r?(n=H("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),t[3]=r,t[4]=n):n=t[4];let l;return t[5]!==i||t[6]!==e||t[7]!==n?(l=o.jsx("textarea",{className:n,ref:e,...i}),t[5]=i,t[6]=e,t[7]=n,t[8]=l):l=t[8],l});Rl.displayName="Textarea";const fh=s=>{s.key!=="Escape"&&s.stopPropagation()};function mh(s){const e=j.c(9),{value:t,onChange:r,name:i}=s;let n;e[0]!==i||e[1]!==r||e[2]!==t?(n=o.jsx(on,{id:i,checked:t,onCheckedChange:r}),e[0]=i,e[1]=r,e[2]=t,e[3]=n):n=e[3];let l;e[4]!==i?(l=o.jsx(xe,{htmlFor:i,className:"text-sm text-muted-foreground",children:"Enable"}),e[4]=i,e[5]=l):l=e[5];let a;return e[6]!==n||e[7]!==l?(a=o.jsxs("div",{className:"flex items-center space-x-2",children:[n,l]}),e[6]=n,e[7]=l,e[8]=a):a=e[8],a}function Fr(s){const e=j.c(10);let t,r,i;e[0]!==s?({value:i,onChange:t,...r}=s,e[0]=s,e[1]=t,e[2]=r,e[3]=i):(t=e[1],r=e[2],i=e[3]);const n=i||"";let l;e[4]!==t?(l=d=>t(d.target.value),e[4]=t,e[5]=l):l=e[5];let a;return e[6]!==r||e[7]!==n||e[8]!==l?(a=o.jsx(as,{type:"text",value:n,onChange:l,className:"h-8",...r}),e[6]=r,e[7]=n,e[8]=l,e[9]=a):a=e[9],a}function Lr(s){return function({onChange:t,...r}){return o.jsx(s,{onChange:i=>t(i||null),...r})}}function Or(s){const e=j.c(10);let t,r,i;e[0]!==s?({value:i,onChange:t,...r}=s,e[0]=s,e[1]=t,e[2]=r,e[3]=i):(t=e[1],r=e[2],i=e[3]);let n;e[4]!==t?(n=a=>t(parseInt(a.target.value)),e[4]=t,e[5]=n):n=e[5];let l;return e[6]!==r||e[7]!==n||e[8]!==i?(l=o.jsx(as,{type:"number",value:i,onChange:n,className:"h-8",...r}),e[6]=r,e[7]=n,e[8]=i,e[9]=l):l=e[9],l}function ph(s){const e=j.c(9),{value:t,onChange:r,choices:i}=s;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx(cn,{className:"h-8",children:o.jsx(gl,{placeholder:"Select..."})}),e[0]=n):n=e[0];let l;e[1]!==i?(l=i.map(hh),e[1]=i,e[2]=l):l=e[2];let a;e[3]!==l?(a=o.jsx(dn,{children:l}),e[3]=l,e[4]=a):a=e[4];let d;return e[5]!==r||e[6]!==a||e[7]!==t?(d=o.jsxs(xl,{value:t,onValueChange:r,children:[n,a]}),e[5]=r,e[6]=a,e[7]=t,e[8]=d):d=e[8],d}function hh(s){return o.jsx(un,{value:s,children:s},s)}function xh(s){const e=j.c(13);let t,r,i;e[0]!==s?({value:i,onChange:t,...r}=s,e[0]=s,e[1]=t,e[2]=r,e[3]=i):(t=e[1],r=e[2],i=e[3]);const n=Math.max(i.length,1);let l;e[4]!==i?(l=i.join(`
`),e[4]=i,e[5]=l):l=e[5];const[a,d]=Ae.useState(l);let u;e[6]!==t?(u=x=>{const v=x.target.value;d(v),t(v.split(`
`).map(vh).filter(gh))},e[6]=t,e[7]=u):u=e[7];const m=u;let p;return e[8]!==m||e[9]!==n||e[10]!==r||e[11]!==a?(p=o.jsx(Rl,{rows:n,value:a,onChange:m,className:"min-h-[60px] resize-y",...r}),e[8]=m,e[9]=n,e[10]=r,e[11]=a,e[12]=p):p=e[12],p}function gh(s){return s!==""}function vh(s){return s.trim()}const bh={bool:mh,str:Fr,int:Or,"optional str":Lr(Fr),"optional int":Lr(Or),"sequence of str":xh};function yh(s){const e=j.c(15),{choices:t,type:r,value:i,onChange:n,name:l,error:a}=s;let d,u;if(e[0]!==t||e[1]!==l||e[2]!==n||e[3]!==r||e[4]!==i){if(u={onChange:n,value:i,name:l},t)d=ph,u.choices=t;else if(d=bh[r],!d)throw`unknown option type ${r}`;e[0]=t,e[1]=l,e[2]=n,e[3]=r,e[4]=i,e[5]=u,e[6]=d}else u=e[5],d=e[6];const m=a&&"ring-2 ring-destructive rounded-md";let p;e[7]!==m?(p=H(m),e[7]=m,e[8]=p):p=e[8];let x;e[9]!==d||e[10]!==u?(x=o.jsx(d,{onKeyDown:fh,...u}),e[9]=d,e[10]=u,e[11]=x):x=e[11];let v;return e[12]!==p||e[13]!==x?(v=o.jsx("div",{className:p,children:x}),e[12]=p,e[13]=x,e[14]=v):v=e[14],v}function wh(s){const e=j.c(18),{name:t}=s,r=Y();let i;e[0]!==t?(i=y=>y.options_meta[t]?.choices,e[0]=t,e[1]=i):i=e[1];const n=P(i);let l;e[2]!==t?(l=y=>y.options_meta[t]?.type,e[2]=t,e[3]=l):l=e[3];const a=P(l);let d;e[4]!==t?(d=y=>{const w=y.ui.optionsEditor[t];return w?w.value:y.options_meta[t]?.value},e[4]=t,e[5]=d):d=e[5];const u=P(d);let m;e[6]!==t?(m=y=>y.ui.optionsEditor[t]?.error,e[6]=t,e[7]=m):m=e[7];const p=P(m);let x;e[8]!==r||e[9]!==t?(x=y=>r(Us(t,y)),e[8]=r,e[9]=t,e[10]=x):x=e[10];let v;return e[11]!==n||e[12]!==p||e[13]!==t||e[14]!==x||e[15]!==a||e[16]!==u?(v=o.jsx(yh,{name:t,choices:n,type:a,value:u,error:p,onChange:x}),e[11]=n,e[12]=p,e[13]=t,e[14]=x,e[15]=a,e[16]=u,e[17]=v):v=e[17],v}function _h(s){const e=j.c(4),{name:t}=s;let r;e[0]!==t?(r=l=>l.options_meta[t]?.help,e[0]=t,e[1]=r):r=e[1];const i=P(r);let n;return e[2]!==i?(n=o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:i}),e[2]=i,e[3]=n):n=e[3],n}function jh(s){const e=j.c(4),{name:t}=s;let r;e[0]!==t?(r=l=>l.options_meta[t]?.error,e[0]=t,e[1]=r):r=e[1];const i=P(r);if(!i)return null;let n;return e[2]!==i?(n=o.jsx("div",{className:"text-xs text-destructive mt-1",children:i}),e[2]=i,e[3]=n):n=e[3],n}function Nh(s){const e=j.c(2);let{value:t,defaultVal:r}=s;if(t===r)return null;{if(typeof r=="boolean")r=r?"true":"false";else if(Array.isArray(r)){if(Xt.isEmpty(Xt.compact(t))&&Xt.isEmpty(r))return null;r="[ ]"}else r===""?r='""':r===null&&(r="null");let i;return e[0]!==r?(i=o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Default: ",o.jsx("strong",{children:r})]}),e[0]=r,e[1]=i):i=e[1],i}}const Sh=ss((s,{name:e})=>({value:s.options[e],defaultVal:s.options_meta[e]?.default}))(Nh);function $h(){const s=j.c(17),e=P(kh,es);let t,r,i,n,l;if(s[0]!==e){const m=e.sort();s[6]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsxs(kl,{className:"flex-shrink-0",children:[o.jsx(El,{children:"Options"}),o.jsx(Tl,{children:"Configure mitmproxy settings"})]}),s[6]=l):l=s[6],t=an,n="flex-1 min-h-0",r="space-y-4 py-4 pr-4",i=m.map(Ch),s[0]=e,s[1]=t,s[2]=r,s[3]=i,s[4]=n,s[5]=l}else t=s[1],r=s[2],i=s[3],n=s[4],l=s[5];let a;s[7]!==r||s[8]!==i?(a=o.jsx("div",{className:r,children:i}),s[7]=r,s[8]=i,s[9]=a):a=s[9];let d;s[10]!==t||s[11]!==n||s[12]!==a?(d=o.jsx(t,{className:n,children:a}),s[10]=t,s[11]=n,s[12]=a,s[13]=d):d=s[13];let u;return s[14]!==l||s[15]!==d?(u=o.jsxs(o.Fragment,{children:[l,d]}),s[14]=l,s[15]=d,s[16]=u):u=s[16],u}function Ch(s){return o.jsxs("div",{className:H("grid grid-cols-2 gap-4 py-3","border-b border-border/50 last:border-0"),children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:s,className:"text-sm font-medium",children:s}),o.jsx(_h,{name:s})]}),o.jsxs("div",{children:[o.jsx(wh,{name:s}),o.jsx(jh,{name:s}),o.jsx(Sh,{name:s})]})]},s)}function kh(s){return Object.keys(s.options_meta)}function Eh(){const s=j.c(5),e=Y();let t;s[0]!==e?(t=n=>{n||e(eo())},s[0]=e,s[1]=t):t=s[1];let r;s[2]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx($h,{}),s[2]=r):r=s[2];let i;return s[3]!==t?(i=o.jsx(uh,{open:!0,onOpenChange:t,children:r}),s[3]=t,s[4]=i):i=s[4],i}const Th={OptionModal:Eh};function Rh(){const s=j.c(3),e=P(Ih),t=e?Th[e]:void 0;if(t){let r;return s[0]!==t?(r=o.jsx(t,{}),s[0]=t,s[1]=r):r=s[1],r}else{let r;return s[2]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx(o.Fragment,{}),s[2]=r):r=s[2],r}}function Ih(s){return s.ui.modal.activeModal}class Dh extends R.Component{state={};render=()=>{const{showEventLog:e,showCommandBar:t}=this.props;return this.state.error?(console.log("ERR",this.state),o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-destructive mb-4",children:"mitmproxy has crashed."}),o.jsxs("pre",{className:"bg-muted p-4 rounded-lg overflow-auto max-w-full text-sm mb-4",children:[this.state.error.stack,o.jsx("br",{}),o.jsx("br",{}),"Component Stack:",this.state.errorInfo?.componentStack]}),o.jsxs("p",{className:"text-muted-foreground",children:["Please lodge a bug report at"," ",o.jsx("a",{href:"https://github.com/mitmproxy/mitmproxy/issues",className:"text-primary underline hover:text-primary/80",children:"https://github.com/mitmproxy/mitmproxy/issues"}),"."]})]})):o.jsxs("div",{id:"container",tabIndex:0,className:H("flex flex-col h-full outline-none","bg-background text-foreground"),children:[o.jsx(Hp,{}),o.jsx(ip,{}),t&&o.jsx(Gp,{},"commandbar"),e&&o.jsx(ih,{},"eventlog"),o.jsx(oh,{}),o.jsx(Rh,{})]})};componentDidMount(){window.addEventListener("keydown",this.props.onKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.props.onKeyDown)}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}}const Ah=ss(s=>({showEventLog:s.eventLog.visible,showCommandBar:s.commandBar.visible}),{onKeyDown:em})(Dh),st={SEARCH:"s",HIGHLIGHT:"h",SHOW_EVENTLOG:"e",SHOW_COMMANDBAR:"c"};function Fh(s){const[e,t]=window.location.hash.substr(1).split("?",2),r=e.substr(1).split("/");if(r[0]==="flows"){if(r.length==3){const[i,n]=r.slice(1);s.dispatch(Jt(n));const l=()=>{const d=s.getState().flows.byId.get(i);d!==void 0&&(a(),s.dispatch(Ve([d])))},a=s.subscribe(l);l()}}else r[0]==="capture"&&s.dispatch(Yt(Se.Capture));t&&t.split("&").forEach(i=>{const[n,l]=i.split("=",2),a=decodeURIComponent(l);switch(n){case st.SEARCH:s.dispatch(qi(a));break;case st.HIGHLIGHT:s.dispatch(Hi(a));break;case st.SHOW_EVENTLOG:s.getState().eventLog.visible||s.dispatch(ns());break;case st.SHOW_COMMANDBAR:s.getState().commandBar.visible||s.dispatch(oo());break;default:console.error(`unimplemented query arg: ${i}`)}})}function Lh(s){const e=s.getState(),t={[st.SEARCH]:e.ui.filter[Ne.Search],[st.HIGHLIGHT]:e.ui.filter[Ne.Highlight],[st.SHOW_EVENTLOG]:e.eventLog.visible,[st.SHOW_COMMANDBAR]:e.commandBar.visible},r=Object.keys(t).filter(l=>t[l]).map(l=>`${l}=${encodeURIComponent(t[l])}`).join("&");let i;e.ui.tabs.current===Se.Capture?i="/capture":e.flows.selected.length>0?i=`/flows/${e.flows.selected[0].id}/${e.ui.flow.tab}`:i="/flows",r&&(i+="?"+r);let n=window.location.pathname;n==="blank"&&(n="/"),window.location.hash.substr(1)!==i&&history.replaceState(void 0,"",`${n}#${i}`)}function Oh(s){Fh(s),s.subscribe(()=>Lh(s))}var ct=(s=>(s.State="state",s.Flows="flows",s.Events="events",s.Options="options",s))(ct||{});class Ph{activeFetches;store;filterState;socket;messageQueue;constructor(e){this.activeFetches={},this.store=e,this.filterState=Mi,this.messageQueue=[],this.connect(),this.store.subscribe(this.onStoreUpdate.bind(this))}connect(){const e=location.origin.replace("http","ws")+location.pathname.replace(/\/$/,"")+"/updates",r=new URLSearchParams(location.search).get("token")||void 0,i=r?`${e}?token=${r}`:e;this.socket=new WebSocket(i),this.socket.addEventListener("open",()=>this.onOpen()),this.socket.addEventListener("close",n=>this.onClose(n)),this.socket.addEventListener("message",n=>this.onMessage(JSON.parse(n.data))),this.socket.addEventListener("error",n=>this.onError(n))}async onOpen(){for(const e of this.messageQueue)this.socket.send(JSON.stringify(e));this.messageQueue=[],this.store.dispatch(mu()),await Promise.all([this.fetchData("state"),this.fetchData("flows"),this.fetchData("events"),this.fetchData("options")]),this.store.dispatch(pu())}onStoreUpdate(){const e=this.store.getState().ui.filter;if(e!==this.filterState){for(const t of Object.values(Ne))this.filterState[t]!==e[t]&&this.sendMessage({type:"flows/updateFilter",payload:{name:t,expr:e[t]}});this.filterState=e}}fetchData(e){const t=[];return this.activeFetches[e]=t,ne(`./${e}`).then(r=>r.json()).then(r=>{this.activeFetches[e]===t&&this.receive(e,r)})}onMessage(e){switch(e.type){case"flows/add":return this.queueOrDispatch("flows",Gi(e.payload));case"flows/update":return this.queueOrDispatch("flows",Xi(e.payload));case"flows/filterUpdate":return this.queueOrDispatch("flows",Ji(e.payload));case"flows/remove":return this.queueOrDispatch("flows",Yi(e.payload));case"events/add":return this.queueOrDispatch("events",Hs(e.payload));case"options/update":return this.queueOrDispatch("options",Vs(e.payload));case"state/update":return this.queueOrDispatch("state",ze(e.payload));case"flows/reset":return this.fetchData("flows");case"events/reset":return this.fetchData("events");default:Ft(e.type)}}sendMessage(e){this.socket.readyState===WebSocket.OPEN?this.socket.send(JSON.stringify(e)):this.socket.readyState===WebSocket.CONNECTING?this.messageQueue.push(e):console.error("WebSocket is not open. Cannot send:",e)}queueOrDispatch(e,t){const r=this.activeFetches[e];r!==void 0?r.push(t):this.store.dispatch(t)}receive(e,t){switch(e){case"state":this.store.dispatch(Ue(t));break;case"options":this.store.dispatch(rs(t));break;case"events":this.store.dispatch(to(t));break;case"flows":this.store.dispatch(qs(t));break;default:Ft(e)}const r=this.activeFetches[e];delete this.activeFetches[e],r.forEach(i=>this.store.dispatch(i))}onClose(e){this.store.dispatch(hu(`Connection closed at ${new Date().toUTCString()} with error code ${e.code}.`)),console.error("websocket connection closed",e)}onError(...e){console.error("websocket connection errored",e)}}class Mh{store;constructor(e){this.store=e,this.onOpen()}onOpen(){this.fetchData(ct.Flows),this.fetchData(ct.Options)}fetchData(e){ne(`./${e}`).then(t=>t.json()).then(t=>{this.receive(e,t)})}receive(e,t){switch(e){case ct.Flows:this.store.dispatch(qs(t));break;case ct.Options:this.store.dispatch(rs(t));break;case ct.State:throw"unreachable";case ct.Events:throw"unreachable";default:Ft(e)}}}window.MITMWEB_STATIC?window.backend=new Mh(jt):window.backend=new Ph(jt);Oh(jt);const qh=jt.getState().ui.theme.current;qh==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");window.addEventListener("error",s=>{jt.dispatch(Jd(`${s.message}
${s.error.stack}`))});document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("mitmproxy");yd.createRoot(s).render(o.jsx(wd,{store:jt,children:o.jsx(fp,{children:o.jsx(Ah,{})})}))});window.React=Pr;
